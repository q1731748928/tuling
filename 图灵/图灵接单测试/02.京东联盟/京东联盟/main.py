import base64
import json
import math
import random
import time
import subprocess
from DrissionPage import WebPage,ChromiumOptions,SessionOptions
from urllib.parse import quote_plus,quote
import csv
import pandas as pd

class WriteToCsv:
    def __init__(self, file_name,col_name_list):
        self.file_name = file_name
        self.csv_file = open(file_name, 'w', newline='', encoding='utf-8')
        self.csv_writer = csv.writer(self.csv_file)
        self.csv_writer.writerow(col_name_list)

    def write_data(self, data):
        self.csv_writer.writerow(data)

    def write_datas(self, datas):
        self.csv_writer.writerows(datas)

    def close_file(self):
        self.csv_file.close()

    def change_csv_to_xlsx(self):
        df = pd.read_csv(self.file_name, encoding='utf-8')
        df.to_excel(self.file_name.replace('.csv', '.xlsx'), index=False)

def get_js_code():
    js_code = """d2luZG93ID0gZ2xvYmFsOwpkb2N1bWVudCA9IHsKICAgIHF1ZXJ5U2VsZWN0b3I6IGZ1bmN0aW9uIHF1ZXJ5U2VsZWN0b3IoKXsKCiAgICB9Cn0KCnZhciBQYXJhbXNTaWduID0gZnVuY3Rpb24oKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgZSA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWxUaGlzID8gZ2xvYmFsVGhpcyA6ICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZ2xvYmFsID8gZ2xvYmFsIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIHNlbGYgPyBzZWxmIDoge307CiAgICBmdW5jdGlvbiB0KGUpIHsKICAgICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsICJkZWZhdWx0IikgPyBlLmRlZmF1bHQgOiBlCiAgICB9CiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgICBpZiAoZS5fX2VzTW9kdWxlKQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB2YXIgdCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgICAgIHZhbHVlOiAhMAogICAgICAgIH0pOwogICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChmdW5jdGlvbihyKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcik7CiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgciwgbi5nZXQgPyBuIDogewogICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlW3JdCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICkpLAogICAgICAgICAgICB0CiAgICB9CiAgICB2YXIgbiA9IHt9CiAgICAgICAgLCBhID0gewogICAgICAgIGV4cG9ydHM6IHt9CiAgICB9CiAgICAgICAgLCBvID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBlICYmIGUuTWF0aCA9PT0gTWF0aCAmJiBlCiAgICB9CiAgICAgICAgLCBzID0gbygib2JqZWN0IiA9PSB0eXBlb2YgZ2xvYmFsVGhpcyAmJiBnbG9iYWxUaGlzKSB8fCBvKCJvYmplY3QiID09IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93KSB8fCBvKCJvYmplY3QiID09IHR5cGVvZiBzZWxmICYmIHNlbGYpIHx8IG8oIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZSkgfHwgbygib2JqZWN0IiA9PSB0eXBlb2YgZSAmJiBlKSB8fCBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcwogICAgfSgpIHx8IEZ1bmN0aW9uKCJyZXR1cm4gdGhpcyIpKCkKICAgICAgICAsIGMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuICEhZSgpCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gITAKICAgICAgICB9CiAgICB9CiAgICAgICAgLCBpID0gIWMoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgICAgIC5iaW5kKCk7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iICE9IHR5cGVvZiBlIHx8IGUuaGFzT3duUHJvcGVydHkoInByb3RvdHlwZSIpCiAgICAgICAgfQogICAgKSkKICAgICAgICAsIHUgPSBpCiAgICAgICAgLCBsID0gRnVuY3Rpb24ucHJvdG90eXBlCiAgICAgICAgLCBoID0gbC5hcHBseQogICAgICAgICwgZiA9IGwuY2FsbAogICAgICAgICwgZyA9ICJvYmplY3QiID09IHR5cGVvZiBSZWZsZWN0ICYmIFJlZmxlY3QuYXBwbHkgfHwgKHUgPyBmLmJpbmQoaCkgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkoaCwgYXJndW1lbnRzKQogICAgICAgIH0KICAgICkKICAgICAgICAsIHAgPSBpCiAgICAgICAgLCB2ID0gRnVuY3Rpb24ucHJvdG90eXBlCiAgICAgICAgLCBiID0gdi5jYWxsCiAgICAgICAgLCBkID0gcCAmJiB2LmJpbmQuYmluZChiLCBiKQogICAgICAgICwgayA9IHAgPyBkIDogZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIGIuYXBwbHkoZSwgYXJndW1lbnRzKQogICAgICAgIH0KICAgIH0KICAgICAgICAsIHkgPSBrCiAgICAgICAgLCBtID0geSh7fS50b1N0cmluZykKICAgICAgICAsIHcgPSB5KCIiLnNsaWNlKQogICAgICAgICwgXyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gdyhtKGUpLCA4LCAtMSkKICAgIH0KICAgICAgICAsIHggPSBfCiAgICAgICAgLCBTID0gawogICAgICAgICwgRSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIkZ1bmN0aW9uIiA9PT0geChlKSkKICAgICAgICAgICAgcmV0dXJuIFMoZSkKICAgIH0KICAgICAgICAsIEEgPSAib2JqZWN0IiA9PSB0eXBlb2YgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsCiAgICAgICAgLCBDID0gdm9pZCAwID09PSBBICYmIHZvaWQgMCAhPT0gQSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgfHwgZSA9PT0gQQogICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUKICAgICAgICB9CiAgICAgICAgLCBPID0ge30KICAgICAgICAsIFQgPSAhYygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiA3ICE9PSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIDEsIHsKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSlbMV0KICAgICAgICB9CiAgICApKQogICAgICAgICwgRCA9IGkKICAgICAgICAsIEIgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbAogICAgICAgICwgaiA9IEQgPyBCLmJpbmQoQikgOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gQi5hcHBseShCLCBhcmd1bWVudHMpCiAgICB9CiAgICAgICAgLCBNID0ge30KICAgICAgICAsIFIgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZQogICAgICAgICwgTiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IKICAgICAgICAsIFAgPSBOICYmICFSLmNhbGwoewogICAgICAgIDE6IDIKICAgIH0sIDEpOwogICAgTS5mID0gUCA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBOKHRoaXMsIGUpOwogICAgICAgICAgICByZXR1cm4gISF0ICYmIHQuZW51bWVyYWJsZQogICAgICAgIH0KICAgICAgICA6IFI7CiAgICB2YXIgSSwgTCwgeiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBlbnVtZXJhYmxlOiAhKDEgJiBlKSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhKDIgJiBlKSwKICAgICAgICAgICAgd3JpdGFibGU6ICEoNCAmIGUpLAogICAgICAgICAgICB2YWx1ZTogdAogICAgICAgIH0KICAgIH0sIEcgPSBjLCBIID0gXywgRiA9IE9iamVjdCwgVSA9IGsoIiIuc3BsaXQpLCBZID0gRygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAhRigieiIpLnByb3BlcnR5SXNFbnVtZXJhYmxlKDApCiAgICAgICAgfQogICAgKSkgPyBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAiU3RyaW5nIiA9PT0gSChlKSA/IFUoZSwgIiIpIDogRihlKQogICAgICAgIH0KICAgICAgICA6IEYsIEogPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIG51bGwgPT0gZQogICAgfSwgVyA9IEosIFggPSBUeXBlRXJyb3IsIEsgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKFcoZSkpCiAgICAgICAgICAgIHRocm93IG5ldyBYKCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAiICsgZSk7CiAgICAgICAgcmV0dXJuIGUKICAgIH0sIHEgPSBZLCBaID0gSywgViA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gcShaKGUpKQogICAgfSwgUSA9IEMsICQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuICJvYmplY3QiID09IHR5cGVvZiBlID8gbnVsbCAhPT0gZSA6IFEoZSkKICAgIH0sIGVlID0ge30sIHRlID0gZWUsIHJlID0gcywgbmUgPSBDLCBhZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gbmUoZSkgPyBlIDogdm9pZCAwCiAgICB9LCBvZSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDIgPyBhZSh0ZVtlXSkgfHwgYWUocmVbZV0pIDogdGVbZV0gJiYgdGVbZV1bdF0gfHwgcmVbZV0gJiYgcmVbZV1bdF0KICAgIH0sIHNlID0gayh7fS5pc1Byb3RvdHlwZU9mKSwgY2UgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgbmF2aWdhdG9yICYmIFN0cmluZyhuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAiIiwgaWUgPSBzLCB1ZSA9IGNlLCBsZSA9IGllLnByb2Nlc3MsIGhlID0gaWUuRGVubywgZmUgPSBsZSAmJiBsZS52ZXJzaW9ucyB8fCBoZSAmJiBoZS52ZXJzaW9uLCBnZSA9IGZlICYmIGZlLnY4OwogICAgZ2UgJiYgKEwgPSAoSSA9IGdlLnNwbGl0KCIuIikpWzBdID4gMCAmJiBJWzBdIDwgNCA/IDEgOiArKElbMF0gKyBJWzFdKSksCiAgICAhTCAmJiB1ZSAmJiAoIShJID0gdWUubWF0Y2goL0VkZ2VcLyhcZCspLykpIHx8IElbMV0gPj0gNzQpICYmIChJID0gdWUubWF0Y2goL0Nocm9tZVwvKFxkKykvKSkgJiYgKEwgPSArSVsxXSk7CiAgICB2YXIgcGUgPSBMCiAgICAgICAgLCB2ZSA9IHBlCiAgICAgICAgLCBiZSA9IGMKICAgICAgICAsIGRlID0gcy5TdHJpbmcKICAgICAgICAsIGtlID0gISFPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzICYmICFiZSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0gU3ltYm9sKCJzeW1ib2wgZGV0ZWN0aW9uIik7CiAgICAgICAgICAgIHJldHVybiAhZGUoZSkgfHwgIShPYmplY3QoZSlpbnN0YW5jZW9mIFN5bWJvbCkgfHwgIVN5bWJvbC5zaGFtICYmIHZlICYmIHZlIDwgNDEKICAgICAgICB9CiAgICApKQogICAgICAgICwgeWUgPSBrZSAmJiAhU3ltYm9sLnNoYW0gJiYgInN5bWJvbCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvcgogICAgICAgICwgbWUgPSBvZQogICAgICAgICwgd2UgPSBDCiAgICAgICAgLCBfZSA9IHNlCiAgICAgICAgLCB4ZSA9IE9iamVjdAogICAgICAgICwgU2UgPSB5ZSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJzeW1ib2wiID09IHR5cGVvZiBlCiAgICAgICAgfQogICAgICAgIDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IG1lKCJTeW1ib2wiKTsKICAgICAgICAgICAgcmV0dXJuIHdlKHQpICYmIF9lKHQucHJvdG90eXBlLCB4ZShlKSkKICAgICAgICB9CiAgICAgICAgLCBFZSA9IFN0cmluZwogICAgICAgICwgQWUgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIEVlKGUpCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gIk9iamVjdCIKICAgICAgICB9CiAgICB9CiAgICAgICAgLCBDZSA9IEMKICAgICAgICAsIE9lID0gQWUKICAgICAgICAsIFRlID0gVHlwZUVycm9yCiAgICAgICAgLCBEZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoQ2UoZSkpCiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIHRocm93IG5ldyBUZShPZShlKSArICIgaXMgbm90IGEgZnVuY3Rpb24iKQogICAgfQogICAgICAgICwgQmUgPSBEZQogICAgICAgICwgamUgPSBKCiAgICAgICAgLCBNZSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciA9IGVbdF07CiAgICAgICAgcmV0dXJuIGplKHIpID8gdm9pZCAwIDogQmUocikKICAgIH0KICAgICAgICAsIFJlID0gagogICAgICAgICwgTmUgPSBDCiAgICAgICAgLCBQZSA9ICQKICAgICAgICAsIEllID0gVHlwZUVycm9yCiAgICAgICAgLCBMZSA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgemUgPSBzCiAgICAgICAgLCBHZSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eQogICAgICAgICwgSGUgPSBzCiAgICAgICAgLCBGZSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBHZSh6ZSwgZSwgewogICAgICAgICAgICAgICAgdmFsdWU6IHQsCiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgd3JpdGFibGU6ICEwCiAgICAgICAgICAgIH0pCiAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgICB6ZVtlXSA9IHQKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHQKICAgIH0KICAgICAgICAsIFVlID0gIl9fY29yZS1qc19zaGFyZWRfXyIKICAgICAgICAsIFllID0gTGUuZXhwb3J0cyA9IEhlW1VlXSB8fCBGZShVZSwge30pOwogICAgKFllLnZlcnNpb25zIHx8IChZZS52ZXJzaW9ucyA9IFtdKSkucHVzaCh7CiAgICAgICAgdmVyc2lvbjogIjMuMzYuMSIsCiAgICAgICAgbW9kZTogInB1cmUiLAogICAgICAgIGNvcHlyaWdodDogIsKpIDIwMTQtMjAyNCBEZW5pcyBQdXNoa2FyZXYgKHpsb2lyb2NrLnJ1KSIsCiAgICAgICAgbGljZW5zZTogImh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2Jsb2IvdjMuMzYuMS9MSUNFTlNFIiwKICAgICAgICBzb3VyY2U6ICJodHRwczovL2dpdGh1Yi5jb20vemxvaXJvY2svY29yZS1qcyIKICAgIH0pOwogICAgdmFyIEplID0gTGUuZXhwb3J0cwogICAgICAgICwgV2UgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIEplW2VdIHx8IChKZVtlXSA9IHQgfHwge30pCiAgICB9CiAgICAgICAgLCBYZSA9IEsKICAgICAgICAsIEtlID0gT2JqZWN0CiAgICAgICAgLCBxZSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gS2UoWGUoZSkpCiAgICB9CiAgICAgICAgLCBaZSA9IHFlCiAgICAgICAgLCBWZSA9IGsoe30uaGFzT3duUHJvcGVydHkpCiAgICAgICAgLCBRZSA9IE9iamVjdC5oYXNPd24gfHwgZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBWZShaZShlKSwgdCkKICAgIH0KICAgICAgICAsICRlID0gawogICAgICAgICwgZXQgPSAwCiAgICAgICAgLCB0dCA9IE1hdGgucmFuZG9tKCkKICAgICAgICAsIHJ0ID0gJGUoMS4udG9TdHJpbmcpCiAgICAgICAgLCBudCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gIlN5bWJvbCgiICsgKHZvaWQgMCA9PT0gZSA/ICIiIDogZSkgKyAiKV8iICsgcnQoKytldCArIHR0LCAzNikKICAgIH0KICAgICAgICAsIGF0ID0gV2UKICAgICAgICAsIG90ID0gUWUKICAgICAgICAsIHN0ID0gbnQKICAgICAgICAsIGN0ID0ga2UKICAgICAgICAsIGl0ID0geWUKICAgICAgICAsIHV0ID0gcy5TeW1ib2wKICAgICAgICAsIGx0ID0gYXQoIndrcyIpCiAgICAgICAgLCBodCA9IGl0ID8gdXQuZm9yIHx8IHV0IDogdXQgJiYgdXQud2l0aG91dFNldHRlciB8fCBzdAogICAgICAgICwgZnQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIG90KGx0LCBlKSB8fCAobHRbZV0gPSBjdCAmJiBvdCh1dCwgZSkgPyB1dFtlXSA6IGh0KCJTeW1ib2wuIiArIGUpKSwKICAgICAgICAgICAgbHRbZV0KICAgIH0KICAgICAgICAsIGd0ID0gagogICAgICAgICwgcHQgPSAkCiAgICAgICAgLCB2dCA9IFNlCiAgICAgICAgLCBidCA9IE1lCiAgICAgICAgLCBkdCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciwgbjsKICAgICAgICBpZiAoInN0cmluZyIgPT09IHQgJiYgTmUociA9IGUudG9TdHJpbmcpICYmICFQZShuID0gUmUociwgZSkpKQogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICBpZiAoTmUociA9IGUudmFsdWVPZikgJiYgIVBlKG4gPSBSZShyLCBlKSkpCiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgIGlmICgic3RyaW5nIiAhPT0gdCAmJiBOZShyID0gZS50b1N0cmluZykgJiYgIVBlKG4gPSBSZShyLCBlKSkpCiAgICAgICAgICAgIHJldHVybiBuOwogICAgICAgIHRocm93IG5ldyBJZSgiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIikKICAgIH0KICAgICAgICAsIGt0ID0gVHlwZUVycm9yCiAgICAgICAgLCB5dCA9IGZ0KCJ0b1ByaW1pdGl2ZSIpCiAgICAgICAgLCBtdCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICBpZiAoIXB0KGUpIHx8IHZ0KGUpKQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB2YXIgciwgbiA9IGJ0KGUsIHl0KTsKICAgICAgICBpZiAobikgewogICAgICAgICAgICBpZiAodm9pZCAwID09PSB0ICYmICh0ID0gImRlZmF1bHQiKSwKICAgICAgICAgICAgICAgIHIgPSBndChuLCBlLCB0KSwKICAgICAgICAgICAgIXB0KHIpIHx8IHZ0KHIpKQogICAgICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICAgIHRocm93IG5ldyBrdCgiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlIikKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiAodCA9ICJudW1iZXIiKSwKICAgICAgICAgICAgZHQoZSwgdCkKICAgIH0KICAgICAgICAsIHd0ID0gbXQKICAgICAgICAsIF90ID0gU2UKICAgICAgICAsIHh0ID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gd3QoZSwgInN0cmluZyIpOwogICAgICAgIHJldHVybiBfdCh0KSA/IHQgOiB0ICsgIiIKICAgIH0KICAgICAgICAsIFN0ID0gJAogICAgICAgICwgRXQgPSBzLmRvY3VtZW50CiAgICAgICAgLCBBdCA9IFN0KEV0KSAmJiBTdChFdC5jcmVhdGVFbGVtZW50KQogICAgICAgICwgQ3QgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIEF0ID8gRXQuY3JlYXRlRWxlbWVudChlKSA6IHt9CiAgICB9CiAgICAgICAgLCBPdCA9IEN0CiAgICAgICAgLCBUdCA9ICFUICYmICFjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIDcgIT09IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPdCgiZGl2IiksICJhIiwgewogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5hCiAgICAgICAgfQogICAgKSkKICAgICAgICAsIER0ID0gVAogICAgICAgICwgQnQgPSBqCiAgICAgICAgLCBqdCA9IE0KICAgICAgICAsIE10ID0gegogICAgICAgICwgUnQgPSBWCiAgICAgICAgLCBOdCA9IHh0CiAgICAgICAgLCBQdCA9IFFlCiAgICAgICAgLCBJdCA9IFR0CiAgICAgICAgLCBMdCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7CiAgICBPLmYgPSBEdCA/IEx0IDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgIGlmIChlID0gUnQoZSksCiAgICAgICAgICAgIHQgPSBOdCh0KSwKICAgICAgICAgICAgSXQpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTHQoZSwgdCkKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICBpZiAoUHQoZSwgdCkpCiAgICAgICAgICAgIHJldHVybiBNdCghQnQoanQuZiwgZSwgdCksIGVbdF0pCiAgICB9CiAgICA7CiAgICB2YXIgenQgPSBjCiAgICAgICAgLCBHdCA9IEMKICAgICAgICAsIEh0ID0gLyN8XC5wcm90b3R5cGVcLi8KICAgICAgICAsIEZ0ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByID0gWXRbVXQoZSldOwogICAgICAgIHJldHVybiByID09PSBXdCB8fCByICE9PSBKdCAmJiAoR3QodCkgPyB6dCh0KSA6ICEhdCkKICAgIH0KICAgICAgICAsIFV0ID0gRnQubm9ybWFsaXplID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBTdHJpbmcoZSkucmVwbGFjZShIdCwgIi4iKS50b0xvd2VyQ2FzZSgpCiAgICB9CiAgICAgICAgLCBZdCA9IEZ0LmRhdGEgPSB7fQogICAgICAgICwgSnQgPSBGdC5OQVRJVkUgPSAiTiIKICAgICAgICAsIFd0ID0gRnQuUE9MWUZJTEwgPSAiUCIKICAgICAgICAsIFh0ID0gRnQKICAgICAgICAsIEt0ID0gRGUKICAgICAgICAsIHF0ID0gaQogICAgICAgICwgWnQgPSBFKEUuYmluZCkKICAgICAgICAsIFZ0ID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBLdChlKSwKICAgICAgICAgICAgdm9pZCAwID09PSB0ID8gZSA6IHF0ID8gWnQoZSwgdCkgOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHQsIGFyZ3VtZW50cykKICAgICAgICAgICAgfQogICAgfQogICAgICAgICwgUXQgPSB7fQogICAgICAgICwgJHQgPSBUICYmIGMoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gNDIgIT09IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSgoZnVuY3Rpb24oKSB7fQogICAgICAgICAgICApLCAicHJvdG90eXBlIiwgewogICAgICAgICAgICAgICAgdmFsdWU6IDQyLAogICAgICAgICAgICAgICAgd3JpdGFibGU6ICExCiAgICAgICAgICAgIH0pLnByb3RvdHlwZQogICAgICAgIH0KICAgICkpCiAgICAgICAgLCBlciA9ICQKICAgICAgICAsIHRyID0gU3RyaW5nCiAgICAgICAgLCByciA9IFR5cGVFcnJvcgogICAgICAgICwgbnIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKGVyKGUpKQogICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICB0aHJvdyBuZXcgcnIodHIoZSkgKyAiIGlzIG5vdCBhbiBvYmplY3QiKQogICAgfQogICAgICAgICwgYXIgPSBUCiAgICAgICAgLCBvciA9IFR0CiAgICAgICAgLCBzciA9ICR0CiAgICAgICAgLCBjciA9IG5yCiAgICAgICAgLCBpciA9IHh0CiAgICAgICAgLCB1ciA9IFR5cGVFcnJvcgogICAgICAgICwgbHIgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkKICAgICAgICAsIGhyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcgogICAgICAgICwgZnIgPSAiZW51bWVyYWJsZSIKICAgICAgICAsIGdyID0gImNvbmZpZ3VyYWJsZSIKICAgICAgICAsIHByID0gIndyaXRhYmxlIjsKICAgIFF0LmYgPSBhciA/IHNyID8gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgICAgICBpZiAoY3IoZSksCiAgICAgICAgICAgICAgICB0ID0gaXIodCksCiAgICAgICAgICAgICAgICBjcihyKSwKICAgICAgICAgICAgImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAicHJvdG90eXBlIiA9PT0gdCAmJiAidmFsdWUiaW4gciAmJiBwciBpbiByICYmICFyW3ByXSkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBocihlLCB0KTsKICAgICAgICAgICAgICAgIG4gJiYgbltwcl0gJiYgKGVbdF0gPSByLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZ3IgaW4gciA/IHJbZ3JdIDogbltncl0sCiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZyIGluIHIgPyByW2ZyXSA6IG5bZnJdLAogICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITEKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBscihlLCB0LCByKQogICAgICAgIH0KICAgICAgICA6IGxyIDogZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIGlmIChjcihlKSwKICAgICAgICAgICAgdCA9IGlyKHQpLAogICAgICAgICAgICBjcihyKSwKICAgICAgICAgICAgb3IpCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbHIoZSwgdCwgcikKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICBpZiAoImdldCJpbiByIHx8ICJzZXQiaW4gcikKICAgICAgICAgICAgdGhyb3cgbmV3IHVyKCJBY2Nlc3NvcnMgbm90IHN1cHBvcnRlZCIpOwogICAgICAgIHJldHVybiAidmFsdWUiaW4gciAmJiAoZVt0XSA9IHIudmFsdWUpLAogICAgICAgICAgICBlCiAgICB9CiAgICA7CiAgICB2YXIgdnIgPSBRdAogICAgICAgICwgYnIgPSB6CiAgICAgICAgLCBkciA9IFQgPyBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgIHJldHVybiB2ci5mKGUsIHQsIGJyKDEsIHIpKQogICAgICAgIH0KICAgICAgICA6IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgcmV0dXJuIGVbdF0gPSByLAogICAgICAgICAgICAgICAgZQogICAgICAgIH0KICAgICAgICAsIGtyID0gcwogICAgICAgICwgeXIgPSBnCiAgICAgICAgLCBtciA9IEUKICAgICAgICAsIHdyID0gQwogICAgICAgICwgX3IgPSBPLmYKICAgICAgICAsIHhyID0gWHQKICAgICAgICAsIFNyID0gZWUKICAgICAgICAsIEVyID0gVnQKICAgICAgICAsIEFyID0gZHIKICAgICAgICAsIENyID0gUWUKICAgICAgICAsIE9yID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZnVuY3Rpb24ociwgbiwgYSkgewogICAgICAgICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIHQpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlKHIpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBlKHIsbikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZShyLG4sYSkKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4geXIoZSwgdGhpcywgYXJndW1lbnRzKQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHQucHJvdG90eXBlID0gZS5wcm90b3R5cGUsCiAgICAgICAgICAgIHQKICAgIH0KICAgICAgICAsIFRyID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByLCBuLCBhLCBvLCBzLCBjLCBpLCB1LCBsLCBoID0gZS50YXJnZXQsIGYgPSBlLmdsb2JhbCwgZyA9IGUuc3RhdCwgcCA9IGUucHJvdG8sIHYgPSBmID8ga3IgOiBnID8ga3JbaF0gOiBrcltoXSAmJiBrcltoXS5wcm90b3R5cGUsIGIgPSBmID8gU3IgOiBTcltoXSB8fCBBcihTciwgaCwge30pW2hdLCBkID0gYi5wcm90b3R5cGU7CiAgICAgICAgZm9yIChvIGluIHQpCiAgICAgICAgICAgIG4gPSAhKHIgPSB4cihmID8gbyA6IGggKyAoZyA/ICIuIiA6ICIjIikgKyBvLCBlLmZvcmNlZCkpICYmIHYgJiYgQ3IodiwgbyksCiAgICAgICAgICAgICAgICBjID0gYltvXSwKICAgICAgICAgICAgbiAmJiAoaSA9IGUuZG9udENhbGxHZXRTZXQgPyAobCA9IF9yKHYsIG8pKSAmJiBsLnZhbHVlIDogdltvXSksCiAgICAgICAgICAgICAgICBzID0gbiAmJiBpID8gaSA6IHRbb10sCiAgICAgICAgICAgIChyIHx8IHAgfHwgdHlwZW9mIGMgIT0gdHlwZW9mIHMpICYmICh1ID0gZS5iaW5kICYmIG4gPyBFcihzLCBrcikgOiBlLndyYXAgJiYgbiA/IE9yKHMpIDogcCAmJiB3cihzKSA/IG1yKHMpIDogcywKICAgICAgICAgICAgKGUuc2hhbSB8fCBzICYmIHMuc2hhbSB8fCBjICYmIGMuc2hhbSkgJiYgQXIodSwgInNoYW0iLCAhMCksCiAgICAgICAgICAgICAgICBBcihiLCBvLCB1KSwKICAgICAgICAgICAgcCAmJiAoQ3IoU3IsIGEgPSBoICsgIlByb3RvdHlwZSIpIHx8IEFyKFNyLCBhLCB7fSksCiAgICAgICAgICAgICAgICBBcihTclthXSwgbywgcyksCiAgICAgICAgICAgIGUucmVhbCAmJiBkICYmIChyIHx8ICFkW29dKSAmJiBBcihkLCBvLCBzKSkpCiAgICB9CiAgICAgICAgLCBEciA9IF8KICAgICAgICAsIEJyID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuICJBcnJheSIgPT09IERyKGUpCiAgICB9CiAgICAgICAgLCBqciA9IE1hdGguY2VpbAogICAgICAgICwgTXIgPSBNYXRoLmZsb29yCiAgICAgICAgLCBSciA9IE1hdGgudHJ1bmMgfHwgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gK2U7CiAgICAgICAgcmV0dXJuICh0ID4gMCA/IE1yIDoganIpKHQpCiAgICB9CiAgICAgICAgLCBOciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9ICtlOwogICAgICAgIHJldHVybiB0ICE9IHQgfHwgMCA9PT0gdCA/IDAgOiBScih0KQogICAgfQogICAgICAgICwgUHIgPSBOcgogICAgICAgICwgSXIgPSBNYXRoLm1pbgogICAgICAgICwgTHIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBQcihlKTsKICAgICAgICByZXR1cm4gdCA+IDAgPyBJcih0LCA5MDA3MTk5MjU0NzQwOTkxKSA6IDAKICAgIH0KICAgICAgICAsIHpyID0gTHIKICAgICAgICAsIEdyID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB6cihlLmxlbmd0aCkKICAgIH0KICAgICAgICAsIEhyID0gVHlwZUVycm9yCiAgICAgICAgLCBGciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoZSA+IDkwMDcxOTkyNTQ3NDA5OTEpCiAgICAgICAgICAgIHRocm93IEhyKCJNYXhpbXVtIGFsbG93ZWQgaW5kZXggZXhjZWVkZWQiKTsKICAgICAgICByZXR1cm4gZQogICAgfQogICAgICAgICwgVXIgPSBUCiAgICAgICAgLCBZciA9IFF0CiAgICAgICAgLCBKciA9IHoKICAgICAgICAsIFdyID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIFVyID8gWXIuZihlLCB0LCBKcigwLCByKSkgOiBlW3RdID0gcgogICAgfQogICAgICAgICwgWHIgPSB7fTsKICAgIFhyW2Z0KCJ0b1N0cmluZ1RhZyIpXSA9ICJ6IjsKICAgIHZhciBLciA9ICJbb2JqZWN0IHpdIiA9PT0gU3RyaW5nKFhyKQogICAgICAgICwgcXIgPSBLcgogICAgICAgICwgWnIgPSBDCiAgICAgICAgLCBWciA9IF8KICAgICAgICAsIFFyID0gZnQoInRvU3RyaW5nVGFnIikKICAgICAgICAsICRyID0gT2JqZWN0CiAgICAgICAgLCBlbiA9ICJBcmd1bWVudHMiID09PSBWcihmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gYXJndW1lbnRzCiAgICB9KCkpCiAgICAgICAgLCB0biA9IHFyID8gVnIgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQsIHIsIG47CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSA/ICJVbmRlZmluZWQiIDogbnVsbCA9PT0gZSA/ICJOdWxsIiA6ICJzdHJpbmciID09IHR5cGVvZiAociA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBlW3RdCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfSh0ID0gJHIoZSksIFFyKSkgPyByIDogZW4gPyBWcih0KSA6ICJPYmplY3QiID09PSAobiA9IFZyKHQpKSAmJiBacih0LmNhbGxlZSkgPyAiQXJndW1lbnRzIiA6IG4KICAgIH0KICAgICAgICAsIHJuID0gawogICAgICAgICwgbm4gPSBDCiAgICAgICAgLCBhbiA9IExlLmV4cG9ydHMKICAgICAgICAsIG9uID0gcm4oRnVuY3Rpb24udG9TdHJpbmcpOwogICAgbm4oYW4uaW5zcGVjdFNvdXJjZSkgfHwgKGFuLmluc3BlY3RTb3VyY2UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBvbihlKQogICAgICAgIH0KICAgICk7CiAgICB2YXIgc24gPSBhbi5pbnNwZWN0U291cmNlCiAgICAgICAgLCBjbiA9IGsKICAgICAgICAsIHVuID0gYwogICAgICAgICwgbG4gPSBDCiAgICAgICAgLCBobiA9IHRuCiAgICAgICAgLCBmbiA9IHNuCiAgICAgICAgLCBnbiA9IGZ1bmN0aW9uKCkge30KICAgICAgICAsIHBuID0gb2UoIlJlZmxlY3QiLCAiY29uc3RydWN0IikKICAgICAgICAsIHZuID0gL15ccyooPzpjbGFzc3xmdW5jdGlvbilcYi8KICAgICAgICAsIGJuID0gY24odm4uZXhlYykKICAgICAgICAsIGRuID0gIXZuLnRlc3QoZ24pCiAgICAgICAgLCBrbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIWxuKGUpKQogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHBuKGduLCBbXSwgZSksCiAgICAgICAgICAgICAgICAhMAogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgfQogICAgfQogICAgICAgICwgeW4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFsbihlKSkKICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgIHN3aXRjaCAoaG4oZSkpIHsKICAgICAgICAgICAgY2FzZSAiQXN5bmNGdW5jdGlvbiI6CiAgICAgICAgICAgIGNhc2UgIkdlbmVyYXRvckZ1bmN0aW9uIjoKICAgICAgICAgICAgY2FzZSAiQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiI6CiAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIGRuIHx8ICEhYm4odm4sIGZuKGUpKQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgfQogICAgfTsKICAgIHluLnNoYW0gPSAhMDsKICAgIHZhciBtbiA9ICFwbiB8fCB1bigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlOwogICAgICAgICAgICByZXR1cm4ga24oa24uY2FsbCkgfHwgIWtuKE9iamVjdCkgfHwgIWtuKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBlID0gITAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSkgfHwgZQogICAgICAgIH0KICAgICkpID8geW4gOiBrbgogICAgICAgICwgd24gPSBCcgogICAgICAgICwgX24gPSBtbgogICAgICAgICwgeG4gPSAkCiAgICAgICAgLCBTbiA9IGZ0KCJzcGVjaWVzIikKICAgICAgICAsIEVuID0gQXJyYXkKICAgICAgICAsIEFuID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0OwogICAgICAgIHJldHVybiB3bihlKSAmJiAodCA9IGUuY29uc3RydWN0b3IsCiAgICAgICAgKF9uKHQpICYmICh0ID09PSBFbiB8fCB3bih0LnByb3RvdHlwZSkpIHx8IHhuKHQpICYmIG51bGwgPT09ICh0ID0gdFtTbl0pKSAmJiAodCA9IHZvaWQgMCkpLAogICAgICAgICAgICB2b2lkIDAgPT09IHQgPyBFbiA6IHQKICAgIH0KICAgICAgICAsIENuID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiBuZXcgKEFuKGUpKSgwID09PSB0ID8gMCA6IHQpCiAgICB9CiAgICAgICAgLCBPbiA9IGMKICAgICAgICAsIFRuID0gcGUKICAgICAgICAsIERuID0gZnQoInNwZWNpZXMiKQogICAgICAgICwgQm4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIFRuID49IDUxIHx8ICFPbigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IFtdOwogICAgICAgICAgICAgICAgcmV0dXJuICh0LmNvbnN0cnVjdG9yID0ge30pW0RuXSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvbzogMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAxICE9PSB0W2VdKEJvb2xlYW4pLmZvbwogICAgICAgICAgICB9CiAgICAgICAgKSkKICAgIH0KICAgICAgICAsIGpuID0gVHIKICAgICAgICAsIE1uID0gYwogICAgICAgICwgUm4gPSBCcgogICAgICAgICwgTm4gPSAkCiAgICAgICAgLCBQbiA9IHFlCiAgICAgICAgLCBJbiA9IEdyCiAgICAgICAgLCBMbiA9IEZyCiAgICAgICAgLCB6biA9IFdyCiAgICAgICAgLCBHbiA9IENuCiAgICAgICAgLCBIbiA9IEJuCiAgICAgICAgLCBGbiA9IHBlCiAgICAgICAgLCBVbiA9IGZ0KCJpc0NvbmNhdFNwcmVhZGFibGUiKQogICAgICAgICwgWW4gPSBGbiA+PSA1MSB8fCAhTW4oKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IFtdOwogICAgICAgICAgICByZXR1cm4gZVtVbl0gPSAhMSwKICAgICAgICAgICAgZS5jb25jYXQoKVswXSAhPT0gZQogICAgICAgIH0KICAgICkpCiAgICAgICAgLCBKbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIU5uKGUpKQogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgdmFyIHQgPSBlW1VuXTsKICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ID8gISF0IDogUm4oZSkKICAgIH07CiAgICBqbih7CiAgICAgICAgdGFyZ2V0OiAiQXJyYXkiLAogICAgICAgIHByb3RvOiAhMCwKICAgICAgICBhcml0eTogMSwKICAgICAgICBmb3JjZWQ6ICFZbiB8fCAhSG4oImNvbmNhdCIpCiAgICB9LCB7CiAgICAgICAgY29uY2F0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0LCByLCBuLCBhLCBvLCBzID0gUG4odGhpcyksIGMgPSBHbihzLCAwKSwgaSA9IDA7CiAgICAgICAgICAgIGZvciAodCA9IC0xLAogICAgICAgICAgICAgICAgICAgICBuID0gYXJndW1lbnRzLmxlbmd0aDsgdCA8IG47IHQrKykKICAgICAgICAgICAgICAgIGlmIChKbihvID0gLTEgPT09IHQgPyBzIDogYXJndW1lbnRzW3RdKSkKICAgICAgICAgICAgICAgICAgICBmb3IgKGEgPSBJbihvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMbihpICsgYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDA7IHIgPCBhOyByKyssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrKQogICAgICAgICAgICAgICAgICAgICAgICByIGluIG8gJiYgem4oYywgaSwgb1tyXSk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgTG4oaSArIDEpLAogICAgICAgICAgICAgICAgICAgICAgICB6bihjLCBpKyssIG8pOwogICAgICAgICAgICByZXR1cm4gYy5sZW5ndGggPSBpLAogICAgICAgICAgICAgICAgYwogICAgICAgIH0KICAgIH0pOwogICAgdmFyIFduID0gdG4KICAgICAgICAsIFhuID0gU3RyaW5nCiAgICAgICAgLCBLbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIlN5bWJvbCIgPT09IFduKGUpKQogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY29udmVydCBhIFN5bWJvbCB2YWx1ZSB0byBhIHN0cmluZyIpOwogICAgICAgIHJldHVybiBYbihlKQogICAgfQogICAgICAgICwgcW4gPSB7fQogICAgICAgICwgWm4gPSBOcgogICAgICAgICwgVm4gPSBNYXRoLm1heAogICAgICAgICwgUW4gPSBNYXRoLm1pbgogICAgICAgICwgJG4gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIgPSBabihlKTsKICAgICAgICByZXR1cm4gciA8IDAgPyBWbihyICsgdCwgMCkgOiBRbihyLCB0KQogICAgfQogICAgICAgICwgZWEgPSBWCiAgICAgICAgLCB0YSA9ICRuCiAgICAgICAgLCByYSA9IEdyCiAgICAgICAgLCBuYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgciwgbikgewogICAgICAgICAgICB2YXIgYSA9IGVhKHQpCiAgICAgICAgICAgICAgICAsIG8gPSByYShhKTsKICAgICAgICAgICAgaWYgKDAgPT09IG8pCiAgICAgICAgICAgICAgICByZXR1cm4gIWUgJiYgLTE7CiAgICAgICAgICAgIHZhciBzLCBjID0gdGEobiwgbyk7CiAgICAgICAgICAgIGlmIChlICYmIHIgIT0gcikgewogICAgICAgICAgICAgICAgZm9yICg7IG8gPiBjOyApCiAgICAgICAgICAgICAgICAgICAgaWYgKChzID0gYVtjKytdKSAhPSBzKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICBmb3IgKDsgbyA+IGM7IGMrKykKICAgICAgICAgICAgICAgICAgICBpZiAoKGUgfHwgYyBpbiBhKSAmJiBhW2NdID09PSByKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSB8fCBjIHx8IDA7CiAgICAgICAgICAgIHJldHVybiAhZSAmJiAtMQogICAgICAgIH0KICAgIH0KICAgICAgICAsIGFhID0gewogICAgICAgIGluY2x1ZGVzOiBuYSghMCksCiAgICAgICAgaW5kZXhPZjogbmEoITEpCiAgICB9CiAgICAgICAgLCBvYSA9IHt9CiAgICAgICAgLCBzYSA9IFFlCiAgICAgICAgLCBjYSA9IFYKICAgICAgICAsIGlhID0gYWEuaW5kZXhPZgogICAgICAgICwgdWEgPSBvYQogICAgICAgICwgbGEgPSBrKFtdLnB1c2gpCiAgICAgICAgLCBoYSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciwgbiA9IGNhKGUpLCBhID0gMCwgbyA9IFtdOwogICAgICAgIGZvciAociBpbiBuKQogICAgICAgICAgICAhc2EodWEsIHIpICYmIHNhKG4sIHIpICYmIGxhKG8sIHIpOwogICAgICAgIGZvciAoOyB0Lmxlbmd0aCA+IGE7ICkKICAgICAgICAgICAgc2EobiwgciA9IHRbYSsrXSkgJiYgKH5pYShvLCByKSB8fCBsYShvLCByKSk7CiAgICAgICAgcmV0dXJuIG8KICAgIH0KICAgICAgICAsIGZhID0gWyJjb25zdHJ1Y3RvciIsICJoYXNPd25Qcm9wZXJ0eSIsICJpc1Byb3RvdHlwZU9mIiwgInByb3BlcnR5SXNFbnVtZXJhYmxlIiwgInRvTG9jYWxlU3RyaW5nIiwgInRvU3RyaW5nIiwgInZhbHVlT2YiXQogICAgICAgICwgZ2EgPSBoYQogICAgICAgICwgcGEgPSBmYQogICAgICAgICwgdmEgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGdhKGUsIHBhKQogICAgfQogICAgICAgICwgYmEgPSBUCiAgICAgICAgLCBkYSA9ICR0CiAgICAgICAgLCBrYSA9IFF0CiAgICAgICAgLCB5YSA9IG5yCiAgICAgICAgLCBtYSA9IFYKICAgICAgICAsIHdhID0gdmE7CiAgICBxbi5mID0gYmEgJiYgIWRhID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgeWEoZSk7CiAgICAgICAgZm9yICh2YXIgciwgbiA9IG1hKHQpLCBhID0gd2EodCksIG8gPSBhLmxlbmd0aCwgcyA9IDA7IG8gPiBzOyApCiAgICAgICAgICAgIGthLmYoZSwgciA9IGFbcysrXSwgbltyXSk7CiAgICAgICAgcmV0dXJuIGUKICAgIH0KICAgIDsKICAgIHZhciBfYSwgeGEgPSBvZSgiZG9jdW1lbnQiLCAiZG9jdW1lbnRFbGVtZW50IiksIFNhID0gbnQsIEVhID0gV2UoImtleXMiKSwgQWEgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIEVhW2VdIHx8IChFYVtlXSA9IFNhKGUpKQogICAgfSwgQ2EgPSBuciwgT2EgPSBxbiwgVGEgPSBmYSwgRGEgPSBvYSwgQmEgPSB4YSwgamEgPSBDdCwgTWEgPSAicHJvdG90eXBlIiwgUmEgPSAic2NyaXB0IiwgTmEgPSBBYSgiSUVfUFJPVE8iKSwgUGEgPSBmdW5jdGlvbigpIHt9LCBJYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gIjwiICsgUmEgKyAiPiIgKyBlICsgIjwvIiArIFJhICsgIj4iCiAgICB9LCBMYSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBlLndyaXRlKElhKCIiKSksCiAgICAgICAgICAgIGUuY2xvc2UoKTsKICAgICAgICB2YXIgdCA9IGUucGFyZW50V2luZG93Lk9iamVjdDsKICAgICAgICByZXR1cm4gZSA9IG51bGwsCiAgICAgICAgICAgIHQKICAgIH0sIHphID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgX2EgPSBuZXcgQWN0aXZlWE9iamVjdCgiaHRtbGZpbGUiKQogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgdmFyIGUsIHQsIHI7CiAgICAgICAgemEgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudC5kb21haW4gJiYgX2EgPyBMYShfYSkgOiAodCA9IGphKCJpZnJhbWUiKSwKICAgICAgICAgICAgciA9ICJqYXZhIiArIFJhICsgIjoiLAogICAgICAgICAgICB0LnN0eWxlLmRpc3BsYXkgPSAibm9uZSIsCiAgICAgICAgICAgIEJhLmFwcGVuZENoaWxkKHQpLAogICAgICAgICAgICB0LnNyYyA9IFN0cmluZyhyKSwKICAgICAgICAgICAgKGUgPSB0LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpLm9wZW4oKSwKICAgICAgICAgICAgZS53cml0ZShJYSgiZG9jdW1lbnQuRj1PYmplY3QiKSksCiAgICAgICAgICAgIGUuY2xvc2UoKSwKICAgICAgICAgICAgZS5GKSA6IExhKF9hKTsKICAgICAgICBmb3IgKHZhciBuID0gVGEubGVuZ3RoOyBuLS07ICkKICAgICAgICAgICAgZGVsZXRlIHphW01hXVtUYVtuXV07CiAgICAgICAgcmV0dXJuIHphKCkKICAgIH07CiAgICBEYVtOYV0gPSAhMDsKICAgIHZhciBHYSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByOwogICAgICAgIHJldHVybiBudWxsICE9PSBlID8gKFBhW01hXSA9IENhKGUpLAogICAgICAgICAgICByID0gbmV3IFBhLAogICAgICAgICAgICBQYVtNYV0gPSBudWxsLAogICAgICAgICAgICByW05hXSA9IGUpIDogciA9IHphKCksCiAgICAgICAgICAgIHZvaWQgMCA9PT0gdCA/IHIgOiBPYS5mKHIsIHQpCiAgICB9CiAgICAgICAgLCBIYSA9IHt9CiAgICAgICAgLCBGYSA9IGhhCiAgICAgICAgLCBVYSA9IGZhLmNvbmNhdCgibGVuZ3RoIiwgInByb3RvdHlwZSIpOwogICAgSGEuZiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzIHx8IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gRmEoZSwgVWEpCiAgICB9CiAgICA7CiAgICB2YXIgWWEgPSB7fQogICAgICAgICwgSmEgPSBrKFtdLnNsaWNlKQogICAgICAgICwgV2EgPSBfCiAgICAgICAgLCBYYSA9IFYKICAgICAgICAsIEthID0gSGEuZgogICAgICAgICwgcWEgPSBKYQogICAgICAgICwgWmEgPSAib2JqZWN0IiA9PSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdyAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHdpbmRvdykgOiBbXTsKICAgIFlhLmYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIFphICYmICJXaW5kb3ciID09PSBXYShlKSA/IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJldHVybiBLYShlKQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcWEoWmEpCiAgICAgICAgICAgIH0KICAgICAgICB9KGUpIDogS2EoWGEoZSkpCiAgICB9CiAgICA7CiAgICB2YXIgVmEgPSB7fTsKICAgIFZhLmYgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzOwogICAgdmFyIFFhID0gZHIKICAgICAgICAsICRhID0gZnVuY3Rpb24oZSwgdCwgciwgbikgewogICAgICAgIHJldHVybiBuICYmIG4uZW51bWVyYWJsZSA/IGVbdF0gPSByIDogUWEoZSwgdCwgciksCiAgICAgICAgICAgIGUKICAgIH0KICAgICAgICAsIGVvID0gUXQKICAgICAgICAsIHRvID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHJldHVybiBlby5mKGUsIHQsIHIpCiAgICB9CiAgICAgICAgLCBybyA9IHt9CiAgICAgICAgLCBubyA9IGZ0OwogICAgcm8uZiA9IG5vOwogICAgdmFyIGFvLCBvbywgc28sIGNvID0gZWUsIGlvID0gUWUsIHVvID0gcm8sIGxvID0gUXQuZiwgaG8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBjby5TeW1ib2wgfHwgKGNvLlN5bWJvbCA9IHt9KTsKICAgICAgICBpbyh0LCBlKSB8fCBsbyh0LCBlLCB7CiAgICAgICAgICAgIHZhbHVlOiB1by5mKGUpCiAgICAgICAgfSkKICAgIH0sIGZvID0gaiwgZ28gPSBvZSwgcG8gPSBmdCwgdm8gPSAkYSwgYm8gPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgZSA9IGdvKCJTeW1ib2wiKQogICAgICAgICAgICAsIHQgPSBlICYmIGUucHJvdG90eXBlCiAgICAgICAgICAgICwgciA9IHQgJiYgdC52YWx1ZU9mCiAgICAgICAgICAgICwgbiA9IHBvKCJ0b1ByaW1pdGl2ZSIpOwogICAgICAgIHQgJiYgIXRbbl0gJiYgdm8odCwgbiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmbyhyLCB0aGlzKQogICAgICAgICAgICB9CiAgICAgICAgKSwgewogICAgICAgICAgICBhcml0eTogMQogICAgICAgIH0pCiAgICB9LCBrbyA9IHRuLCB5byA9IEtyID8ge30udG9TdHJpbmcgOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gIltvYmplY3QgIiArIGtvKHRoaXMpICsgIl0iCiAgICB9CiAgICAgICAgLCBtbyA9IEtyLCB3byA9IFF0LmYsIF9vID0gZHIsIHhvID0gUWUsIFNvID0geW8sIEVvID0gZnQoInRvU3RyaW5nVGFnIiksIEFvID0gZnVuY3Rpb24oZSwgdCwgciwgbikgewogICAgICAgIHZhciBhID0gciA/IGUgOiBlICYmIGUucHJvdG90eXBlOwogICAgICAgIGEgJiYgKHhvKGEsIEVvKSB8fCB3byhhLCBFbywgewogICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICB2YWx1ZTogdAogICAgICAgIH0pLAogICAgICAgIG4gJiYgIW1vICYmIF9vKGEsICJ0b1N0cmluZyIsIFNvKSkKICAgIH0sIENvID0gQywgT28gPSBzLldlYWtNYXAsIFRvID0gQ28oT28pICYmIC9uYXRpdmUgY29kZS8udGVzdChTdHJpbmcoT28pKSwgRG8gPSBUbywgQm8gPSBzLCBqbyA9ICQsIE1vID0gZHIsIFJvID0gUWUsIE5vID0gTGUuZXhwb3J0cywgUG8gPSBBYSwgSW8gPSBvYSwgTG8gPSAiT2JqZWN0IGFscmVhZHkgaW5pdGlhbGl6ZWQiLCB6byA9IEJvLlR5cGVFcnJvciwgR28gPSBCby5XZWFrTWFwOwogICAgaWYgKERvIHx8IE5vLnN0YXRlKSB7CiAgICAgICAgdmFyIEhvID0gTm8uc3RhdGUgfHwgKE5vLnN0YXRlID0gbmV3IEdvKTsKICAgICAgICBIby5nZXQgPSBIby5nZXQsCiAgICAgICAgICAgIEhvLmhhcyA9IEhvLmhhcywKICAgICAgICAgICAgSG8uc2V0ID0gSG8uc2V0LAogICAgICAgICAgICBhbyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIGlmIChIby5oYXMoZSkpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IHpvKExvKTsKICAgICAgICAgICAgICAgIHJldHVybiB0LmZhY2FkZSA9IGUsCiAgICAgICAgICAgICAgICAgICAgSG8uc2V0KGUsIHQpLAogICAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgIG9vID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIEhvLmdldChlKSB8fCB7fQogICAgICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgc28gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gSG8uaGFzKGUpCiAgICAgICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIEZvID0gUG8oInN0YXRlIik7CiAgICAgICAgSW9bRm9dID0gITAsCiAgICAgICAgICAgIGFvID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgaWYgKFJvKGUsIEZvKSkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgem8oTG8pOwogICAgICAgICAgICAgICAgcmV0dXJuIHQuZmFjYWRlID0gZSwKICAgICAgICAgICAgICAgICAgICBNbyhlLCBGbywgdCksCiAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgb28gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUm8oZSwgRm8pID8gZVtGb10gOiB7fQogICAgICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgc28gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUm8oZSwgRm8pCiAgICAgICAgICAgIH0KICAgIH0KICAgIHZhciBVbyA9IHsKICAgICAgICBzZXQ6IGFvLAogICAgICAgIGdldDogb28sCiAgICAgICAgaGFzOiBzbywKICAgICAgICBlbmZvcmNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBzbyhlKSA/IG9vKGUpIDogYW8oZSwge30pCiAgICAgICAgfSwKICAgICAgICBnZXR0ZXJGb3I6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgaWYgKCFqbyh0KSB8fCAociA9IG9vKHQpKS50eXBlICE9PSBlKQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyB6bygiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCAiICsgZSArICIgcmVxdWlyZWQiKTsKICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAgICAgLCBZbyA9IFZ0CiAgICAgICAgLCBKbyA9IFkKICAgICAgICAsIFdvID0gcWUKICAgICAgICAsIFhvID0gR3IKICAgICAgICAsIEtvID0gQ24KICAgICAgICAsIHFvID0gayhbXS5wdXNoKQogICAgICAgICwgWm8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSAxID09PSBlCiAgICAgICAgICAgICwgciA9IDIgPT09IGUKICAgICAgICAgICAgLCBuID0gMyA9PT0gZQogICAgICAgICAgICAsIGEgPSA0ID09PSBlCiAgICAgICAgICAgICwgbyA9IDYgPT09IGUKICAgICAgICAgICAgLCBzID0gNyA9PT0gZQogICAgICAgICAgICAsIGMgPSA1ID09PSBlIHx8IG87CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGksIHUsIGwsIGgpIHsKICAgICAgICAgICAgZm9yICh2YXIgZiwgZywgcCA9IFdvKGkpLCB2ID0gSm8ocCksIGIgPSBYbyh2KSwgZCA9IFlvKHUsIGwpLCBrID0gMCwgeSA9IGggfHwgS28sIG0gPSB0ID8geShpLCBiKSA6IHIgfHwgcyA/IHkoaSwgMCkgOiB2b2lkIDA7IGIgPiBrOyBrKyspCiAgICAgICAgICAgICAgICBpZiAoKGMgfHwgayBpbiB2KSAmJiAoZyA9IGQoZiA9IHZba10sIGssIHApLAogICAgICAgICAgICAgICAgICAgIGUpKQogICAgICAgICAgICAgICAgICAgIGlmICh0KQogICAgICAgICAgICAgICAgICAgICAgICBtW2tdID0gZzsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChnKQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcW8obSwgZikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHFvKG0sIGYpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG8gPyAtMSA6IG4gfHwgYSA/IGEgOiBtCiAgICAgICAgfQogICAgfQogICAgICAgICwgVm8gPSB7CiAgICAgICAgZm9yRWFjaDogWm8oMCksCiAgICAgICAgbWFwOiBabygxKSwKICAgICAgICBmaWx0ZXI6IFpvKDIpLAogICAgICAgIHNvbWU6IFpvKDMpLAogICAgICAgIGV2ZXJ5OiBabyg0KSwKICAgICAgICBmaW5kOiBabyg1KSwKICAgICAgICBmaW5kSW5kZXg6IFpvKDYpLAogICAgICAgIGZpbHRlclJlamVjdDogWm8oNykKICAgIH0KICAgICAgICAsIFFvID0gVHIKICAgICAgICAsICRvID0gcwogICAgICAgICwgZXMgPSBqCiAgICAgICAgLCB0cyA9IGsKICAgICAgICAsIHJzID0gVAogICAgICAgICwgbnMgPSBrZQogICAgICAgICwgYXMgPSBjCiAgICAgICAgLCBvcyA9IFFlCiAgICAgICAgLCBzcyA9IHNlCiAgICAgICAgLCBjcyA9IG5yCiAgICAgICAgLCBpcyA9IFYKICAgICAgICAsIHVzID0geHQKICAgICAgICAsIGxzID0gS24KICAgICAgICAsIGhzID0gegogICAgICAgICwgZnMgPSBHYQogICAgICAgICwgZ3MgPSB2YQogICAgICAgICwgcHMgPSBIYQogICAgICAgICwgdnMgPSBZYQogICAgICAgICwgYnMgPSBWYQogICAgICAgICwgZHMgPSBPCiAgICAgICAgLCBrcyA9IFF0CiAgICAgICAgLCB5cyA9IHFuCiAgICAgICAgLCBtcyA9IE0KICAgICAgICAsIHdzID0gJGEKICAgICAgICAsIF9zID0gdG8KICAgICAgICAsIHhzID0gV2UKICAgICAgICAsIFNzID0gb2EKICAgICAgICAsIEVzID0gbnQKICAgICAgICAsIEFzID0gZnQKICAgICAgICAsIENzID0gcm8KICAgICAgICAsIE9zID0gaG8KICAgICAgICAsIFRzID0gYm8KICAgICAgICAsIERzID0gQW8KICAgICAgICAsIEJzID0gVW8KICAgICAgICAsIGpzID0gVm8uZm9yRWFjaAogICAgICAgICwgTXMgPSBBYSgiaGlkZGVuIikKICAgICAgICAsIFJzID0gIlN5bWJvbCIKICAgICAgICAsIE5zID0gInByb3RvdHlwZSIKICAgICAgICAsIFBzID0gQnMuc2V0CiAgICAgICAgLCBJcyA9IEJzLmdldHRlckZvcihScykKICAgICAgICAsIExzID0gT2JqZWN0W05zXQogICAgICAgICwgenMgPSAkby5TeW1ib2wKICAgICAgICAsIEdzID0genMgJiYgenNbTnNdCiAgICAgICAgLCBIcyA9ICRvLlJhbmdlRXJyb3IKICAgICAgICAsIEZzID0gJG8uVHlwZUVycm9yCiAgICAgICAgLCBVcyA9ICRvLlFPYmplY3QKICAgICAgICAsIFlzID0gZHMuZgogICAgICAgICwgSnMgPSBrcy5mCiAgICAgICAgLCBXcyA9IHZzLmYKICAgICAgICAsIFhzID0gbXMuZgogICAgICAgICwgS3MgPSB0cyhbXS5wdXNoKQogICAgICAgICwgcXMgPSB4cygic3ltYm9scyIpCiAgICAgICAgLCBacyA9IHhzKCJvcC1zeW1ib2xzIikKICAgICAgICAsIFZzID0geHMoIndrcyIpCiAgICAgICAgLCBRcyA9ICFVcyB8fCAhVXNbTnNdIHx8ICFVc1tOc10uZmluZENoaWxkCiAgICAgICAgLCAkcyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiA9IFlzKExzLCB0KTsKICAgICAgICBuICYmIGRlbGV0ZSBMc1t0XSwKICAgICAgICAgICAgSnMoZSwgdCwgciksCiAgICAgICAgbiAmJiBlICE9PSBMcyAmJiBKcyhMcywgdCwgbikKICAgIH0KICAgICAgICAsIGVjID0gcnMgJiYgYXMoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gNyAhPT0gZnMoSnMoe30sICJhIiwgewogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gSnModGhpcywgImEiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiA3CiAgICAgICAgICAgICAgICAgICAgfSkuYQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSkuYQogICAgICAgIH0KICAgICkpID8gJHMgOiBKcwogICAgICAgICwgdGMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIgPSBxc1tlXSA9IGZzKEdzKTsKICAgICAgICByZXR1cm4gUHMociwgewogICAgICAgICAgICB0eXBlOiBScywKICAgICAgICAgICAgdGFnOiBlLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogdAogICAgICAgIH0pLAogICAgICAgIHJzIHx8IChyLmRlc2NyaXB0aW9uID0gdCksCiAgICAgICAgICAgIHIKICAgIH0KICAgICAgICAsIHJjID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIGUgPT09IExzICYmIHJjKFpzLCB0LCByKSwKICAgICAgICAgICAgY3MoZSk7CiAgICAgICAgdmFyIG4gPSB1cyh0KTsKICAgICAgICByZXR1cm4gY3MociksCiAgICAgICAgICAgIG9zKHFzLCBuKSA/IChyLmVudW1lcmFibGUgPyAob3MoZSwgTXMpICYmIGVbTXNdW25dICYmIChlW01zXVtuXSA9ICExKSwKICAgICAgICAgICAgICAgIHIgPSBmcyhyLCB7CiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogaHMoMCwgITEpCiAgICAgICAgICAgICAgICB9KSkgOiAob3MoZSwgTXMpIHx8IEpzKGUsIE1zLCBocygxLCBmcyhudWxsKSkpLAogICAgICAgICAgICAgICAgZVtNc11bbl0gPSAhMCksCiAgICAgICAgICAgICAgICBlYyhlLCBuLCByKSkgOiBKcyhlLCBuLCByKQogICAgfQogICAgICAgICwgbmMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgY3MoZSk7CiAgICAgICAgdmFyIHIgPSBpcyh0KQogICAgICAgICAgICAsIG4gPSBncyhyKS5jb25jYXQoY2MocikpOwogICAgICAgIHJldHVybiBqcyhuLCAoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcnMgJiYgIWVzKGFjLCByLCB0KSB8fCByYyhlLCB0LCByW3RdKQogICAgICAgICAgICB9CiAgICAgICAgKSksCiAgICAgICAgICAgIGUKICAgIH0KICAgICAgICAsIGFjID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gdXMoZSkKICAgICAgICAgICAgLCByID0gZXMoWHMsIHRoaXMsIHQpOwogICAgICAgIHJldHVybiAhKHRoaXMgPT09IExzICYmIG9zKHFzLCB0KSAmJiAhb3MoWnMsIHQpKSAmJiAoIShyIHx8ICFvcyh0aGlzLCB0KSB8fCAhb3MocXMsIHQpIHx8IG9zKHRoaXMsIE1zKSAmJiB0aGlzW01zXVt0XSkgfHwgcikKICAgIH0KICAgICAgICAsIG9jID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByID0gaXMoZSkKICAgICAgICAgICAgLCBuID0gdXModCk7CiAgICAgICAgaWYgKHIgIT09IExzIHx8ICFvcyhxcywgbikgfHwgb3MoWnMsIG4pKSB7CiAgICAgICAgICAgIHZhciBhID0gWXMociwgbik7CiAgICAgICAgICAgIHJldHVybiAhYSB8fCAhb3MocXMsIG4pIHx8IG9zKHIsIE1zKSAmJiByW01zXVtuXSB8fCAoYS5lbnVtZXJhYmxlID0gITApLAogICAgICAgICAgICAgICAgYQogICAgICAgIH0KICAgIH0KICAgICAgICAsIHNjID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gV3MoaXMoZSkpCiAgICAgICAgICAgICwgciA9IFtdOwogICAgICAgIHJldHVybiBqcyh0LCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgb3MocXMsIGUpIHx8IG9zKFNzLCBlKSB8fCBLcyhyLCBlKQogICAgICAgICAgICB9CiAgICAgICAgKSksCiAgICAgICAgICAgIHIKICAgIH0KICAgICAgICAsIGNjID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZSA9PT0gTHMKICAgICAgICAgICAgLCByID0gV3ModCA/IFpzIDogaXMoZSkpCiAgICAgICAgICAgICwgbiA9IFtdOwogICAgICAgIHJldHVybiBqcyhyLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgIW9zKHFzLCBlKSB8fCB0ICYmICFvcyhMcywgZSkgfHwgS3MobiwgcXNbZV0pCiAgICAgICAgICAgIH0KICAgICAgICApKSwKICAgICAgICAgICAgbgogICAgfTsKICAgIG5zIHx8ICh6cyA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmIChzcyhHcywgdGhpcykpCiAgICAgICAgICAgIHRocm93IG5ldyBGcygiU3ltYm9sIGlzIG5vdCBhIGNvbnN0cnVjdG9yIik7CiAgICAgICAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gbHMoYXJndW1lbnRzWzBdKSA6IHZvaWQgMAogICAgICAgICAgICAsIHQgPSBFcyhlKQogICAgICAgICAgICAsIHIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBuID0gdm9pZCAwID09PSB0aGlzID8gJG8gOiB0aGlzOwogICAgICAgICAgICBuID09PSBMcyAmJiBlcyhyLCBacywgZSksCiAgICAgICAgICAgIG9zKG4sIE1zKSAmJiBvcyhuW01zXSwgdCkgJiYgKG5bTXNdW3RdID0gITEpOwogICAgICAgICAgICB2YXIgYSA9IGhzKDEsIGUpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZWMobiwgdCwgYSkKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIEhzKSkKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgJHMobiwgdCwgYSkKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgcmV0dXJuIHJzICYmIFFzICYmIGVjKExzLCB0LCB7CiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgICAgIHNldDogcgogICAgICAgIH0pLAogICAgICAgICAgICB0Yyh0LCBlKQogICAgfQogICAgICAgICwKICAgICAgICB3cyhHcyA9IHpzW05zXSwgInRvU3RyaW5nIiwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIElzKHRoaXMpLnRhZwogICAgICAgICAgICB9CiAgICAgICAgKSksCiAgICAgICAgd3MoenMsICJ3aXRob3V0U2V0dGVyIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0YyhFcyhlKSwgZSkKICAgICAgICAgICAgfQogICAgICAgICkpLAogICAgICAgIG1zLmYgPSBhYywKICAgICAgICBrcy5mID0gcmMsCiAgICAgICAgeXMuZiA9IG5jLAogICAgICAgIGRzLmYgPSBvYywKICAgICAgICBwcy5mID0gdnMuZiA9IHNjLAogICAgICAgIGJzLmYgPSBjYywKICAgICAgICBDcy5mID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gdGMoQXMoZSksIGUpCiAgICAgICAgfQogICAgICAgICwKICAgIHJzICYmIF9zKEdzLCAiZGVzY3JpcHRpb24iLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gSXModGhpcykuZGVzY3JpcHRpb24KICAgICAgICB9CiAgICB9KSksCiAgICAgICAgUW8oewogICAgICAgICAgICBnbG9iYWw6ICEwLAogICAgICAgICAgICBjb25zdHJ1Y3RvcjogITAsCiAgICAgICAgICAgIHdyYXA6ICEwLAogICAgICAgICAgICBmb3JjZWQ6ICFucywKICAgICAgICAgICAgc2hhbTogIW5zCiAgICAgICAgfSwgewogICAgICAgICAgICBTeW1ib2w6IHpzCiAgICAgICAgfSksCiAgICAgICAganMoZ3MoVnMpLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgT3MoZSkKICAgICAgICAgICAgfQogICAgICAgICkpLAogICAgICAgIFFvKHsKICAgICAgICAgICAgdGFyZ2V0OiBScywKICAgICAgICAgICAgc3RhdDogITAsCiAgICAgICAgICAgIGZvcmNlZDogIW5zCiAgICAgICAgfSwgewogICAgICAgICAgICB1c2VTZXR0ZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgUXMgPSAhMAogICAgICAgICAgICB9LAogICAgICAgICAgICB1c2VTaW1wbGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgUXMgPSAhMQogICAgICAgICAgICB9CiAgICAgICAgfSksCiAgICAgICAgUW8oewogICAgICAgICAgICB0YXJnZXQ6ICJPYmplY3QiLAogICAgICAgICAgICBzdGF0OiAhMCwKICAgICAgICAgICAgZm9yY2VkOiAhbnMsCiAgICAgICAgICAgIHNoYW06ICFycwogICAgICAgIH0sIHsKICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZnMoZSkgOiBuYyhmcyhlKSwgdCkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVmaW5lUHJvcGVydHk6IHJjLAogICAgICAgICAgICBkZWZpbmVQcm9wZXJ0aWVzOiBuYywKICAgICAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiBvYwogICAgICAgIH0pLAogICAgICAgIFFvKHsKICAgICAgICAgICAgdGFyZ2V0OiAiT2JqZWN0IiwKICAgICAgICAgICAgc3RhdDogITAsCiAgICAgICAgICAgIGZvcmNlZDogIW5zCiAgICAgICAgfSwgewogICAgICAgICAgICBnZXRPd25Qcm9wZXJ0eU5hbWVzOiBzYwogICAgICAgIH0pLAogICAgICAgIFRzKCksCiAgICAgICAgRHMoenMsIFJzKSwKICAgICAgICBTc1tNc10gPSAhMDsKICAgIHZhciBpYyA9IGtlICYmICEhU3ltYm9sLmZvciAmJiAhIVN5bWJvbC5rZXlGb3IKICAgICAgICAsIHVjID0gVHIKICAgICAgICAsIGxjID0gb2UKICAgICAgICAsIGhjID0gUWUKICAgICAgICAsIGZjID0gS24KICAgICAgICAsIGdjID0gV2UKICAgICAgICAsIHBjID0gaWMKICAgICAgICAsIHZjID0gZ2MoInN0cmluZy10by1zeW1ib2wtcmVnaXN0cnkiKQogICAgICAgICwgYmMgPSBnYygic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeSIpOwogICAgdWMoewogICAgICAgIHRhcmdldDogIlN5bWJvbCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiAhcGMKICAgIH0sIHsKICAgICAgICBmb3I6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBmYyhlKTsKICAgICAgICAgICAgaWYgKGhjKHZjLCB0KSkKICAgICAgICAgICAgICAgIHJldHVybiB2Y1t0XTsKICAgICAgICAgICAgdmFyIHIgPSBsYygiU3ltYm9sIikodCk7CiAgICAgICAgICAgIHJldHVybiB2Y1t0XSA9IHIsCiAgICAgICAgICAgICAgICBiY1tyXSA9IHQsCiAgICAgICAgICAgICAgICByCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgZGMgPSBUcgogICAgICAgICwga2MgPSBRZQogICAgICAgICwgeWMgPSBTZQogICAgICAgICwgbWMgPSBBZQogICAgICAgICwgd2MgPSBpYwogICAgICAgICwgX2MgPSBXZSgic3ltYm9sLXRvLXN0cmluZy1yZWdpc3RyeSIpOwogICAgZGMoewogICAgICAgIHRhcmdldDogIlN5bWJvbCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiAhd2MKICAgIH0sIHsKICAgICAgICBrZXlGb3I6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgaWYgKCF5YyhlKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IobWMoZSkgKyAiIGlzIG5vdCBhIHN5bWJvbCIpOwogICAgICAgICAgICBpZiAoa2MoX2MsIGUpKQogICAgICAgICAgICAgICAgcmV0dXJuIF9jW2VdCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgeGMgPSBCcgogICAgICAgICwgU2MgPSBDCiAgICAgICAgLCBFYyA9IF8KICAgICAgICAsIEFjID0gS24KICAgICAgICAsIENjID0gayhbXS5wdXNoKQogICAgICAgICwgT2MgPSBUcgogICAgICAgICwgVGMgPSBvZQogICAgICAgICwgRGMgPSBnCiAgICAgICAgLCBCYyA9IGoKICAgICAgICAsIGpjID0gawogICAgICAgICwgTWMgPSBjCiAgICAgICAgLCBSYyA9IEMKICAgICAgICAsIE5jID0gU2UKICAgICAgICAsIFBjID0gSmEKICAgICAgICAsIEljID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmIChTYyhlKSkKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgaWYgKHhjKGUpKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSBlLmxlbmd0aCwgciA9IFtdLCBuID0gMDsgbiA8IHQ7IG4rKykgewogICAgICAgICAgICAgICAgdmFyIGEgPSBlW25dOwogICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mIGEgPyBDYyhyLCBhKSA6ICJudW1iZXIiICE9IHR5cGVvZiBhICYmICJOdW1iZXIiICE9PSBFYyhhKSAmJiAiU3RyaW5nIiAhPT0gRWMoYSkgfHwgQ2MociwgQWMoYSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG8gPSByLmxlbmd0aAogICAgICAgICAgICAgICAgLCBzID0gITA7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICBpZiAocykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcyA9ICExLAogICAgICAgICAgICAgICAgICAgICAgICB0OwogICAgICAgICAgICAgICAgaWYgKHhjKHRoaXMpKQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0OwogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBvOyBuKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKHJbbl0gPT09IGUpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAgICAgLCBMYyA9IGtlCiAgICAgICAgLCB6YyA9IFN0cmluZwogICAgICAgICwgR2MgPSBUYygiSlNPTiIsICJzdHJpbmdpZnkiKQogICAgICAgICwgSGMgPSBqYygvLi8uZXhlYykKICAgICAgICAsIEZjID0gamMoIiIuY2hhckF0KQogICAgICAgICwgVWMgPSBqYygiIi5jaGFyQ29kZUF0KQogICAgICAgICwgWWMgPSBqYygiIi5yZXBsYWNlKQogICAgICAgICwgSmMgPSBqYygxLi50b1N0cmluZykKICAgICAgICAsIFdjID0gL1tcdUQ4MDAtXHVERkZGXS9nCiAgICAgICAgLCBYYyA9IC9eW1x1RDgwMC1cdURCRkZdJC8KICAgICAgICAsIEtjID0gL15bXHVEQzAwLVx1REZGRl0kLwogICAgICAgICwgcWMgPSAhTGMgfHwgTWMoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IFRjKCJTeW1ib2wiKSgic3RyaW5naWZ5IGRldGVjdGlvbiIpOwogICAgICAgICAgICByZXR1cm4gIltudWxsXSIgIT09IEdjKFtlXSkgfHwgInt9IiAhPT0gR2MoewogICAgICAgICAgICAgICAgYTogZQogICAgICAgICAgICB9KSB8fCAie30iICE9PSBHYyhPYmplY3QoZSkpCiAgICAgICAgfQogICAgKSkKICAgICAgICAsIFpjID0gTWMoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gJyJcXHVkZjA2XFx1ZDgzNCInICE9PSBHYygiXHVkZjA2XHVkODM0IikgfHwgJyJcXHVkZWFkIicgIT09IEdjKCJcdWRlYWQiKQogICAgICAgIH0KICAgICkpCiAgICAgICAgLCBWYyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciA9IFBjKGFyZ3VtZW50cykKICAgICAgICAgICAgLCBuID0gSWModCk7CiAgICAgICAgaWYgKFJjKG4pIHx8IHZvaWQgMCAhPT0gZSAmJiAhTmMoZSkpCiAgICAgICAgICAgIHJldHVybiByWzFdID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgaWYgKFJjKG4pICYmICh0ID0gQmMobiwgdGhpcywgemMoZSksIHQpKSwKICAgICAgICAgICAgICAgICAgICAhTmModCkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgRGMoR2MsIG51bGwsIHIpCiAgICB9CiAgICAgICAgLCBRYyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiA9IEZjKHIsIHQgLSAxKQogICAgICAgICAgICAsIGEgPSBGYyhyLCB0ICsgMSk7CiAgICAgICAgcmV0dXJuIEhjKFhjLCBlKSAmJiAhSGMoS2MsIGEpIHx8IEhjKEtjLCBlKSAmJiAhSGMoWGMsIG4pID8gIlxcdSIgKyBKYyhVYyhlLCAwKSwgMTYpIDogZQogICAgfTsKICAgIEdjICYmIE9jKHsKICAgICAgICB0YXJnZXQ6ICJKU09OIiwKICAgICAgICBzdGF0OiAhMCwKICAgICAgICBhcml0eTogMywKICAgICAgICBmb3JjZWQ6IHFjIHx8IFpjCiAgICB9LCB7CiAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgIHZhciBuID0gUGMoYXJndW1lbnRzKQogICAgICAgICAgICAgICAgLCBhID0gRGMocWMgPyBWYyA6IEdjLCBudWxsLCBuKTsKICAgICAgICAgICAgcmV0dXJuIFpjICYmICJzdHJpbmciID09IHR5cGVvZiBhID8gWWMoYSwgV2MsIFFjKSA6IGEKICAgICAgICB9CiAgICB9KTsKICAgIHZhciAkYyA9IFZhCiAgICAgICAgLCBlaSA9IHFlOwogICAgVHIoewogICAgICAgIHRhcmdldDogIk9iamVjdCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiAha2UgfHwgYygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAkYy5mKDEpCiAgICAgICAgICAgIH0KICAgICAgICApKQogICAgfSwgewogICAgICAgIGdldE93blByb3BlcnR5U3ltYm9sczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9ICRjLmY7CiAgICAgICAgICAgIHJldHVybiB0ID8gdChlaShlKSkgOiBbXQogICAgICAgIH0KICAgIH0pLAogICAgICAgIGhvKCJhc3luY0l0ZXJhdG9yIiksCiAgICAgICAgaG8oImhhc0luc3RhbmNlIiksCiAgICAgICAgaG8oImlzQ29uY2F0U3ByZWFkYWJsZSIpLAogICAgICAgIGhvKCJpdGVyYXRvciIpLAogICAgICAgIGhvKCJtYXRjaCIpLAogICAgICAgIGhvKCJtYXRjaEFsbCIpLAogICAgICAgIGhvKCJyZXBsYWNlIiksCiAgICAgICAgaG8oInNlYXJjaCIpLAogICAgICAgIGhvKCJzcGVjaWVzIiksCiAgICAgICAgaG8oInNwbGl0Iik7CiAgICB2YXIgdGkgPSBibzsKICAgIGhvKCJ0b1ByaW1pdGl2ZSIpLAogICAgICAgIHRpKCk7CiAgICB2YXIgcmkgPSBvZQogICAgICAgICwgbmkgPSBBbzsKICAgIGhvKCJ0b1N0cmluZ1RhZyIpLAogICAgICAgIG5pKHJpKCJTeW1ib2wiKSwgIlN5bWJvbCIpLAogICAgICAgIGhvKCJ1bnNjb3BhYmxlcyIpLAogICAgICAgIEFvKHMuSlNPTiwgIkpTT04iLCAhMCk7CiAgICB2YXIgYWksIG9pLCBzaSwgY2kgPSBlZS5TeW1ib2wsIGlpID0ge30sIHVpID0gVCwgbGkgPSBRZSwgaGkgPSBGdW5jdGlvbi5wcm90b3R5cGUsIGZpID0gdWkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciwgZ2kgPSBsaShoaSwgIm5hbWUiKSwgcGkgPSB7CiAgICAgICAgRVhJU1RTOiBnaSwKICAgICAgICBQUk9QRVI6IGdpICYmICJzb21ldGhpbmciID09PSBmdW5jdGlvbigpIHt9CiAgICAgICAgICAgIC5uYW1lLAogICAgICAgIENPTkZJR1VSQUJMRTogZ2kgJiYgKCF1aSB8fCB1aSAmJiBmaShoaSwgIm5hbWUiKS5jb25maWd1cmFibGUpCiAgICB9LCB2aSA9ICFjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHt9CiAgICAgICAgICAgIHJldHVybiBlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IG51bGwsCiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZihuZXcgZSkgIT09IGUucHJvdG90eXBlCiAgICAgICAgfQogICAgKSksIGJpID0gUWUsIGRpID0gQywga2kgPSBxZSwgeWkgPSB2aSwgbWkgPSBBYSgiSUVfUFJPVE8iKSwgd2kgPSBPYmplY3QsIF9pID0gd2kucHJvdG90eXBlLCB4aSA9IHlpID8gd2kuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBraShlKTsKICAgICAgICBpZiAoYmkodCwgbWkpKQogICAgICAgICAgICByZXR1cm4gdFttaV07CiAgICAgICAgdmFyIHIgPSB0LmNvbnN0cnVjdG9yOwogICAgICAgIHJldHVybiBkaShyKSAmJiB0IGluc3RhbmNlb2YgciA/IHIucHJvdG90eXBlIDogdCBpbnN0YW5jZW9mIHdpID8gX2kgOiBudWxsCiAgICB9CiAgICAgICAgLCBTaSA9IGMsIEVpID0gQywgQWkgPSAkLCBDaSA9IEdhLCBPaSA9IHhpLCBUaSA9ICRhLCBEaSA9IGZ0KCJpdGVyYXRvciIpLCBCaSA9ICExOwogICAgW10ua2V5cyAmJiAoIm5leHQiaW4gKHNpID0gW10ua2V5cygpKSA/IChvaSA9IE9pKE9pKHNpKSkpICE9PSBPYmplY3QucHJvdG90eXBlICYmIChhaSA9IG9pKSA6IEJpID0gITApOwogICAgdmFyIGppID0gIUFpKGFpKSB8fCBTaSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0ge307CiAgICAgICAgICAgIHJldHVybiBhaVtEaV0uY2FsbChlKSAhPT0gZQogICAgICAgIH0KICAgICkpOwogICAgRWkoKGFpID0gamkgPyB7fSA6IENpKGFpKSlbRGldKSB8fCBUaShhaSwgRGksIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICB9CiAgICApKTsKICAgIHZhciBNaSA9IHsKICAgICAgICBJdGVyYXRvclByb3RvdHlwZTogYWksCiAgICAgICAgQlVHR1lfU0FGQVJJX0lURVJBVE9SUzogQmkKICAgIH0KICAgICAgICAsIFJpID0gTWkuSXRlcmF0b3JQcm90b3R5cGUKICAgICAgICAsIE5pID0gR2EKICAgICAgICAsIFBpID0gegogICAgICAgICwgSWkgPSBBbwogICAgICAgICwgTGkgPSBpaQogICAgICAgICwgemkgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcwogICAgfQogICAgICAgICwgR2kgPSBrCiAgICAgICAgLCBIaSA9IERlCiAgICAgICAgLCBGaSA9ICQKICAgICAgICAsIFVpID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBGaShlKSB8fCBudWxsID09PSBlCiAgICB9CiAgICAgICAgLCBZaSA9IFN0cmluZwogICAgICAgICwgSmkgPSBUeXBlRXJyb3IKICAgICAgICAsIFdpID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJldHVybiBHaShIaShPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpW3JdKSkKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgfQogICAgICAgICwgWGkgPSAkCiAgICAgICAgLCBLaSA9IEsKICAgICAgICAsIHFpID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmIChVaShlKSkKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgdGhyb3cgbmV3IEppKCJDYW4ndCBzZXQgIiArIFlpKGUpICsgIiBhcyBhIHByb3RvdHlwZSIpCiAgICB9CiAgICAgICAgLCBaaSA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCAoIl9fcHJvdG9fXyJpbiB7fSA/IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBlLCB0ID0gITEsIHIgPSB7fTsKICAgICAgICB0cnkgewogICAgICAgICAgICAoZSA9IFdpKE9iamVjdC5wcm90b3R5cGUsICJfX3Byb3RvX18iLCAic2V0IikpKHIsIFtdKSwKICAgICAgICAgICAgICAgIHQgPSByIGluc3RhbmNlb2YgQXJyYXkKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgIHJldHVybiBmdW5jdGlvbihyLCBuKSB7CiAgICAgICAgICAgIHJldHVybiBLaShyKSwKICAgICAgICAgICAgICAgIHFpKG4pLAogICAgICAgICAgICAgICAgWGkocikgPyAodCA/IGUociwgbikgOiByLl9fcHJvdG9fXyA9IG4sCiAgICAgICAgICAgICAgICAgICAgcikgOiByCiAgICAgICAgfQogICAgfSgpIDogdm9pZCAwKQogICAgICAgICwgVmkgPSBUcgogICAgICAgICwgUWkgPSBqCiAgICAgICAgLCAkaSA9IGZ1bmN0aW9uKGUsIHQsIHIsIG4pIHsKICAgICAgICB2YXIgYSA9IHQgKyAiIEl0ZXJhdG9yIjsKICAgICAgICByZXR1cm4gZS5wcm90b3R5cGUgPSBOaShSaSwgewogICAgICAgICAgICBuZXh0OiBQaSgrIW4sIHIpCiAgICAgICAgfSksCiAgICAgICAgICAgIElpKGUsIGEsICExLCAhMCksCiAgICAgICAgICAgIExpW2FdID0gemksCiAgICAgICAgICAgIGUKICAgIH0KICAgICAgICAsIGV1ID0geGkKICAgICAgICAsIHR1ID0gQW8KICAgICAgICAsIHJ1ID0gJGEKICAgICAgICAsIG51ID0gaWkKICAgICAgICAsIGF1ID0gcGkuUFJPUEVSCiAgICAgICAgLCBvdSA9IE1pLkJVR0dZX1NBRkFSSV9JVEVSQVRPUlMKICAgICAgICAsIHN1ID0gZnQoIml0ZXJhdG9yIikKICAgICAgICAsIGN1ID0gImtleXMiCiAgICAgICAgLCBpdSA9ICJ2YWx1ZXMiCiAgICAgICAgLCB1dSA9ICJlbnRyaWVzIgogICAgICAgICwgbHUgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gdGhpcwogICAgfQogICAgICAgICwgaHUgPSBmdW5jdGlvbihlLCB0LCByLCBuLCBhLCBvLCBzKSB7CiAgICAgICAgJGkociwgdCwgbik7CiAgICAgICAgdmFyIGMsIGksIHUsIGwgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlID09PSBhICYmIHYpCiAgICAgICAgICAgICAgICByZXR1cm4gdjsKICAgICAgICAgICAgaWYgKCFvdSAmJiBlICYmIGUgaW4gZykKICAgICAgICAgICAgICAgIHJldHVybiBnW2VdOwogICAgICAgICAgICBzd2l0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgY3U6CiAgICAgICAgICAgICAgICBjYXNlIGl1OgogICAgICAgICAgICAgICAgY2FzZSB1dToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcih0aGlzLGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcih0aGlzKQogICAgICAgICAgICB9CiAgICAgICAgfSwgaCA9IHQgKyAiIEl0ZXJhdG9yIiwgZiA9ICExLCBnID0gZS5wcm90b3R5cGUsIHAgPSBnW3N1XSB8fCBnWyJAQGl0ZXJhdG9yIl0gfHwgYSAmJiBnW2FdLCB2ID0gIW91ICYmIHAgfHwgbChhKSwgYiA9ICJBcnJheSIgPT09IHQgJiYgZy5lbnRyaWVzIHx8IHA7CiAgICAgICAgaWYgKGIgJiYgKGMgPSBldShiLmNhbGwobmV3IGUpKSkgIT09IE9iamVjdC5wcm90b3R5cGUgJiYgYy5uZXh0ICYmICh0dShjLCBoLCAhMCwgITApLAogICAgICAgICAgICBudVtoXSA9IGx1KSwKICAgICAgICBhdSAmJiBhID09PSBpdSAmJiBwICYmIHAubmFtZSAhPT0gaXUgJiYgKGYgPSAhMCwKICAgICAgICAgICAgICAgIHYgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUWkocCwgdGhpcykKICAgICAgICAgICAgICAgIH0KICAgICAgICApLAogICAgICAgICAgICBhKQogICAgICAgICAgICBpZiAoaSA9IHsKICAgICAgICAgICAgICAgIHZhbHVlczogbChpdSksCiAgICAgICAgICAgICAgICBrZXlzOiBvID8gdiA6IGwoY3UpLAogICAgICAgICAgICAgICAgZW50cmllczogbCh1dSkKICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHMpCiAgICAgICAgICAgICAgICBmb3IgKHUgaW4gaSkKICAgICAgICAgICAgICAgICAgICAob3UgfHwgZiB8fCAhKHUgaW4gZykpICYmIHJ1KGcsIHUsIGlbdV0pOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBWaSh7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiB0LAogICAgICAgICAgICAgICAgICAgIHByb3RvOiAhMCwKICAgICAgICAgICAgICAgICAgICBmb3JjZWQ6IG91IHx8IGYKICAgICAgICAgICAgICAgIH0sIGkpOwogICAgICAgIHJldHVybiBzICYmIGdbc3VdICE9PSB2ICYmIHJ1KGcsIHN1LCB2LCB7CiAgICAgICAgICAgIG5hbWU6IGEKICAgICAgICB9KSwKICAgICAgICAgICAgbnVbdF0gPSB2LAogICAgICAgICAgICBpCiAgICB9CiAgICAgICAgLCBmdSA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogZSwKICAgICAgICAgICAgZG9uZTogdAogICAgICAgIH0KICAgIH0KICAgICAgICAsIGd1ID0gVgogICAgICAgICwgcHUgPSBmdW5jdGlvbigpIHt9CiAgICAgICAgLCB2dSA9IGlpCiAgICAgICAgLCBidSA9IFVvCiAgICAgICAgLCBkdSA9IChRdC5mLAogICAgICAgIGh1KQogICAgICAgICwga3UgPSBmdQogICAgICAgICwgeXUgPSAiQXJyYXkgSXRlcmF0b3IiCiAgICAgICAgLCBtdSA9IGJ1LnNldAogICAgICAgICwgd3UgPSBidS5nZXR0ZXJGb3IoeXUpOwogICAgZHUoQXJyYXksICJBcnJheSIsIChmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIG11KHRoaXMsIHsKICAgICAgICAgICAgICAgIHR5cGU6IHl1LAogICAgICAgICAgICAgICAgdGFyZ2V0OiBndShlKSwKICAgICAgICAgICAgICAgIGluZGV4OiAwLAogICAgICAgICAgICAgICAga2luZDogdAogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICksIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGUgPSB3dSh0aGlzKQogICAgICAgICAgICAgICAgLCB0ID0gZS50YXJnZXQKICAgICAgICAgICAgICAgICwgciA9IGUuaW5kZXgrKzsKICAgICAgICAgICAgaWYgKCF0IHx8IHIgPj0gdC5sZW5ndGgpCiAgICAgICAgICAgICAgICByZXR1cm4gZS50YXJnZXQgPSB2b2lkIDAsCiAgICAgICAgICAgICAgICAgICAga3Uodm9pZCAwLCAhMCk7CiAgICAgICAgICAgIHN3aXRjaCAoZS5raW5kKSB7CiAgICAgICAgICAgICAgICBjYXNlICJrZXlzIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4ga3UociwgITEpOwogICAgICAgICAgICAgICAgY2FzZSAidmFsdWVzIjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4ga3UodFtyXSwgITEpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGt1KFtyLCB0W3JdXSwgITEpCiAgICAgICAgfQogICAgKSwgInZhbHVlcyIpOwogICAgdnUuQXJndW1lbnRzID0gdnUuQXJyYXk7CiAgICBwdSgpLAogICAgICAgIHB1KCksCiAgICAgICAgcHUoKTsKICAgIHZhciBfdSA9IHsKICAgICAgICBDU1NSdWxlTGlzdDogMCwKICAgICAgICBDU1NTdHlsZURlY2xhcmF0aW9uOiAwLAogICAgICAgIENTU1ZhbHVlTGlzdDogMCwKICAgICAgICBDbGllbnRSZWN0TGlzdDogMCwKICAgICAgICBET01SZWN0TGlzdDogMCwKICAgICAgICBET01TdHJpbmdMaXN0OiAwLAogICAgICAgIERPTVRva2VuTGlzdDogMSwKICAgICAgICBEYXRhVHJhbnNmZXJJdGVtTGlzdDogMCwKICAgICAgICBGaWxlTGlzdDogMCwKICAgICAgICBIVE1MQWxsQ29sbGVjdGlvbjogMCwKICAgICAgICBIVE1MQ29sbGVjdGlvbjogMCwKICAgICAgICBIVE1MRm9ybUVsZW1lbnQ6IDAsCiAgICAgICAgSFRNTFNlbGVjdEVsZW1lbnQ6IDAsCiAgICAgICAgTWVkaWFMaXN0OiAwLAogICAgICAgIE1pbWVUeXBlQXJyYXk6IDAsCiAgICAgICAgTmFtZWROb2RlTWFwOiAwLAogICAgICAgIE5vZGVMaXN0OiAxLAogICAgICAgIFBhaW50UmVxdWVzdExpc3Q6IDAsCiAgICAgICAgUGx1Z2luOiAwLAogICAgICAgIFBsdWdpbkFycmF5OiAwLAogICAgICAgIFNWR0xlbmd0aExpc3Q6IDAsCiAgICAgICAgU1ZHTnVtYmVyTGlzdDogMCwKICAgICAgICBTVkdQYXRoU2VnTGlzdDogMCwKICAgICAgICBTVkdQb2ludExpc3Q6IDAsCiAgICAgICAgU1ZHU3RyaW5nTGlzdDogMCwKICAgICAgICBTVkdUcmFuc2Zvcm1MaXN0OiAwLAogICAgICAgIFNvdXJjZUJ1ZmZlckxpc3Q6IDAsCiAgICAgICAgU3R5bGVTaGVldExpc3Q6IDAsCiAgICAgICAgVGV4dFRyYWNrQ3VlTGlzdDogMCwKICAgICAgICBUZXh0VHJhY2tMaXN0OiAwLAogICAgICAgIFRvdWNoTGlzdDogMAogICAgfQogICAgICAgICwgeHUgPSBzCiAgICAgICAgLCBTdSA9IEFvCiAgICAgICAgLCBFdSA9IGlpOwogICAgZm9yICh2YXIgQXUgaW4gX3UpCiAgICAgICAgU3UoeHVbQXVdLCBBdSksCiAgICAgICAgICAgIEV1W0F1XSA9IEV1LkFycmF5OwogICAgdmFyIEN1ID0gY2kKICAgICAgICAsIE91ID0gZnQKICAgICAgICAsIFR1ID0gUXQuZgogICAgICAgICwgRHUgPSBPdSgibWV0YWRhdGEiKQogICAgICAgICwgQnUgPSBGdW5jdGlvbi5wcm90b3R5cGU7CiAgICB2b2lkIDAgPT09IEJ1W0R1XSAmJiBUdShCdSwgRHUsIHsKICAgICAgICB2YWx1ZTogbnVsbAogICAgfSksCiAgICAgICAgaG8oImFzeW5jRGlzcG9zZSIpLAogICAgICAgIGhvKCJkaXNwb3NlIiksCiAgICAgICAgaG8oIm1ldGFkYXRhIik7CiAgICB2YXIganUgPSBDdQogICAgICAgICwgTXUgPSBrCiAgICAgICAgLCBSdSA9IG9lKCJTeW1ib2wiKQogICAgICAgICwgTnUgPSBSdS5rZXlGb3IKICAgICAgICAsIFB1ID0gTXUoUnUucHJvdG90eXBlLnZhbHVlT2YpCiAgICAgICAgLCBJdSA9IFJ1LmlzUmVnaXN0ZXJlZFN5bWJvbCB8fCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBOdShQdShlKSkKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICA7CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiU3ltYm9sIiwKICAgICAgICBzdGF0OiAhMAogICAgfSwgewogICAgICAgIGlzUmVnaXN0ZXJlZFN5bWJvbDogSXUKICAgIH0pOwogICAgZm9yICh2YXIgTHUgPSBXZSwgenUgPSBvZSwgR3UgPSBrLCBIdSA9IFNlLCBGdSA9IGZ0LCBVdSA9IHp1KCJTeW1ib2wiKSwgWXUgPSBVdS5pc1dlbGxLbm93blN5bWJvbCwgSnUgPSB6dSgiT2JqZWN0IiwgImdldE93blByb3BlcnR5TmFtZXMiKSwgV3UgPSBHdShVdS5wcm90b3R5cGUudmFsdWVPZiksIFh1ID0gTHUoIndrcyIpLCBLdSA9IDAsIHF1ID0gSnUoVXUpLCBadSA9IHF1Lmxlbmd0aDsgS3UgPCBadTsgS3UrKykKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgVnUgPSBxdVtLdV07CiAgICAgICAgICAgIEh1KFV1W1Z1XSkgJiYgRnUoVnUpCiAgICAgICAgfSBjYXRjaCAoZSkge30KICAgIHZhciBRdSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoWXUgJiYgWXUoZSkpCiAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB0cnkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gV3UoZSksIHIgPSAwLCBuID0gSnUoWHUpLCBhID0gbi5sZW5ndGg7IHIgPCBhOyByKyspCiAgICAgICAgICAgICAgICBpZiAoWHVbbltyXV0gPT0gdCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgIHJldHVybiAhMQogICAgfTsKICAgIFRyKHsKICAgICAgICB0YXJnZXQ6ICJTeW1ib2wiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogITAKICAgIH0sIHsKICAgICAgICBpc1dlbGxLbm93blN5bWJvbDogUXUKICAgIH0pLAogICAgICAgIGhvKCJtYXRjaGVyIiksCiAgICAgICAgaG8oIm9ic2VydmFibGUiKSwKICAgICAgICBUcih7CiAgICAgICAgICAgIHRhcmdldDogIlN5bWJvbCIsCiAgICAgICAgICAgIHN0YXQ6ICEwLAogICAgICAgICAgICBuYW1lOiAiaXNSZWdpc3RlcmVkU3ltYm9sIgogICAgICAgIH0sIHsKICAgICAgICAgICAgaXNSZWdpc3RlcmVkOiBJdQogICAgICAgIH0pLAogICAgICAgIFRyKHsKICAgICAgICAgICAgdGFyZ2V0OiAiU3ltYm9sIiwKICAgICAgICAgICAgc3RhdDogITAsCiAgICAgICAgICAgIG5hbWU6ICJpc1dlbGxLbm93blN5bWJvbCIsCiAgICAgICAgICAgIGZvcmNlZDogITAKICAgICAgICB9LCB7CiAgICAgICAgICAgIGlzV2VsbEtub3duOiBRdQogICAgICAgIH0pLAogICAgICAgIGhvKCJtZXRhZGF0YUtleSIpLAogICAgICAgIGhvKCJwYXR0ZXJuTWF0Y2giKSwKICAgICAgICBobygicmVwbGFjZUFsbCIpOwogICAgdmFyICR1ID0ganUKICAgICAgICAsIGVsID0gJHUKICAgICAgICAsIHRsID0gawogICAgICAgICwgcmwgPSBOcgogICAgICAgICwgbmwgPSBLbgogICAgICAgICwgYWwgPSBLCiAgICAgICAgLCBvbCA9IHRsKCIiLmNoYXJBdCkKICAgICAgICAsIHNsID0gdGwoIiIuY2hhckNvZGVBdCkKICAgICAgICAsIGNsID0gdGwoIiIuc2xpY2UpCiAgICAgICAgLCBpbCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgcikgewogICAgICAgICAgICB2YXIgbiwgYSwgbyA9IG5sKGFsKHQpKSwgcyA9IHJsKHIpLCBjID0gby5sZW5ndGg7CiAgICAgICAgICAgIHJldHVybiBzIDwgMCB8fCBzID49IGMgPyBlID8gIiIgOiB2b2lkIDAgOiAobiA9IHNsKG8sIHMpKSA8IDU1Mjk2IHx8IG4gPiA1NjMxOSB8fCBzICsgMSA9PT0gYyB8fCAoYSA9IHNsKG8sIHMgKyAxKSkgPCA1NjMyMCB8fCBhID4gNTczNDMgPyBlID8gb2wobywgcykgOiBuIDogZSA/IGNsKG8sIHMsIHMgKyAyKSA6IGEgLSA1NjMyMCArIChuIC0gNTUyOTYgPDwgMTApICsgNjU1MzYKICAgICAgICB9CiAgICB9CiAgICAgICAgLCB1bCA9IHsKICAgICAgICBjb2RlQXQ6IGlsKCExKSwKICAgICAgICBjaGFyQXQ6IGlsKCEwKQogICAgfS5jaGFyQXQKICAgICAgICAsIGxsID0gS24KICAgICAgICAsIGhsID0gVW8KICAgICAgICAsIGZsID0gaHUKICAgICAgICAsIGdsID0gZnUKICAgICAgICAsIHBsID0gIlN0cmluZyBJdGVyYXRvciIKICAgICAgICAsIHZsID0gaGwuc2V0CiAgICAgICAgLCBibCA9IGhsLmdldHRlckZvcihwbCk7CiAgICBmbChTdHJpbmcsICJTdHJpbmciLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2bCh0aGlzLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBwbCwKICAgICAgICAgICAgICAgIHN0cmluZzogbGwoZSksCiAgICAgICAgICAgICAgICBpbmRleDogMAogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICksIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGUsIHQgPSBibCh0aGlzKSwgciA9IHQuc3RyaW5nLCBuID0gdC5pbmRleDsKICAgICAgICAgICAgcmV0dXJuIG4gPj0gci5sZW5ndGggPyBnbCh2b2lkIDAsICEwKSA6IChlID0gdWwociwgbiksCiAgICAgICAgICAgICAgICB0LmluZGV4ICs9IGUubGVuZ3RoLAogICAgICAgICAgICAgICAgZ2woZSwgITEpKQogICAgICAgIH0KICAgICkpOwogICAgdmFyIGRsID0gcm8uZigiaXRlcmF0b3IiKQogICAgICAgICwga2wgPSBkbDsKICAgICFmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSAkdQogICAgICAgICAgICAsIHIgPSBkbDsKICAgICAgICBmdW5jdGlvbiBuKGEpIHsKICAgICAgICAgICAgcmV0dXJuIGUuZXhwb3J0cyA9IG4gPSAiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmICJzeW1ib2wiID09IHR5cGVvZiByID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCAmJiBlLmNvbnN0cnVjdG9yID09PSB0ICYmIGUgIT09IHQucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2YgZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgZS5leHBvcnRzLl9fZXNNb2R1bGUgPSAhMCwKICAgICAgICAgICAgICAgIGUuZXhwb3J0cy5kZWZhdWx0ID0gZS5leHBvcnRzLAogICAgICAgICAgICAgICAgbihhKQogICAgICAgIH0KICAgICAgICBlLmV4cG9ydHMgPSBuLAogICAgICAgICAgICBlLmV4cG9ydHMuX19lc01vZHVsZSA9ICEwLAogICAgICAgICAgICBlLmV4cG9ydHMuZGVmYXVsdCA9IGUuZXhwb3J0cwogICAgfShhKTsKICAgIHZhciB5bCA9ICFjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5pc0V4dGVuc2libGUoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSkKICAgICAgICB9CiAgICApKQogICAgICAgICwgbWwgPSAkYQogICAgICAgICwgd2wgPSBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgZm9yICh2YXIgbiBpbiB0KQogICAgICAgICAgICByICYmIHIudW5zYWZlICYmIGVbbl0gPyBlW25dID0gdFtuXSA6IG1sKGUsIG4sIHRbbl0sIHIpOwogICAgICAgIHJldHVybiBlCiAgICB9CiAgICAgICAgLCBfbCA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgeGwgPSBjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBBcnJheUJ1ZmZlcig4KTsKICAgICAgICAgICAgICAgIE9iamVjdC5pc0V4dGVuc2libGUoZSkgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsICJhIiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiA4CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgKSkKICAgICAgICAsIFNsID0gYwogICAgICAgICwgRWwgPSAkCiAgICAgICAgLCBBbCA9IF8KICAgICAgICAsIENsID0geGwKICAgICAgICAsIE9sID0gT2JqZWN0LmlzRXh0ZW5zaWJsZQogICAgICAgICwgVGwgPSBTbCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIE9sKDEpCiAgICAgICAgfQogICAgKSkgfHwgQ2wgPyBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAhIUVsKGUpICYmICgoIUNsIHx8ICJBcnJheUJ1ZmZlciIgIT09IEFsKGUpKSAmJiAoIU9sIHx8IE9sKGUpKSkKICAgICAgICB9CiAgICAgICAgOiBPbAogICAgICAgICwgRGwgPSBUcgogICAgICAgICwgQmwgPSBrCiAgICAgICAgLCBqbCA9IG9hCiAgICAgICAgLCBNbCA9ICQKICAgICAgICAsIFJsID0gUWUKICAgICAgICAsIE5sID0gUXQuZgogICAgICAgICwgUGwgPSBIYQogICAgICAgICwgSWwgPSBZYQogICAgICAgICwgTGwgPSBUbAogICAgICAgICwgemwgPSB5bAogICAgICAgICwgR2wgPSAhMQogICAgICAgICwgSGwgPSBudCgibWV0YSIpCiAgICAgICAgLCBGbCA9IDAKICAgICAgICAsIFVsID0gZnVuY3Rpb24oZSkgewogICAgICAgIE5sKGUsIEhsLCB7CiAgICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgICAgICBvYmplY3RJRDogIk8iICsgRmwrKywKICAgICAgICAgICAgICAgIHdlYWtEYXRhOiB7fQogICAgICAgICAgICB9CiAgICAgICAgfSkKICAgIH0KICAgICAgICAsIFlsID0gX2wuZXhwb3J0cyA9IHsKICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBZbC5lbmFibGUgPSBmdW5jdGlvbigpIHt9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICBHbCA9ICEwOwogICAgICAgICAgICB2YXIgZSA9IFBsLmYKICAgICAgICAgICAgICAgICwgdCA9IEJsKFtdLnNwbGljZSkKICAgICAgICAgICAgICAgICwgciA9IHt9OwogICAgICAgICAgICByW0hsXSA9IDEsCiAgICAgICAgICAgIGUocikubGVuZ3RoICYmIChQbC5mID0gZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IGUociksIGEgPSAwLCBvID0gbi5sZW5ndGg7IGEgPCBvOyBhKyspCiAgICAgICAgICAgICAgICAgICAgaWYgKG5bYV0gPT09IEhsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHQobiwgYSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG4KICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgRGwoewogICAgICAgICAgICAgICAgICAgIHRhcmdldDogIk9iamVjdCIsCiAgICAgICAgICAgICAgICAgICAgc3RhdDogITAsCiAgICAgICAgICAgICAgICAgICAgZm9yY2VkOiAhMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIGdldE93blByb3BlcnR5TmFtZXM6IElsLmYKICAgICAgICAgICAgICAgIH0pKQogICAgICAgIH0sCiAgICAgICAgZmFzdEtleTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBpZiAoIU1sKGUpKQogICAgICAgICAgICAgICAgcmV0dXJuICJzeW1ib2wiID09IHR5cGVvZiBlID8gZSA6ICgic3RyaW5nIiA9PSB0eXBlb2YgZSA/ICJTIiA6ICJQIikgKyBlOwogICAgICAgICAgICBpZiAoIVJsKGUsIEhsKSkgewogICAgICAgICAgICAgICAgaWYgKCFMbChlKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkYiOwogICAgICAgICAgICAgICAgaWYgKCF0KQogICAgICAgICAgICAgICAgICAgIHJldHVybiAiRSI7CiAgICAgICAgICAgICAgICBVbChlKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBlW0hsXS5vYmplY3RJRAogICAgICAgIH0sCiAgICAgICAgZ2V0V2Vha0RhdGE6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgaWYgKCFSbChlLCBIbCkpIHsKICAgICAgICAgICAgICAgIGlmICghTGwoZSkpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgICAgICAgaWYgKCF0KQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgIFVsKGUpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGVbSGxdLndlYWtEYXRhCiAgICAgICAgfSwKICAgICAgICBvbkZyZWV6ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gemwgJiYgR2wgJiYgTGwoZSkgJiYgIVJsKGUsIEhsKSAmJiBVbChlKSwKICAgICAgICAgICAgICAgIGUKICAgICAgICB9CiAgICB9OwogICAgamxbSGxdID0gITA7CiAgICB2YXIgSmwgPSBpaQogICAgICAgICwgV2wgPSBmdCgiaXRlcmF0b3IiKQogICAgICAgICwgWGwgPSBBcnJheS5wcm90b3R5cGUKICAgICAgICAsIEtsID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgJiYgKEpsLkFycmF5ID09PSBlIHx8IFhsW1dsXSA9PT0gZSkKICAgIH0KICAgICAgICAsIHFsID0gdG4KICAgICAgICAsIFpsID0gTWUKICAgICAgICAsIFZsID0gSgogICAgICAgICwgUWwgPSBpaQogICAgICAgICwgJGwgPSBmdCgiaXRlcmF0b3IiKQogICAgICAgICwgZWggPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKCFWbChlKSkKICAgICAgICAgICAgcmV0dXJuIFpsKGUsICRsKSB8fCBabChlLCAiQEBpdGVyYXRvciIpIHx8IFFsW3FsKGUpXQogICAgfQogICAgICAgICwgdGggPSBqCiAgICAgICAgLCByaCA9IERlCiAgICAgICAgLCBuaCA9IG5yCiAgICAgICAgLCBhaCA9IEFlCiAgICAgICAgLCBvaCA9IGVoCiAgICAgICAgLCBzaCA9IFR5cGVFcnJvcgogICAgICAgICwgY2ggPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIgPSBhcmd1bWVudHMubGVuZ3RoIDwgMiA/IG9oKGUpIDogdDsKICAgICAgICBpZiAocmgocikpCiAgICAgICAgICAgIHJldHVybiBuaCh0aChyLCBlKSk7CiAgICAgICAgdGhyb3cgbmV3IHNoKGFoKGUpICsgIiBpcyBub3QgaXRlcmFibGUiKQogICAgfQogICAgICAgICwgaWggPSBqCiAgICAgICAgLCB1aCA9IG5yCiAgICAgICAgLCBsaCA9IE1lCiAgICAgICAgLCBoaCA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwgYTsKICAgICAgICB1aChlKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIShuID0gbGgoZSwgInJldHVybiIpKSkgewogICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgPT09IHQpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcjsKICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbiA9IGloKG4sIGUpCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBhID0gITAsCiAgICAgICAgICAgICAgICBuID0gZQogICAgICAgIH0KICAgICAgICBpZiAoInRocm93IiA9PT0gdCkKICAgICAgICAgICAgdGhyb3cgcjsKICAgICAgICBpZiAoYSkKICAgICAgICAgICAgdGhyb3cgbjsKICAgICAgICByZXR1cm4gdWgobiksCiAgICAgICAgICAgIHIKICAgIH0KICAgICAgICAsIGZoID0gVnQKICAgICAgICAsIGdoID0gagogICAgICAgICwgcGggPSBucgogICAgICAgICwgdmggPSBBZQogICAgICAgICwgYmggPSBLbAogICAgICAgICwgZGggPSBHcgogICAgICAgICwga2ggPSBzZQogICAgICAgICwgeWggPSBjaAogICAgICAgICwgbWggPSBlaAogICAgICAgICwgd2ggPSBoaAogICAgICAgICwgX2ggPSBUeXBlRXJyb3IKICAgICAgICAsIHhoID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHRoaXMuc3RvcHBlZCA9IGUsCiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gdAogICAgfQogICAgICAgICwgU2ggPSB4aC5wcm90b3R5cGUKICAgICAgICAsIEVoID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHZhciBuLCBhLCBvLCBzLCBjLCBpLCB1LCBsID0gciAmJiByLnRoYXQsIGggPSAhKCFyIHx8ICFyLkFTX0VOVFJJRVMpLCBmID0gISghciB8fCAhci5JU19SRUNPUkQpLCBnID0gISghciB8fCAhci5JU19JVEVSQVRPUiksIHAgPSAhKCFyIHx8ICFyLklOVEVSUlVQVEVEKSwgdiA9IGZoKHQsIGwpLCBiID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gbiAmJiB3aChuLCAibm9ybWFsIiwgZSksCiAgICAgICAgICAgICAgICBuZXcgeGgoITAsZSkKICAgICAgICB9LCBkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gaCA/IChwaChlKSwKICAgICAgICAgICAgICAgIHAgPyB2KGVbMF0sIGVbMV0sIGIpIDogdihlWzBdLCBlWzFdKSkgOiBwID8gdihlLCBiKSA6IHYoZSkKICAgICAgICB9OwogICAgICAgIGlmIChmKQogICAgICAgICAgICBuID0gZS5pdGVyYXRvcjsKICAgICAgICBlbHNlIGlmIChnKQogICAgICAgICAgICBuID0gZTsKICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKCEoYSA9IG1oKGUpKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBfaCh2aChlKSArICIgaXMgbm90IGl0ZXJhYmxlIik7CiAgICAgICAgICAgIGlmIChiaChhKSkgewogICAgICAgICAgICAgICAgZm9yIChvID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBkaChlKTsgcyA+IG87IG8rKykKICAgICAgICAgICAgICAgICAgICBpZiAoKGMgPSBkKGVbb10pKSAmJiBraChTaCwgYykpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB4aCghMSkKICAgICAgICAgICAgfQogICAgICAgICAgICBuID0geWgoZSwgYSkKICAgICAgICB9CiAgICAgICAgZm9yIChpID0gZiA/IGUubmV4dCA6IG4ubmV4dDsgISh1ID0gZ2goaSwgbikpLmRvbmU7ICkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgYyA9IGQodS52YWx1ZSkKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgd2gobiwgInRocm93IiwgZSkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGMgJiYgYyAmJiBraChTaCwgYykpCiAgICAgICAgICAgICAgICByZXR1cm4gYwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IHhoKCExKQogICAgfQogICAgICAgICwgQWggPSBzZQogICAgICAgICwgQ2ggPSBUeXBlRXJyb3IKICAgICAgICAsIE9oID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIGlmIChBaCh0LCBlKSkKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgdGhyb3cgbmV3IENoKCJJbmNvcnJlY3QgaW52b2NhdGlvbiIpCiAgICB9CiAgICAgICAgLCBUaCA9IFRyCiAgICAgICAgLCBEaCA9IHMKICAgICAgICAsIEJoID0gX2wuZXhwb3J0cwogICAgICAgICwgamggPSBjCiAgICAgICAgLCBNaCA9IGRyCiAgICAgICAgLCBSaCA9IEVoCiAgICAgICAgLCBOaCA9IE9oCiAgICAgICAgLCBQaCA9IEMKICAgICAgICAsIEloID0gJAogICAgICAgICwgTGggPSBKCiAgICAgICAgLCB6aCA9IEFvCiAgICAgICAgLCBHaCA9IFF0LmYKICAgICAgICAsIEhoID0gVm8uZm9yRWFjaAogICAgICAgICwgRmggPSBUCiAgICAgICAgLCBVaCA9IFVvLnNldAogICAgICAgICwgWWggPSBVby5nZXR0ZXJGb3IKICAgICAgICAsIEpoID0gawogICAgICAgICwgV2ggPSB3bAogICAgICAgICwgWGggPSBfbC5leHBvcnRzLmdldFdlYWtEYXRhCiAgICAgICAgLCBLaCA9IE9oCiAgICAgICAgLCBxaCA9IG5yCiAgICAgICAgLCBaaCA9IEoKICAgICAgICAsIFZoID0gJAogICAgICAgICwgUWggPSBFaAogICAgICAgICwgJGggPSBRZQogICAgICAgICwgZWYgPSBVby5zZXQKICAgICAgICAsIHRmID0gVW8uZ2V0dGVyRm9yCiAgICAgICAgLCByZiA9IFZvLmZpbmQKICAgICAgICAsIG5mID0gVm8uZmluZEluZGV4CiAgICAgICAgLCBhZiA9IEpoKFtdLnNwbGljZSkKICAgICAgICAsIG9mID0gMAogICAgICAgICwgc2YgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUuZnJvemVuIHx8IChlLmZyb3plbiA9IG5ldyBjZikKICAgIH0KICAgICAgICAsIGNmID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5lbnRyaWVzID0gW10KICAgIH0KICAgICAgICAsIHVmID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHJldHVybiByZihlLmVudHJpZXMsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZVswXSA9PT0gdAogICAgICAgICAgICB9CiAgICAgICAgKSkKICAgIH07CiAgICBjZi5wcm90b3R5cGUgPSB7CiAgICAgICAgZ2V0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gdWYodGhpcywgZSk7CiAgICAgICAgICAgIGlmICh0KQogICAgICAgICAgICAgICAgcmV0dXJuIHRbMV0KICAgICAgICB9LAogICAgICAgIGhhczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gISF1Zih0aGlzLCBlKQogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciByID0gdWYodGhpcywgZSk7CiAgICAgICAgICAgIHIgPyByWzFdID0gdCA6IHRoaXMuZW50cmllcy5wdXNoKFtlLCB0XSkKICAgICAgICB9LAogICAgICAgIGRlbGV0ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IG5mKHRoaXMuZW50cmllcywgKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFswXSA9PT0gZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKTsKICAgICAgICAgICAgcmV0dXJuIH50ICYmIGFmKHRoaXMuZW50cmllcywgdCwgMSksCiAgICAgICAgICAgICAgICAhIX50CiAgICAgICAgfQogICAgfTsKICAgIHZhciBsZiwgaGYgPSB7CiAgICAgICAgZ2V0Q29uc3RydWN0b3I6IGZ1bmN0aW9uKGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgdmFyIGEgPSBlKChmdW5jdGlvbihlLCBhKSB7CiAgICAgICAgICAgICAgICAgICAgS2goZSwgbyksCiAgICAgICAgICAgICAgICAgICAgICAgIGVmKGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogb2YrKywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb3plbjogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIFpoKGEpIHx8IFFoKGEsIGVbbl0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhhdDogZSwKICAgICAgICAgICAgICAgICAgICAgICAgQVNfRU5UUklFUzogcgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAsIG8gPSBhLnByb3RvdHlwZQogICAgICAgICAgICAgICAgLCBzID0gdGYodCkKICAgICAgICAgICAgICAgICwgYyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gcyhlKQogICAgICAgICAgICAgICAgICAgICwgYSA9IFhoKHFoKHQpLCAhMCk7CiAgICAgICAgICAgICAgICByZXR1cm4gITAgPT09IGEgPyBzZihuKS5zZXQodCwgcikgOiBhW24uaWRdID0gciwKICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiBXaChvLCB7CiAgICAgICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHModGhpcyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFWaChlKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gWGgoZSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwID09PSByID8gc2YodCkuZGVsZXRlKGUpIDogciAmJiAkaChyLCB0LmlkKSAmJiBkZWxldGUgclt0LmlkXQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGhhczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gcyh0aGlzKTsKICAgICAgICAgICAgICAgICAgICBpZiAoIVZoKGUpKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBYaChlKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAgPT09IHIgPyBzZih0KS5oYXMoZSkgOiByICYmICRoKHIsIHQuaWQpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgV2gobywgciA/IHsKICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBzKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoVmgoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gWGgoZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAgPT09IHIgPyBzZih0KS5nZXQoZSkgOiByID8gclt0LmlkXSA6IHZvaWQgMAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGModGhpcywgZSwgdCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgIGFkZDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYyh0aGlzLCBlLCAhMCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGEKICAgICAgICB9CiAgICB9LCBmZiA9IHlsLCBnZiA9IHMsIHBmID0gaywgdmYgPSB3bCwgYmYgPSBfbC5leHBvcnRzLCBkZiA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICB2YXIgbiwgYSA9IC0xICE9PSBlLmluZGV4T2YoIk1hcCIpLCBvID0gLTEgIT09IGUuaW5kZXhPZigiV2VhayIpLCBzID0gYSA/ICJzZXQiIDogImFkZCIsIGMgPSBEaFtlXSwgaSA9IGMgJiYgYy5wcm90b3R5cGUsIHUgPSB7fTsKICAgICAgICBpZiAoRmggJiYgUGgoYykgJiYgKG8gfHwgaS5mb3JFYWNoICYmICFqaCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAobmV3IGMpLmVudHJpZXMoKS5uZXh0KCkKICAgICAgICAgICAgfQogICAgICAgICkpKSkgewogICAgICAgICAgICB2YXIgbCA9IChuID0gdCgoZnVuY3Rpb24odCwgcikgewogICAgICAgICAgICAgICAgICAgIFVoKE5oKHQsIGwpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb246IG5ldyBjCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgTGgocikgfHwgUmgociwgdFtzXSwgewogICAgICAgICAgICAgICAgICAgICAgICB0aGF0OiB0LAogICAgICAgICAgICAgICAgICAgICAgICBBU19FTlRSSUVTOiBhCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSkpLnByb3RvdHlwZQogICAgICAgICAgICAgICAgLCBoID0gWWgoZSk7CiAgICAgICAgICAgIEhoKFsiYWRkIiwgImNsZWFyIiwgImRlbGV0ZSIsICJmb3JFYWNoIiwgImdldCIsICJoYXMiLCAic2V0IiwgImtleXMiLCAidmFsdWVzIiwgImVudHJpZXMiXSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICJhZGQiID09PSBlIHx8ICJzZXQiID09PSBlOwogICAgICAgICAgICAgICAgICAgICEoZSBpbiBpKSB8fCBvICYmICJjbGVhciIgPT09IGUgfHwgTWgobCwgZSwgKGZ1bmN0aW9uKHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gaCh0aGlzKS5jb2xsZWN0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ICYmIG8gJiYgIUloKHIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiZ2V0IiA9PT0gZSAmJiB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGFbZV0oMCA9PT0gciA/IDAgOiByLCBuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0ID8gdGhpcyA6IHMKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkpLAogICAgICAgICAgICBvIHx8IEdoKGwsICJzaXplIiwgewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgodGhpcykuY29sbGVjdGlvbi5zaXplCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSBlbHNlCiAgICAgICAgICAgIG4gPSByLmdldENvbnN0cnVjdG9yKHQsIGUsIGEsIHMpLAogICAgICAgICAgICAgICAgQmguZW5hYmxlKCk7CiAgICAgICAgcmV0dXJuIHpoKG4sIGUsICExLCAhMCksCiAgICAgICAgICAgIHVbZV0gPSBuLAogICAgICAgICAgICBUaCh7CiAgICAgICAgICAgICAgICBnbG9iYWw6ICEwLAogICAgICAgICAgICAgICAgZm9yY2VkOiAhMAogICAgICAgICAgICB9LCB1KSwKICAgICAgICBvIHx8IHIuc2V0U3Ryb25nKG4sIGUsIGEpLAogICAgICAgICAgICBuCiAgICB9LCBrZiA9IGhmLCB5ZiA9ICQsIG1mID0gVW8uZW5mb3JjZSwgd2YgPSBjLCBfZiA9IFRvLCB4ZiA9IE9iamVjdCwgU2YgPSBBcnJheS5pc0FycmF5LCBFZiA9IHhmLmlzRXh0ZW5zaWJsZSwgQWYgPSB4Zi5pc0Zyb3plbiwgQ2YgPSB4Zi5pc1NlYWxlZCwgT2YgPSB4Zi5mcmVlemUsIFRmID0geGYuc2VhbCwgRGYgPSAhZ2YuQWN0aXZlWE9iamVjdCAmJiAiQWN0aXZlWE9iamVjdCJpbiBnZiwgQmYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gZSh0aGlzLCBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzBdIDogdm9pZCAwKQogICAgICAgIH0KICAgIH0sIGpmID0gZGYoIldlYWtNYXAiLCBCZiwga2YpLCBNZiA9IGpmLnByb3RvdHlwZSwgUmYgPSBwZihNZi5zZXQpOwogICAgaWYgKF9mKQogICAgICAgIGlmIChEZikgewogICAgICAgICAgICBsZiA9IGtmLmdldENvbnN0cnVjdG9yKEJmLCAiV2Vha01hcCIsICEwKSwKICAgICAgICAgICAgICAgIGJmLmVuYWJsZSgpOwogICAgICAgICAgICB2YXIgTmYgPSBwZihNZi5kZWxldGUpCiAgICAgICAgICAgICAgICAsIFBmID0gcGYoTWYuaGFzKQogICAgICAgICAgICAgICAgLCBJZiA9IHBmKE1mLmdldCk7CiAgICAgICAgICAgIHZmKE1mLCB7CiAgICAgICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoeWYoZSkgJiYgIUVmKGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbWYodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmZyb3plbiB8fCAodC5mcm96ZW4gPSBuZXcgbGYpLAogICAgICAgICAgICAgICAgICAgICAgICBOZih0aGlzLCBlKSB8fCB0LmZyb3plbi5kZWxldGUoZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5mKHRoaXMsIGUpCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgaGFzOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHlmKGUpICYmICFFZihlKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG1mKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5mcm96ZW4gfHwgKHQuZnJvemVuID0gbmV3IGxmKSwKICAgICAgICAgICAgICAgICAgICAgICAgUGYodGhpcywgZSkgfHwgdC5mcm96ZW4uaGFzKGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBQZih0aGlzLCBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIGlmICh5ZihlKSAmJiAhRWYoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBtZih0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuZnJvemVuIHx8ICh0LmZyb3plbiA9IG5ldyBsZiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQZih0aGlzLCBlKSA/IElmKHRoaXMsIGUpIDogdC5mcm96ZW4uZ2V0KGUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBJZih0aGlzLCBlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGlmICh5ZihlKSAmJiAhRWYoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBtZih0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgci5mcm96ZW4gfHwgKHIuZnJvemVuID0gbmV3IGxmKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBmKHRoaXMsIGUpID8gUmYodGhpcywgZSwgdCkgOiByLmZyb3plbi5zZXQoZSwgdCkKICAgICAgICAgICAgICAgICAgICB9IGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgUmYodGhpcywgZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9IGVsc2UKICAgICAgICAgICAgZmYgJiYgd2YoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gT2YoW10pOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBSZihuZXcgamYsIGUsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAhQWYoZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSkgJiYgdmYoTWYsIHsKICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBTZihlKSAmJiAoQWYoZSkgPyByID0gT2YgOiBDZihlKSAmJiAociA9IFRmKSksCiAgICAgICAgICAgICAgICAgICAgICAgIFJmKHRoaXMsIGUsIHQpLAogICAgICAgICAgICAgICAgICAgIHIgJiYgcihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgIHZhciBMZiA9IGVlLldlYWtNYXAKICAgICAgICAsIHpmID0gQWUKICAgICAgICAsIEdmID0gVHlwZUVycm9yCiAgICAgICAgLCBIZiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgImhhcyJpbiBlICYmICJnZXQiaW4gZSAmJiAic2V0ImluIGUpCiAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgIHRocm93IG5ldyBHZih6ZihlKSArICIgaXMgbm90IGEgd2Vha21hcCIpCiAgICB9CiAgICAgICAgLCBGZiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gMSA9PT0gdCA/IGZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0W2VdKHIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgOiBmdW5jdGlvbih0LCByLCBuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdFtlXShyLCBuKQogICAgICAgICAgICB9CiAgICB9CiAgICAgICAgLCBVZiA9IHsKICAgICAgICBXZWFrTWFwOiBvZSgiV2Vha01hcCIpLAogICAgICAgIHNldDogRmYoInNldCIsIDIpLAogICAgICAgIGdldDogRmYoImdldCIsIDEpLAogICAgICAgIGhhczogRmYoImhhcyIsIDEpLAogICAgICAgIHJlbW92ZTogRmYoImRlbGV0ZSIsIDEpCiAgICB9CiAgICAgICAgLCBZZiA9IEhmCiAgICAgICAgLCBKZiA9IFVmLmdldAogICAgICAgICwgV2YgPSBVZi5oYXMKICAgICAgICAsIFhmID0gVWYuc2V0OwogICAgVHIoewogICAgICAgIHRhcmdldDogIldlYWtNYXAiLAogICAgICAgIHByb3RvOiAhMCwKICAgICAgICByZWFsOiAhMCwKICAgICAgICBmb3JjZWQ6ICEwCiAgICB9LCB7CiAgICAgICAgZW1wbGFjZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgciwgbiwgYSA9IFlmKHRoaXMpOwogICAgICAgICAgICByZXR1cm4gV2YoYSwgZSkgPyAociA9IEpmKGEsIGUpLAogICAgICAgICAgICAidXBkYXRlImluIHQgJiYgKHIgPSB0LnVwZGF0ZShyLCBlLCBhKSwKICAgICAgICAgICAgICAgIFhmKGEsIGUsIHIpKSwKICAgICAgICAgICAgICAgIHIpIDogKG4gPSB0Lmluc2VydChlLCBhKSwKICAgICAgICAgICAgICAgIFhmKGEsIGUsIG4pLAogICAgICAgICAgICAgICAgbikKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBLZiA9IFZ0CiAgICAgICAgLCBxZiA9IG5yCiAgICAgICAgLCBaZiA9IHFlCiAgICAgICAgLCBWZiA9IEVoCiAgICAgICAgLCBRZiA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24obikgewogICAgICAgICAgICB2YXIgYSA9IFpmKG4pCiAgICAgICAgICAgICAgICAsIG8gPSBhcmd1bWVudHMubGVuZ3RoCiAgICAgICAgICAgICAgICAsIHMgPSBvID4gMSA/IGFyZ3VtZW50c1sxXSA6IHZvaWQgMAogICAgICAgICAgICAgICAgLCBjID0gdm9pZCAwICE9PSBzCiAgICAgICAgICAgICAgICAsIGkgPSBjID8gS2YocywgbyA+IDIgPyBhcmd1bWVudHNbMl0gOiB2b2lkIDApIDogdm9pZCAwCiAgICAgICAgICAgICAgICAsIHUgPSBuZXcgZQogICAgICAgICAgICAgICAgLCBsID0gMDsKICAgICAgICAgICAgcmV0dXJuIFZmKGEsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBjID8gaShlLCBsKyspIDogZTsKICAgICAgICAgICAgICAgICAgICByID8gdCh1LCBxZihuKVswXSwgblsxXSkgOiB0KHUsIG4pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgdQogICAgICAgIH0KICAgIH07CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiV2Vha01hcCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiAhMAogICAgfSwgewogICAgICAgIGZyb206IFFmKFVmLldlYWtNYXAsIFVmLnNldCwgITApCiAgICB9KTsKICAgIHZhciAkZiA9IG5yCiAgICAgICAgLCBlZyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGZvciAodmFyIG4gPSBuZXcgZSwgYSA9IGFyZ3VtZW50cy5sZW5ndGgsIG8gPSAwOyBvIDwgYTsgbysrKSB7CiAgICAgICAgICAgICAgICB2YXIgcyA9IGFyZ3VtZW50c1tvXTsKICAgICAgICAgICAgICAgIHIgPyB0KG4sICRmKHMpWzBdLCBzWzFdKSA6IHQobiwgcykKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gbgogICAgICAgIH0KICAgIH07CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiV2Vha01hcCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiAhMAogICAgfSwgewogICAgICAgIG9mOiBlZyhVZi5XZWFrTWFwLCBVZi5zZXQsICEwKQogICAgfSk7CiAgICB2YXIgdGcgPSBIZgogICAgICAgICwgcmcgPSBVZi5yZW1vdmU7CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiV2Vha01hcCIsCiAgICAgICAgcHJvdG86ICEwLAogICAgICAgIHJlYWw6ICEwLAogICAgICAgIGZvcmNlZDogITAKICAgIH0sIHsKICAgICAgICBkZWxldGVBbGw6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBmb3IgKHZhciBlLCB0ID0gdGcodGhpcyksIHIgPSAhMCwgbiA9IDAsIGEgPSBhcmd1bWVudHMubGVuZ3RoOyBuIDwgYTsgbisrKQogICAgICAgICAgICAgICAgZSA9IHJnKHQsIGFyZ3VtZW50c1tuXSksCiAgICAgICAgICAgICAgICAgICAgciA9IHIgJiYgZTsKICAgICAgICAgICAgcmV0dXJuICEhcgogICAgICAgIH0KICAgIH0pOwogICAgdmFyIG5nID0gagogICAgICAgICwgYWcgPSBEZQogICAgICAgICwgb2cgPSBDCiAgICAgICAgLCBzZyA9IG5yCiAgICAgICAgLCBjZyA9IFR5cGVFcnJvcgogICAgICAgICwgaWcgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIsIG4gPSBzZyh0aGlzKSwgYSA9IGFnKG4uZ2V0KSwgbyA9IGFnKG4uaGFzKSwgcyA9IGFnKG4uc2V0KSwgYyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyID8gYXJndW1lbnRzWzJdIDogdm9pZCAwOwogICAgICAgIGlmICghb2codCkgJiYgIW9nKGMpKQogICAgICAgICAgICB0aHJvdyBuZXcgY2coIkF0IGxlYXN0IG9uZSBjYWxsYmFjayByZXF1aXJlZCIpOwogICAgICAgIHJldHVybiBuZyhvLCBuLCBlKSA/IChyID0gbmcoYSwgbiwgZSksCiAgICAgICAgb2codCkgJiYgKHIgPSB0KHIpLAogICAgICAgICAgICBuZyhzLCBuLCBlLCByKSkpIDogb2coYykgJiYgKHIgPSBjKCksCiAgICAgICAgICAgIG5nKHMsIG4sIGUsIHIpKSwKICAgICAgICAgICAgcgogICAgfTsKICAgIFRyKHsKICAgICAgICB0YXJnZXQ6ICJXZWFrTWFwIiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgcmVhbDogITAsCiAgICAgICAgZm9yY2VkOiAhMAogICAgfSwgewogICAgICAgIHVwc2VydDogaWcKICAgIH0pOwogICAgdmFyIHVnID0gTGYKICAgICAgICAsIGxnID0gewogICAgICAgIGV4cG9ydHM6IHt9CiAgICB9CiAgICAgICAgLCBoZyA9IFRyCiAgICAgICAgLCBmZyA9IFQKICAgICAgICAsIGdnID0gUXQuZjsKICAgIGhnKHsKICAgICAgICB0YXJnZXQ6ICJPYmplY3QiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogT2JqZWN0LmRlZmluZVByb3BlcnR5ICE9PSBnZywKICAgICAgICBzaGFtOiAhZmcKICAgIH0sIHsKICAgICAgICBkZWZpbmVQcm9wZXJ0eTogZ2cKICAgIH0pOwogICAgdmFyIHBnID0gZWUuT2JqZWN0CiAgICAgICAgLCB2ZyA9IGxnLmV4cG9ydHMgPSBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgIHJldHVybiBwZy5kZWZpbmVQcm9wZXJ0eShlLCB0LCByKQogICAgICAgIH0KICAgIDsKICAgIHBnLmRlZmluZVByb3BlcnR5LnNoYW0gJiYgKHZnLnNoYW0gPSAhMCk7CiAgICB2YXIgYmcgPSBsZy5leHBvcnRzCiAgICAgICAgLCBkZyA9IGJnCiAgICAgICAgLCBrZyA9IGJnCiAgICAgICAgLCB5ZyA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgbWcgPSBUcgogICAgICAgICwgd2cgPSBjCiAgICAgICAgLCBfZyA9IFYKICAgICAgICAsIHhnID0gTy5mCiAgICAgICAgLCBTZyA9IFQ7CiAgICBtZyh7CiAgICAgICAgdGFyZ2V0OiAiT2JqZWN0IiwKICAgICAgICBzdGF0OiAhMCwKICAgICAgICBmb3JjZWQ6ICFTZyB8fCB3ZygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB4ZygxKQogICAgICAgICAgICB9CiAgICAgICAgKSksCiAgICAgICAgc2hhbTogIVNnCiAgICB9LCB7CiAgICAgICAgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiB4ZyhfZyhlKSwgdCkKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBFZyA9IGVlLk9iamVjdAogICAgICAgICwgQWcgPSB5Zy5leHBvcnRzID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICByZXR1cm4gRWcuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHQpCiAgICAgICAgfQogICAgOwogICAgRWcuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLnNoYW0gJiYgKEFnLnNoYW0gPSAhMCk7CiAgICB2YXIgQ2csIE9nID0geWcuZXhwb3J0cywgVGcgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICBmdW5jdGlvbiBEZyhlKSB7CiAgICAgICAgcmV0dXJuIERnID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZWwgJiYgInN5bWJvbCIgPT0gdHlwZW9mIGtsID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBlbCAmJiBlLmNvbnN0cnVjdG9yID09PSBlbCAmJiBlICE9PSBlbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgLAogICAgICAgICAgICBEZyhlKQogICAgfQogICAgKENnID0gVGcpLmV4cG9ydHMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICAgICAgZGVmYXVsdDogZQogICAgICAgIH0KICAgIH0KICAgICAgICAsCiAgICAgICAgQ2cuZXhwb3J0cy5fX2VzTW9kdWxlID0gITAsCiAgICAgICAgQ2cuZXhwb3J0cy5kZWZhdWx0ID0gQ2cuZXhwb3J0czsKICAgIHZhciBCZyA9IHM7CiAgICBUcih7CiAgICAgICAgZ2xvYmFsOiAhMCwKICAgICAgICBmb3JjZWQ6IEJnLmdsb2JhbFRoaXMgIT09IEJnCiAgICB9LCB7CiAgICAgICAgZ2xvYmFsVGhpczogQmcKICAgIH0pOwogICAgdmFyIGpnID0gcwogICAgICAgICwgTWcgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiT2JqZWN0IiwKICAgICAgICBzdGF0OiAhMCwKICAgICAgICBzaGFtOiAhVAogICAgfSwgewogICAgICAgIGNyZWF0ZTogR2EKICAgIH0pOwogICAgdmFyIFJnID0gZWUuT2JqZWN0CiAgICAgICAgLCBOZyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICByZXR1cm4gUmcuY3JlYXRlKGUsIHQpCiAgICB9CiAgICAgICAgLCBQZyA9IHFlCiAgICAgICAgLCBJZyA9IHhpCiAgICAgICAgLCBMZyA9IHZpOwogICAgVHIoewogICAgICAgIHRhcmdldDogIk9iamVjdCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiBjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIElnKDEpCiAgICAgICAgICAgIH0KICAgICAgICApKSwKICAgICAgICBzaGFtOiAhTGcKICAgIH0sIHsKICAgICAgICBnZXRQcm90b3R5cGVPZjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gSWcoUGcoZSkpCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgemcgPSBlZS5PYmplY3QuZ2V0UHJvdG90eXBlT2YKICAgICAgICAsIEdnID0gYwogICAgICAgICwgSGcgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciByID0gW11bZV07CiAgICAgICAgICAgIHJldHVybiAhIXIgJiYgR2coKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHIuY2FsbChudWxsLCB0IHx8IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLCAxKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKQogICAgICAgIH0KICAgICAgICAsIEZnID0gVm8uZm9yRWFjaAogICAgICAgICwgVWcgPSBIZygiZm9yRWFjaCIpID8gW10uZm9yRWFjaCA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIEZnKHRoaXMsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKQogICAgICAgIH0KICAgIDsKICAgIFRyKHsKICAgICAgICB0YXJnZXQ6ICJBcnJheSIsCiAgICAgICAgcHJvdG86ICEwLAogICAgICAgIGZvcmNlZDogW10uZm9yRWFjaCAhPT0gVWcKICAgIH0sIHsKICAgICAgICBmb3JFYWNoOiBVZwogICAgfSk7CiAgICB2YXIgWWcgPSBzCiAgICAgICAgLCBKZyA9IGVlCiAgICAgICAgLCBXZyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciA9IEpnW2UgKyAiUHJvdG90eXBlIl0KICAgICAgICAgICAgLCBuID0gciAmJiByW3RdOwogICAgICAgIGlmIChuKQogICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB2YXIgYSA9IFlnW2VdCiAgICAgICAgICAgICwgbyA9IGEgJiYgYS5wcm90b3R5cGU7CiAgICAgICAgcmV0dXJuIG8gJiYgb1t0XQogICAgfQogICAgICAgICwgWGcgPSBXZygiQXJyYXkiLCAiZm9yRWFjaCIpCiAgICAgICAgLCBLZyA9IHRuCiAgICAgICAgLCBxZyA9IFFlCiAgICAgICAgLCBaZyA9IHNlCiAgICAgICAgLCBWZyA9IFhnCiAgICAgICAgLCBRZyA9IEFycmF5LnByb3RvdHlwZQogICAgICAgICwgJGcgPSB7CiAgICAgICAgRE9NVG9rZW5MaXN0OiAhMCwKICAgICAgICBOb2RlTGlzdDogITAKICAgIH0KICAgICAgICAsIGVwID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5mb3JFYWNoOwogICAgICAgIHJldHVybiBlID09PSBRZyB8fCBaZyhRZywgZSkgJiYgdCA9PT0gUWcuZm9yRWFjaCB8fCBxZygkZywgS2coZSkpID8gVmcgOiB0CiAgICB9CiAgICAgICAgLCB0cCA9IFQKICAgICAgICAsIHJwID0gQnIKICAgICAgICAsIG5wID0gVHlwZUVycm9yCiAgICAgICAgLCBhcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IKICAgICAgICAsIG9wID0gdHAgJiYgIWZ1bmN0aW9uKCkgewogICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMpCiAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICB0cnkgewogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoW10sICJsZW5ndGgiLCB7CiAgICAgICAgICAgICAgICB3cml0YWJsZTogITEKICAgICAgICAgICAgfSkubGVuZ3RoID0gMQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBUeXBlRXJyb3IKICAgICAgICB9CiAgICB9KCkgPyBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmIChycChlKSAmJiAhYXAoZSwgImxlbmd0aCIpLndyaXRhYmxlKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IG5wKCJDYW5ub3Qgc2V0IHJlYWQgb25seSAubGVuZ3RoIik7CiAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aCA9IHQKICAgICAgICB9CiAgICAgICAgOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aCA9IHQKICAgICAgICB9CiAgICAgICAgLCBzcCA9IHFlCiAgICAgICAgLCBjcCA9IEdyCiAgICAgICAgLCBpcCA9IG9wCiAgICAgICAgLCB1cCA9IEZyOwogICAgVHIoewogICAgICAgIHRhcmdldDogIkFycmF5IiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgYXJpdHk6IDEsCiAgICAgICAgZm9yY2VkOiBjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiA0Mjk0OTY3Mjk3ICE9PSBbXS5wdXNoLmNhbGwoewogICAgICAgICAgICAgICAgICAgIGxlbmd0aDogNDI5NDk2NzI5NgogICAgICAgICAgICAgICAgfSwgMSkKICAgICAgICAgICAgfQogICAgICAgICkpIHx8ICFmdW5jdGlvbigpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShbXSwgImxlbmd0aCIsIHsKICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITEKICAgICAgICAgICAgICAgIH0pLnB1c2goKQogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIFR5cGVFcnJvcgogICAgICAgICAgICB9CiAgICAgICAgfSgpCiAgICB9LCB7CiAgICAgICAgcHVzaDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IHNwKHRoaXMpCiAgICAgICAgICAgICAgICAsIHIgPSBjcCh0KQogICAgICAgICAgICAgICAgLCBuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgICAgICAgdXAociArIG4pOwogICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IG47IGErKykKICAgICAgICAgICAgICAgIHRbcl0gPSBhcmd1bWVudHNbYV0sCiAgICAgICAgICAgICAgICAgICAgcisrOwogICAgICAgICAgICByZXR1cm4gaXAodCwgciksCiAgICAgICAgICAgICAgICByCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgbHAgPSBXZygiQXJyYXkiLCAicHVzaCIpCiAgICAgICAgLCBocCA9IHNlCiAgICAgICAgLCBmcCA9IGxwCiAgICAgICAgLCBncCA9IEFycmF5LnByb3RvdHlwZQogICAgICAgICwgcHAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLnB1c2g7CiAgICAgICAgcmV0dXJuIGUgPT09IGdwIHx8IGhwKGdwLCBlKSAmJiB0ID09PSBncC5wdXNoID8gZnAgOiB0CiAgICB9OwogICAgVHIoewogICAgICAgIHRhcmdldDogIk9iamVjdCIsCiAgICAgICAgc3RhdDogITAKICAgIH0sIHsKICAgICAgICBzZXRQcm90b3R5cGVPZjogWmkKICAgIH0pOwogICAgdmFyIHZwID0gZWUuT2JqZWN0LnNldFByb3RvdHlwZU9mCiAgICAgICAgLCBicCA9IG9lCiAgICAgICAgLCBkcCA9IEhhCiAgICAgICAgLCBrcCA9IFZhCiAgICAgICAgLCB5cCA9IG5yCiAgICAgICAgLCBtcCA9IGsoW10uY29uY2F0KQogICAgICAgICwgd3AgPSBicCgiUmVmbGVjdCIsICJvd25LZXlzIikgfHwgZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZHAuZih5cChlKSkKICAgICAgICAgICAgLCByID0ga3AuZjsKICAgICAgICByZXR1cm4gciA/IG1wKHQsIHIoZSkpIDogdAogICAgfQogICAgICAgICwgX3AgPSBRZQogICAgICAgICwgeHAgPSB3cAogICAgICAgICwgU3AgPSBPCiAgICAgICAgLCBFcCA9IFF0CiAgICAgICAgLCBBcCA9ICQKICAgICAgICAsIENwID0gZHIKICAgICAgICAsIE9wID0gRXJyb3IKICAgICAgICAsIFRwID0gaygiIi5yZXBsYWNlKQogICAgICAgICwgRHAgPSBTdHJpbmcobmV3IE9wKCJ6eGNhc2QiKS5zdGFjaykKICAgICAgICAsIEJwID0gL1xuXHMqYXQgW146XSo6W15cbl0qLwogICAgICAgICwganAgPSBCcC50ZXN0KERwKQogICAgICAgICwgTXAgPSB6CiAgICAgICAgLCBScCA9ICFjKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXJyb3IoImEiKTsKICAgICAgICAgICAgcmV0dXJuICEoInN0YWNrImluIGUpIHx8IChPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgInN0YWNrIiwgTXAoMSwgNykpLAogICAgICAgICAgICA3ICE9PSBlLnN0YWNrKQogICAgICAgIH0KICAgICkpCiAgICAgICAgLCBOcCA9IGRyCiAgICAgICAgLCBQcCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICBpZiAoanAgJiYgInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgIU9wLnByZXBhcmVTdGFja1RyYWNlKQogICAgICAgICAgICBmb3IgKDsgdC0tOyApCiAgICAgICAgICAgICAgICBlID0gVHAoZSwgQnAsICIiKTsKICAgICAgICByZXR1cm4gZQogICAgfQogICAgICAgICwgSXAgPSBScAogICAgICAgICwgTHAgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZQogICAgICAgICwgenAgPSBLbgogICAgICAgICwgR3AgPSBUcgogICAgICAgICwgSHAgPSBzZQogICAgICAgICwgRnAgPSB4aQogICAgICAgICwgVXAgPSBaaQogICAgICAgICwgWXAgPSBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgZm9yICh2YXIgbiA9IHhwKHQpLCBhID0gRXAuZiwgbyA9IFNwLmYsIHMgPSAwOyBzIDwgbi5sZW5ndGg7IHMrKykgewogICAgICAgICAgICB2YXIgYyA9IG5bc107CiAgICAgICAgICAgIF9wKGUsIGMpIHx8IHIgJiYgX3AociwgYykgfHwgYShlLCBjLCBvKHQsIGMpKQogICAgICAgIH0KICAgIH0KICAgICAgICAsIEpwID0gR2EKICAgICAgICAsIFdwID0gZHIKICAgICAgICAsIFhwID0gegogICAgICAgICwgS3AgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgQXAodCkgJiYgImNhdXNlImluIHQgJiYgQ3AoZSwgImNhdXNlIiwgdC5jYXVzZSkKICAgIH0KICAgICAgICAsIHFwID0gZnVuY3Rpb24oZSwgdCwgciwgbikgewogICAgICAgIElwICYmIChMcCA/IExwKGUsIHQpIDogTnAoZSwgInN0YWNrIiwgUHAociwgbikpKQogICAgfQogICAgICAgICwgWnAgPSBFaAogICAgICAgICwgVnAgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gZSA/IGFyZ3VtZW50cy5sZW5ndGggPCAyID8gIiIgOiB0IDogenAoZSkKICAgIH0KICAgICAgICAsIFFwID0gZnQoInRvU3RyaW5nVGFnIikKICAgICAgICAsICRwID0gRXJyb3IKICAgICAgICAsIGV2ID0gW10ucHVzaAogICAgICAgICwgdHYgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIsIG4gPSBIcChydiwgdGhpcyk7CiAgICAgICAgVXAgPyByID0gVXAobmV3ICRwLCBuID8gRnAodGhpcykgOiBydikgOiAociA9IG4gPyB0aGlzIDogSnAocnYpLAogICAgICAgICAgICBXcChyLCBRcCwgIkVycm9yIikpLAogICAgICAgIHZvaWQgMCAhPT0gdCAmJiBXcChyLCAibWVzc2FnZSIsIFZwKHQpKSwKICAgICAgICAgICAgcXAociwgdHYsIHIuc3RhY2ssIDEpLAogICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIEtwKHIsIGFyZ3VtZW50c1syXSk7CiAgICAgICAgdmFyIGEgPSBbXTsKICAgICAgICByZXR1cm4gWnAoZSwgZXYsIHsKICAgICAgICAgICAgdGhhdDogYQogICAgICAgIH0pLAogICAgICAgICAgICBXcChyLCAiZXJyb3JzIiwgYSksCiAgICAgICAgICAgIHIKICAgIH07CiAgICBVcCA/IFVwKHR2LCAkcCkgOiBZcCh0diwgJHAsIHsKICAgICAgICBuYW1lOiAhMAogICAgfSk7CiAgICB2YXIgcnYgPSB0di5wcm90b3R5cGUgPSBKcCgkcC5wcm90b3R5cGUsIHsKICAgICAgICBjb25zdHJ1Y3RvcjogWHAoMSwgdHYpLAogICAgICAgIG1lc3NhZ2U6IFhwKDEsICIiKSwKICAgICAgICBuYW1lOiBYcCgxLCAiQWdncmVnYXRlRXJyb3IiKQogICAgfSk7CiAgICBHcCh7CiAgICAgICAgZ2xvYmFsOiAhMCwKICAgICAgICBjb25zdHJ1Y3RvcjogITAsCiAgICAgICAgYXJpdHk6IDIKICAgIH0sIHsKICAgICAgICBBZ2dyZWdhdGVFcnJvcjogdHYKICAgIH0pOwogICAgdmFyIG52LCBhdiwgb3YsIHN2LCBjdiA9ICJwcm9jZXNzIiA9PT0gXyhzLnByb2Nlc3MpLCBpdiA9IG9lLCB1diA9IHRvLCBsdiA9IFQsIGh2ID0gZnQoInNwZWNpZXMiKSwgZnYgPSBtbiwgZ3YgPSBBZSwgcHYgPSBUeXBlRXJyb3IsIHZ2ID0gbnIsIGJ2ID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmIChmdihlKSkKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgdGhyb3cgbmV3IHB2KGd2KGUpICsgIiBpcyBub3QgYSBjb25zdHJ1Y3RvciIpCiAgICB9LCBkdiA9IEosIGt2ID0gZnQoInNwZWNpZXMiKSwgeXYgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIsIG4gPSB2dihlKS5jb25zdHJ1Y3RvcjsKICAgICAgICByZXR1cm4gdm9pZCAwID09PSBuIHx8IGR2KHIgPSB2dihuKVtrdl0pID8gdCA6IGJ2KHIpCiAgICB9LCBtdiA9IFR5cGVFcnJvciwgd3YgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgaWYgKGUgPCB0KQogICAgICAgICAgICB0aHJvdyBuZXcgbXYoIk5vdCBlbm91Z2ggYXJndW1lbnRzIik7CiAgICAgICAgcmV0dXJuIGUKICAgIH0sIF92ID0gLyg/OmlwYWR8aXBob25lfGlwb2QpLiphcHBsZXdlYmtpdC9pLnRlc3QoY2UpLCB4diA9IHMsIFN2ID0gZywgRXYgPSBWdCwgQXYgPSBDLCBDdiA9IFFlLCBPdiA9IGMsIFR2ID0geGEsIER2ID0gSmEsIEJ2ID0gQ3QsIGp2ID0gd3YsIE12ID0gX3YsIFJ2ID0gY3YsIE52ID0geHYuc2V0SW1tZWRpYXRlLCBQdiA9IHh2LmNsZWFySW1tZWRpYXRlLCBJdiA9IHh2LnByb2Nlc3MsIEx2ID0geHYuRGlzcGF0Y2gsIHp2ID0geHYuRnVuY3Rpb24sIEd2ID0geHYuTWVzc2FnZUNoYW5uZWwsIEh2ID0geHYuU3RyaW5nLCBGdiA9IDAsIFV2ID0ge30sIFl2ID0gIm9ucmVhZHlzdGF0ZWNoYW5nZSI7CiAgICBPdigoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIG52ID0geHYubG9jYXRpb24KICAgICAgICB9CiAgICApKTsKICAgIHZhciBKdiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBpZiAoQ3YoVXYsIGUpKSB7CiAgICAgICAgICAgIHZhciB0ID0gVXZbZV07CiAgICAgICAgICAgIGRlbGV0ZSBVdltlXSwKICAgICAgICAgICAgICAgIHQoKQogICAgICAgIH0KICAgIH0KICAgICAgICAsIFd2ID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgSnYoZSkKICAgICAgICB9CiAgICB9CiAgICAgICAgLCBYdiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICBKdihlLmRhdGEpCiAgICB9CiAgICAgICAgLCBLdiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB4di5wb3N0TWVzc2FnZShIdihlKSwgbnYucHJvdG9jb2wgKyAiLy8iICsgbnYuaG9zdCkKICAgIH07CiAgICBOdiAmJiBQdiB8fCAoTnYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGp2KGFyZ3VtZW50cy5sZW5ndGgsIDEpOwogICAgICAgICAgICB2YXIgdCA9IEF2KGUpID8gZSA6IHp2KGUpCiAgICAgICAgICAgICAgICAsIHIgPSBEdihhcmd1bWVudHMsIDEpOwogICAgICAgICAgICByZXR1cm4gVXZbKytGdl0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIFN2KHQsIHZvaWQgMCwgcikKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgYXYoRnYpLAogICAgICAgICAgICAgICAgRnYKICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgUHYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgVXZbZV0KICAgICAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgIFJ2ID8gYXYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgSXYubmV4dFRpY2soV3YoZSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICA6IEx2ICYmIEx2Lm5vdyA/IGF2ID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBMdi5ub3coV3YoZSkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIDogR3YgJiYgIU12ID8gKHN2ID0gKG92ID0gbmV3IEd2KS5wb3J0MiwKICAgICAgICAgICAgICAgICAgICAgICAgb3YucG9ydDEub25tZXNzYWdlID0gWHYsCiAgICAgICAgICAgICAgICAgICAgICAgIGF2ID0gRXYoc3YucG9zdE1lc3NhZ2UsIHN2KSkgOiB4di5hZGRFdmVudExpc3RlbmVyICYmIEF2KHh2LnBvc3RNZXNzYWdlKSAmJiAheHYuaW1wb3J0U2NyaXB0cyAmJiBudiAmJiAiZmlsZToiICE9PSBudi5wcm90b2NvbCAmJiAhT3YoS3YpID8gKGF2ID0gS3YsCiAgICAgICAgICAgICAgICAgICAgICAgIHh2LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBYdiwgITEpKSA6IGF2ID0gWXYgaW4gQnYoInNjcmlwdCIpID8gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVHYuYXBwZW5kQ2hpbGQoQnYoInNjcmlwdCIpKVtZdl0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUdi5yZW1vdmVDaGlsZCh0aGlzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSnYoZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoV3YoZSksIDApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICk7CiAgICB2YXIgcXYgPSB7CiAgICAgICAgc2V0OiBOdiwKICAgICAgICBjbGVhcjogUHYKICAgIH0KICAgICAgICAsIFp2ID0gcwogICAgICAgICwgVnYgPSBUCiAgICAgICAgLCBRdiA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IKICAgICAgICAsICR2ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5oZWFkID0gbnVsbCwKICAgICAgICAgICAgdGhpcy50YWlsID0gbnVsbAogICAgfTsKICAgICR2LnByb3RvdHlwZSA9IHsKICAgICAgICBhZGQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSB7CiAgICAgICAgICAgICAgICBpdGVtOiBlLAogICAgICAgICAgICAgICAgbmV4dDogbnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsIHIgPSB0aGlzLnRhaWw7CiAgICAgICAgICAgIHIgPyByLm5leHQgPSB0IDogdGhpcy5oZWFkID0gdCwKICAgICAgICAgICAgICAgIHRoaXMudGFpbCA9IHQKICAgICAgICB9LAogICAgICAgIGdldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0gdGhpcy5oZWFkOwogICAgICAgICAgICBpZiAoZSkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsID09PSAodGhpcy5oZWFkID0gZS5uZXh0KSAmJiAodGhpcy50YWlsID0gbnVsbCksCiAgICAgICAgICAgICAgICAgICAgZS5pdGVtCiAgICAgICAgfQogICAgfTsKICAgIHZhciBlYiwgdGIsIHJiLCBuYiwgYWIsIG9iID0gJHYsIHNiID0gL2lwYWR8aXBob25lfGlwb2QvaS50ZXN0KGNlKSAmJiAidW5kZWZpbmVkIiAhPSB0eXBlb2YgUGViYmxlLCBjYiA9IC93ZWIwcyg/IS4qY2hyb21lKS9pLnRlc3QoY2UpLCBpYiA9IHMsIHViID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmICghVnYpCiAgICAgICAgICAgIHJldHVybiBadltlXTsKICAgICAgICB2YXIgdCA9IFF2KFp2LCBlKTsKICAgICAgICByZXR1cm4gdCAmJiB0LnZhbHVlCiAgICB9LCBsYiA9IFZ0LCBoYiA9IHF2LnNldCwgZmIgPSBvYiwgZ2IgPSBfdiwgcGIgPSBzYiwgdmIgPSBjYiwgYmIgPSBjdiwgZGIgPSBpYi5NdXRhdGlvbk9ic2VydmVyIHx8IGliLldlYktpdE11dGF0aW9uT2JzZXJ2ZXIsIGtiID0gaWIuZG9jdW1lbnQsIHliID0gaWIucHJvY2VzcywgbWIgPSBpYi5Qcm9taXNlLCB3YiA9IHViKCJxdWV1ZU1pY3JvdGFzayIpOwogICAgaWYgKCF3YikgewogICAgICAgIHZhciBfYiA9IG5ldyBmYgogICAgICAgICAgICAsIHhiID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlLCB0OwogICAgICAgICAgICBmb3IgKGJiICYmIChlID0geWIuZG9tYWluKSAmJiBlLmV4aXQoKTsgdCA9IF9iLmdldCgpOyApCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHQoKQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIHRocm93IF9iLmhlYWQgJiYgZWIoKSwKICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBlICYmIGUuZW50ZXIoKQogICAgICAgIH07CiAgICAgICAgZ2IgfHwgYmIgfHwgdmIgfHwgIWRiIHx8ICFrYiA/ICFwYiAmJiBtYiAmJiBtYi5yZXNvbHZlID8gKChuYiA9IG1iLnJlc29sdmUodm9pZCAwKSkuY29uc3RydWN0b3IgPSBtYiwKICAgICAgICAgICAgICAgIGFiID0gbGIobmIudGhlbiwgbmIpLAogICAgICAgICAgICAgICAgZWIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhYih4YikKICAgICAgICAgICAgICAgIH0KICAgICAgICApIDogYmIgPyBlYiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgeWIubmV4dFRpY2soeGIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgOiAoaGIgPSBsYihoYiwgaWIpLAogICAgICAgICAgICAgICAgICAgIGViID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhiKHhiKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSA6ICh0YiA9ICEwLAogICAgICAgICAgICAgICAgcmIgPSBrYi5jcmVhdGVUZXh0Tm9kZSgiIiksCiAgICAgICAgICAgICAgICBuZXcgZGIoeGIpLm9ic2VydmUocmIsIHsKICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXJEYXRhOiAhMAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBlYiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJiLmRhdGEgPSB0YiA9ICF0YgogICAgICAgICAgICAgICAgfQogICAgICAgICksCiAgICAgICAgICAgIHdiID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgX2IuaGVhZCB8fCBlYigpLAogICAgICAgICAgICAgICAgICAgIF9iLmFkZChlKQogICAgICAgICAgICB9CiAgICB9CiAgICB2YXIgU2IgPSB3YgogICAgICAgICwgRWIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGVycm9yOiAhMSwKICAgICAgICAgICAgICAgIHZhbHVlOiBlKCkKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGVycm9yOiAhMCwKICAgICAgICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAgICAgLCBBYiA9IHMuUHJvbWlzZQogICAgICAgICwgQ2IgPSAib2JqZWN0IiA9PSB0eXBlb2YgRGVubyAmJiBEZW5vICYmICJvYmplY3QiID09IHR5cGVvZiBEZW5vLnZlcnNpb24KICAgICAgICAsIE9iID0gIUNiICYmICFjdiAmJiAib2JqZWN0IiA9PSB0eXBlb2Ygd2luZG93ICYmICJvYmplY3QiID09IHR5cGVvZiBkb2N1bWVudAogICAgICAgICwgVGIgPSBzCiAgICAgICAgLCBEYiA9IEFiCiAgICAgICAgLCBCYiA9IEMKICAgICAgICAsIGpiID0gWHQKICAgICAgICAsIE1iID0gc24KICAgICAgICAsIFJiID0gZnQKICAgICAgICAsIE5iID0gT2IKICAgICAgICAsIFBiID0gQ2IKICAgICAgICAsIEliID0gcGUKICAgICAgICAsIExiID0gRGIgJiYgRGIucHJvdG90eXBlCiAgICAgICAgLCB6YiA9IFJiKCJzcGVjaWVzIikKICAgICAgICAsIEdiID0gITEKICAgICAgICAsIEhiID0gQmIoVGIuUHJvbWlzZVJlamVjdGlvbkV2ZW50KQogICAgICAgICwgRmIgPSBqYigiUHJvbWlzZSIsIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGUgPSBNYihEYikKICAgICAgICAgICAgICAgICwgdCA9IGUgIT09IFN0cmluZyhEYik7CiAgICAgICAgICAgIGlmICghdCAmJiA2NiA9PT0gSWIpCiAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgIGlmICghTGIuY2F0Y2ggfHwgIUxiLmZpbmFsbHkpCiAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgIGlmICghSWIgfHwgSWIgPCA1MSB8fCAhL25hdGl2ZSBjb2RlLy50ZXN0KGUpKSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IG5ldyBEYigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBlKDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgICAgICAsIG4gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZSgoZnVuY3Rpb24oKSB7fQogICAgICAgICAgICAgICAgICAgICksIChmdW5jdGlvbigpIHt9CiAgICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBpZiAoKHIuY29uc3RydWN0b3IgPSB7fSlbemJdID0gbiwKICAgICAgICAgICAgICAgICAgICAhKEdiID0gci50aGVuKChmdW5jdGlvbigpIHt9CiAgICAgICAgICAgICAgICAgICAgKSlpbnN0YW5jZW9mIG4pKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMAogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAhdCAmJiAoTmIgfHwgUGIpICYmICFIYgogICAgICAgIH0KICAgICkpCiAgICAgICAgLCBVYiA9IHsKICAgICAgICBDT05TVFJVQ1RPUjogRmIsCiAgICAgICAgUkVKRUNUSU9OX0VWRU5UOiBIYiwKICAgICAgICBTVUJDTEFTU0lORzogR2IKICAgIH0KICAgICAgICAsIFliID0ge30KICAgICAgICAsIEpiID0gRGUKICAgICAgICAsIFdiID0gVHlwZUVycm9yCiAgICAgICAgLCBYYiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCwgcjsKICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgZSgoZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdCB8fCB2b2lkIDAgIT09IHIpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdiKCJCYWQgUHJvbWlzZSBjb25zdHJ1Y3RvciIpOwogICAgICAgICAgICAgICAgdCA9IGUsCiAgICAgICAgICAgICAgICAgICAgciA9IG4KICAgICAgICAgICAgfQogICAgICAgICkpLAogICAgICAgICAgICB0aGlzLnJlc29sdmUgPSBKYih0KSwKICAgICAgICAgICAgdGhpcy5yZWplY3QgPSBKYihyKQogICAgfTsKICAgIFliLmYgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIG5ldyBYYihlKQogICAgfQogICAgOwogICAgdmFyIEtiLCBxYiwgWmIgPSBUciwgVmIgPSBjdiwgUWIgPSBzLCAkYiA9IGosIGVkID0gJGEsIHRkID0gQW8sIHJkID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gaXYoZSk7CiAgICAgICAgbHYgJiYgdCAmJiAhdFtodl0gJiYgdXYodCwgaHYsIHsKICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgfSwgbmQgPSBEZSwgYWQgPSBDLCBvZCA9ICQsIHNkID0gT2gsIGNkID0geXYsIGlkID0gcXYuc2V0LCB1ZCA9IFNiLCBsZCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoID8gY29uc29sZS5lcnJvcihlKSA6IGNvbnNvbGUuZXJyb3IoZSwgdCkKICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgfSwgaGQgPSBFYiwgZmQgPSBvYiwgZ2QgPSBVbywgcGQgPSBBYiwgdmQgPSBZYiwgYmQgPSAiUHJvbWlzZSIsIGRkID0gVWIuQ09OU1RSVUNUT1IsIGtkID0gVWIuUkVKRUNUSU9OX0VWRU5ULCB5ZCA9IGdkLmdldHRlckZvcihiZCksIG1kID0gZ2Quc2V0LCB3ZCA9IHBkICYmIHBkLnByb3RvdHlwZSwgX2QgPSBwZCwgeGQgPSB3ZCwgU2QgPSBRYi5UeXBlRXJyb3IsIEVkID0gUWIuZG9jdW1lbnQsIEFkID0gUWIucHJvY2VzcywgQ2QgPSB2ZC5mLCBPZCA9IENkLCBUZCA9ICEhKEVkICYmIEVkLmNyZWF0ZUV2ZW50ICYmIFFiLmRpc3BhdGNoRXZlbnQpLCBEZCA9ICJ1bmhhbmRsZWRyZWplY3Rpb24iLCBCZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdDsKICAgICAgICByZXR1cm4gISghb2QoZSkgfHwgIWFkKHQgPSBlLnRoZW4pKSAmJiB0CiAgICB9LCBqZCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciwgbiwgYSwgbyA9IHQudmFsdWUsIHMgPSAxID09PSB0LnN0YXRlLCBjID0gcyA/IGUub2sgOiBlLmZhaWwsIGkgPSBlLnJlc29sdmUsIHUgPSBlLnJlamVjdCwgbCA9IGUuZG9tYWluOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGMgPyAocyB8fCAoMiA9PT0gdC5yZWplY3Rpb24gJiYgSWQodCksCiAgICAgICAgICAgICAgICB0LnJlamVjdGlvbiA9IDEpLAogICAgICAgICAgICAgICAgITAgPT09IGMgPyByID0gbyA6IChsICYmIGwuZW50ZXIoKSwKICAgICAgICAgICAgICAgICAgICByID0gYyhvKSwKICAgICAgICAgICAgICAgIGwgJiYgKGwuZXhpdCgpLAogICAgICAgICAgICAgICAgICAgIGEgPSAhMCkpLAogICAgICAgICAgICAgICAgciA9PT0gZS5wcm9taXNlID8gdShuZXcgU2QoIlByb21pc2UtY2hhaW4gY3ljbGUiKSkgOiAobiA9IEJkKHIpKSA/ICRiKG4sIHIsIGksIHUpIDogaShyKSkgOiB1KG8pCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICBsICYmICFhICYmIGwuZXhpdCgpLAogICAgICAgICAgICAgICAgdShlKQogICAgICAgIH0KICAgIH0sIE1kID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIGUubm90aWZpZWQgfHwgKGUubm90aWZpZWQgPSAhMCwKICAgICAgICAgICAgdWQoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIG4gPSBlLnJlYWN0aW9uczsgciA9IG4uZ2V0KCk7ICkKICAgICAgICAgICAgICAgICAgICAgICAgamQociwgZSk7CiAgICAgICAgICAgICAgICAgICAgZS5ub3RpZmllZCA9ICExLAogICAgICAgICAgICAgICAgICAgIHQgJiYgIWUucmVqZWN0aW9uICYmIE5kKGUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkpKQogICAgfSwgUmQgPSBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgdmFyIG4sIGE7CiAgICAgICAgVGQgPyAoKG4gPSBFZC5jcmVhdGVFdmVudCgiRXZlbnQiKSkucHJvbWlzZSA9IHQsCiAgICAgICAgICAgIG4ucmVhc29uID0gciwKICAgICAgICAgICAgbi5pbml0RXZlbnQoZSwgITEsICEwKSwKICAgICAgICAgICAgUWIuZGlzcGF0Y2hFdmVudChuKSkgOiBuID0gewogICAgICAgICAgICBwcm9taXNlOiB0LAogICAgICAgICAgICByZWFzb246IHIKICAgICAgICB9LAogICAgICAgICAgICAha2QgJiYgKGEgPSBRYlsib24iICsgZV0pID8gYShuKSA6IGUgPT09IERkICYmIGxkKCJVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24iLCByKQogICAgfSwgTmQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgJGIoaWQsIFFiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCwgciA9IGUuZmFjYWRlLCBuID0gZS52YWx1ZTsKICAgICAgICAgICAgICAgIGlmIChQZChlKSAmJiAodCA9IGhkKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgVmIgPyBBZC5lbWl0KCJ1bmhhbmRsZWRSZWplY3Rpb24iLCBuLCByKSA6IFJkKERkLCByLCBuKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgICAgIGUucmVqZWN0aW9uID0gVmIgfHwgUGQoZSkgPyAyIDogMSwKICAgICAgICAgICAgICAgICAgICB0LmVycm9yKSkKICAgICAgICAgICAgICAgICAgICB0aHJvdyB0LnZhbHVlCiAgICAgICAgICAgIH0KICAgICAgICApKQogICAgfSwgUGQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIDEgIT09IGUucmVqZWN0aW9uICYmICFlLnBhcmVudAogICAgfSwgSWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgJGIoaWQsIFFiLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZmFjYWRlOwogICAgICAgICAgICAgICAgVmIgPyBBZC5lbWl0KCJyZWplY3Rpb25IYW5kbGVkIiwgdCkgOiBSZCgicmVqZWN0aW9uaGFuZGxlZCIsIHQsIGUudmFsdWUpCiAgICAgICAgICAgIH0KICAgICAgICApKQogICAgfSwgTGQgPSBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgZSh0LCBuLCByKQogICAgICAgIH0KICAgIH0sIHpkID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIGUuZG9uZSB8fCAoZS5kb25lID0gITAsCiAgICAgICAgciAmJiAoZSA9IHIpLAogICAgICAgICAgICBlLnZhbHVlID0gdCwKICAgICAgICAgICAgZS5zdGF0ZSA9IDIsCiAgICAgICAgICAgIE1kKGUsICEwKSkKICAgIH0sIEdkID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIGlmICghZS5kb25lKSB7CiAgICAgICAgICAgIGUuZG9uZSA9ICEwLAogICAgICAgICAgICByICYmIChlID0gcik7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoZS5mYWNhZGUgPT09IHQpCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFNkKCJQcm9taXNlIGNhbid0IGJlIHJlc29sdmVkIGl0c2VsZiIpOwogICAgICAgICAgICAgICAgdmFyIG4gPSBCZCh0KTsKICAgICAgICAgICAgICAgIG4gPyB1ZCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRiKG4sIHQsIExkKEdkLCByLCBlKSwgTGQoemQsIHIsIGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ZChyLCB0LCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSkgOiAoZS52YWx1ZSA9IHQsCiAgICAgICAgICAgICAgICAgICAgZS5zdGF0ZSA9IDEsCiAgICAgICAgICAgICAgICAgICAgTWQoZSwgITEpKQogICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICB6ZCh7CiAgICAgICAgICAgICAgICAgICAgZG9uZTogITEKICAgICAgICAgICAgICAgIH0sIHQsIGUpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgZGQgJiYgKHhkID0gKF9kID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgc2QodGhpcywgeGQpLAogICAgICAgICAgICAgICAgICAgIG5kKGUpLAogICAgICAgICAgICAgICAgICAgICRiKEtiLCB0aGlzKTsKICAgICAgICAgICAgICAgIHZhciB0ID0geWQodGhpcyk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGUoTGQoR2QsIHQpLCBMZCh6ZCwgdCkpCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgemQodCwgZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICkucHJvdG90eXBlLAogICAgICAgICAgICAoS2IgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgbWQodGhpcywgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBiZCwKICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITEsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWVkOiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiAhMSwKICAgICAgICAgICAgICAgICAgICAgICAgcmVhY3Rpb25zOiBuZXcgZmQsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdGlvbjogITEsCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdm9pZCAwCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKS5wcm90b3R5cGUgPSBlZCh4ZCwgInRoZW4iLCAoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0geWQodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gQ2QoY2QodGhpcywgX2QpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5wYXJlbnQgPSAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgbi5vayA9ICFhZChlKSB8fCBlLAogICAgICAgICAgICAgICAgICAgICAgICBuLmZhaWwgPSBhZCh0KSAmJiB0LAogICAgICAgICAgICAgICAgICAgICAgICBuLmRvbWFpbiA9IFZiID8gQWQuZG9tYWluIDogdm9pZCAwLAogICAgICAgICAgICAgICAgICAgICAgICAwID09PSByLnN0YXRlID8gci5yZWFjdGlvbnMuYWRkKG4pIDogdWQoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpkKG4sIHIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgICAgICAgICBuLnByb21pc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSksCiAgICAgICAgICAgIHFiID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBLYgogICAgICAgICAgICAgICAgICAgICwgdCA9IHlkKGUpOwogICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlID0gZSwKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUgPSBMZChHZCwgdCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QgPSBMZCh6ZCwgdCkKICAgICAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgIHZkLmYgPSBDZCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlID09PSBfZCB8fCB1bmRlZmluZWQgPT09IGUgPyBuZXcgcWIoZSkgOiBPZChlKQogICAgICAgICAgICB9CiAgICApLAogICAgICAgIFpiKHsKICAgICAgICAgICAgZ2xvYmFsOiAhMCwKICAgICAgICAgICAgY29uc3RydWN0b3I6ICEwLAogICAgICAgICAgICB3cmFwOiAhMCwKICAgICAgICAgICAgZm9yY2VkOiBkZAogICAgICAgIH0sIHsKICAgICAgICAgICAgUHJvbWlzZTogX2QKICAgICAgICB9KSwKICAgICAgICB0ZChfZCwgYmQsICExLCAhMCksCiAgICAgICAgcmQoYmQpOwogICAgdmFyIEhkID0gZnQoIml0ZXJhdG9yIikKICAgICAgICAsIEZkID0gITE7CiAgICB0cnkgewogICAgICAgIHZhciBVZCA9IDAKICAgICAgICAgICAgLCBZZCA9IHsKICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIGRvbmU6ICEhVWQrKwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICByZXR1cm46IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgRmQgPSAhMAogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBZZFtIZF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgQXJyYXkuZnJvbShZZCwgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRocm93IDIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSkKICAgIH0gY2F0Y2ggKGUpIHt9CiAgICB2YXIgSmQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaWYgKCF0ICYmICFGZCkKICAgICAgICAgICAgICAgIHJldHVybiAhMQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuICExCiAgICAgICAgfQogICAgICAgIHZhciByID0gITE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIG4gPSB7fTsKICAgICAgICAgICAgbltIZF0gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiByID0gITAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgZShuKQogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgcmV0dXJuIHIKICAgIH0KICAgICAgICAsIFdkID0gQWIKICAgICAgICAsIFhkID0gVWIuQ09OU1RSVUNUT1IgfHwgIUpkKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIFdkLmFsbChlKS50aGVuKHZvaWQgMCwgKGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgKSkKICAgICAgICB9CiAgICApKQogICAgICAgICwgS2QgPSBqCiAgICAgICAgLCBxZCA9IERlCiAgICAgICAgLCBaZCA9IFliCiAgICAgICAgLCBWZCA9IEViCiAgICAgICAgLCBRZCA9IEVoOwogICAgVHIoewogICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogWGQKICAgIH0sIHsKICAgICAgICBhbGw6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzCiAgICAgICAgICAgICAgICAsIHIgPSBaZC5mKHQpCiAgICAgICAgICAgICAgICAsIG4gPSByLnJlc29sdmUKICAgICAgICAgICAgICAgICwgYSA9IHIucmVqZWN0CiAgICAgICAgICAgICAgICAsIG8gPSBWZCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBxZCh0LnJlc29sdmUpCiAgICAgICAgICAgICAgICAgICAgICAgICwgbyA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICwgcyA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgLCBjID0gMTsKICAgICAgICAgICAgICAgICAgICBRZChlLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBzKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHUgPSAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMrKywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLZChyLCB0LCBlKS50aGVuKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1IHx8ICh1ID0gITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tpXSA9IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWMgfHwgbihvKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIGEpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgICAtLWMgfHwgbihvKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKTsKICAgICAgICAgICAgcmV0dXJuIG8uZXJyb3IgJiYgYShvLnZhbHVlKSwKICAgICAgICAgICAgICAgIHIucHJvbWlzZQogICAgICAgIH0KICAgIH0pOwogICAgdmFyICRkID0gVHIKICAgICAgICAsIGVrID0gVWIuQ09OU1RSVUNUT1I7CiAgICBBYiAmJiBBYi5wcm90b3R5cGUsCiAgICAgICAgJGQoewogICAgICAgICAgICB0YXJnZXQ6ICJQcm9taXNlIiwKICAgICAgICAgICAgcHJvdG86ICEwLAogICAgICAgICAgICBmb3JjZWQ6IGVrLAogICAgICAgICAgICByZWFsOiAhMAogICAgICAgIH0sIHsKICAgICAgICAgICAgY2F0Y2g6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4odm9pZCAwLCBlKQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB2YXIgdGsgPSBqCiAgICAgICAgLCByayA9IERlCiAgICAgICAgLCBuayA9IFliCiAgICAgICAgLCBhayA9IEViCiAgICAgICAgLCBvayA9IEVoOwogICAgVHIoewogICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogWGQKICAgIH0sIHsKICAgICAgICByYWNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcwogICAgICAgICAgICAgICAgLCByID0gbmsuZih0KQogICAgICAgICAgICAgICAgLCBuID0gci5yZWplY3QKICAgICAgICAgICAgICAgICwgYSA9IGFrKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHJrKHQucmVzb2x2ZSk7CiAgICAgICAgICAgICAgICAgICAgb2soZSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRrKGEsIHQsIGUpLnRoZW4oci5yZXNvbHZlLCBuKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIHJldHVybiBhLmVycm9yICYmIG4oYS52YWx1ZSksCiAgICAgICAgICAgICAgICByLnByb21pc2UKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBzayA9IFliOwogICAgVHIoewogICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogVWIuQ09OU1RSVUNUT1IKICAgIH0sIHsKICAgICAgICByZWplY3Q6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBzay5mKHRoaXMpOwogICAgICAgICAgICByZXR1cm4gKDAsCiAgICAgICAgICAgICAgICB0LnJlamVjdCkoZSksCiAgICAgICAgICAgICAgICB0LnByb21pc2UKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBjayA9IG5yCiAgICAgICAgLCBpayA9ICQKICAgICAgICAsIHVrID0gWWIKICAgICAgICAsIGxrID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgIGlmIChjayhlKSwKICAgICAgICBpayh0KSAmJiB0LmNvbnN0cnVjdG9yID09PSBlKQogICAgICAgICAgICByZXR1cm4gdDsKICAgICAgICB2YXIgciA9IHVrLmYoZSk7CiAgICAgICAgcmV0dXJuICgwLAogICAgICAgICAgICByLnJlc29sdmUpKHQpLAogICAgICAgICAgICByLnByb21pc2UKICAgIH0KICAgICAgICAsIGhrID0gVHIKICAgICAgICAsIGZrID0gQWIKICAgICAgICAsIGdrID0gVWIuQ09OU1RSVUNUT1IKICAgICAgICAsIHBrID0gbGsKICAgICAgICAsIHZrID0gb2UoIlByb21pc2UiKQogICAgICAgICwgYmsgPSAhZ2s7CiAgICBoayh7CiAgICAgICAgdGFyZ2V0OiAiUHJvbWlzZSIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiB0cnVlCiAgICB9LCB7CiAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gcGsoYmsgJiYgdGhpcyA9PT0gdmsgPyBmayA6IHRoaXMsIGUpCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgZGsgPSBqCiAgICAgICAgLCBrayA9IERlCiAgICAgICAgLCB5ayA9IFliCiAgICAgICAgLCBtayA9IEViCiAgICAgICAgLCB3ayA9IEVoOwogICAgVHIoewogICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogWGQKICAgIH0sIHsKICAgICAgICBhbGxTZXR0bGVkOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gdGhpcwogICAgICAgICAgICAgICAgLCByID0geWsuZih0KQogICAgICAgICAgICAgICAgLCBuID0gci5yZXNvbHZlCiAgICAgICAgICAgICAgICAsIGEgPSByLnJlamVjdAogICAgICAgICAgICAgICAgLCBvID0gbWsoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0ga2sodC5yZXNvbHZlKQogICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIG8gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICwgcyA9IDE7CiAgICAgICAgICAgICAgICAgICAgd2soZSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gbysrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBpID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzKyssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGsociwgdCwgZSkudGhlbigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSB8fCAoaSA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbY10gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogImZ1bGZpbGxlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tcyB8fCBuKGEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgfHwgKGkgPSAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhW2NdID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICJyZWplY3RlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYXNvbjogZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXMgfHwgbihhKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgICAtLXMgfHwgbihhKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKTsKICAgICAgICAgICAgcmV0dXJuIG8uZXJyb3IgJiYgYShvLnZhbHVlKSwKICAgICAgICAgICAgICAgIHIucHJvbWlzZQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIF9rID0gagogICAgICAgICwgeGsgPSBEZQogICAgICAgICwgU2sgPSBvZQogICAgICAgICwgRWsgPSBZYgogICAgICAgICwgQWsgPSBFYgogICAgICAgICwgQ2sgPSBFaAogICAgICAgICwgT2sgPSAiTm8gb25lIHByb21pc2UgcmVzb2x2ZWQiOwogICAgVHIoewogICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogWGQKICAgIH0sIHsKICAgICAgICBhbnk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSB0aGlzCiAgICAgICAgICAgICAgICAsIHIgPSBTaygiQWdncmVnYXRlRXJyb3IiKQogICAgICAgICAgICAgICAgLCBuID0gRWsuZih0KQogICAgICAgICAgICAgICAgLCBhID0gbi5yZXNvbHZlCiAgICAgICAgICAgICAgICAsIG8gPSBuLnJlamVjdAogICAgICAgICAgICAgICAgLCBzID0gQWsoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0geGsodC5yZXNvbHZlKQogICAgICAgICAgICAgICAgICAgICAgICAsIHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGMgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICwgaSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgLCB1ID0gITE7CiAgICAgICAgICAgICAgICAgICAgQ2soZSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gYysrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBoID0gITE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKyssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2sobiwgdCwgZSkudGhlbigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCB8fCB1IHx8ICh1ID0gITAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYShlKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoIHx8IHUgfHwgKGggPSAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzW2xdID0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0taSB8fCBvKG5ldyByKHMsT2spKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgICAgICAtLWkgfHwgbyhuZXcgcihzLE9rKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIHJldHVybiBzLmVycm9yICYmIG8ocy52YWx1ZSksCiAgICAgICAgICAgICAgICBuLnByb21pc2UKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBUayA9IFliOwogICAgVHIoewogICAgICAgIHRhcmdldDogIlByb21pc2UiLAogICAgICAgIHN0YXQ6ICEwCiAgICB9LCB7CiAgICAgICAgd2l0aFJlc29sdmVyczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBlID0gVGsuZih0aGlzKTsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHByb21pc2U6IGUucHJvbWlzZSwKICAgICAgICAgICAgICAgIHJlc29sdmU6IGUucmVzb2x2ZSwKICAgICAgICAgICAgICAgIHJlamVjdDogZS5yZWplY3QKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIERrID0gVHIKICAgICAgICAsIEJrID0gQWIKICAgICAgICAsIGprID0gYwogICAgICAgICwgTWsgPSBvZQogICAgICAgICwgUmsgPSBDCiAgICAgICAgLCBOayA9IHl2CiAgICAgICAgLCBQayA9IGxrCiAgICAgICAgLCBJayA9IEJrICYmIEJrLnByb3RvdHlwZTsKICAgIERrKHsKICAgICAgICB0YXJnZXQ6ICJQcm9taXNlIiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgcmVhbDogITAsCiAgICAgICAgZm9yY2VkOiAhIUJrICYmIGprKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIElrLmZpbmFsbHkuY2FsbCh7CiAgICAgICAgICAgICAgICAgICAgdGhlbjogZnVuY3Rpb24oKSB7fQogICAgICAgICAgICAgICAgfSwgKGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgIH0KICAgICAgICApKQogICAgfSwgewogICAgICAgIGZpbmFsbHk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBOayh0aGlzLCBNaygiUHJvbWlzZSIpKQogICAgICAgICAgICAgICAgLCByID0gUmsoZSk7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4ociA/IGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUGsodCwgZSgpKS50aGVuKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgOiBlLCByID8gZnVuY3Rpb24ocikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBQayh0LCBlKCkpLnRoZW4oKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgcgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDogZSkKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBMayA9IGVlLlByb21pc2UKICAgICAgICAsIHprID0gWWIKICAgICAgICAsIEdrID0gRWI7CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiUHJvbWlzZSIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgZm9yY2VkOiAhMAogICAgfSwgewogICAgICAgIHRyeTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IHprLmYodGhpcykKICAgICAgICAgICAgICAgICwgciA9IEdrKGUpOwogICAgICAgICAgICByZXR1cm4gKHIuZXJyb3IgPyB0LnJlamVjdCA6IHQucmVzb2x2ZSkoci52YWx1ZSksCiAgICAgICAgICAgICAgICB0LnByb21pc2UKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBIayA9IExrCiAgICAgICAgLCBGayA9IFRyCiAgICAgICAgLCBVayA9IEJyCiAgICAgICAgLCBZayA9IGsoW10ucmV2ZXJzZSkKICAgICAgICAsIEprID0gWzEsIDJdOwogICAgRmsoewogICAgICAgIHRhcmdldDogIkFycmF5IiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgZm9yY2VkOiBTdHJpbmcoSmspID09PSBTdHJpbmcoSmsucmV2ZXJzZSgpKQogICAgfSwgewogICAgICAgIHJldmVyc2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gVWsodGhpcykgJiYgKHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGgpLAogICAgICAgICAgICAgICAgWWsodGhpcykKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBXayA9IFdnKCJBcnJheSIsICJyZXZlcnNlIikKICAgICAgICAsIFhrID0gc2UKICAgICAgICAsIEtrID0gV2sKICAgICAgICAsIHFrID0gQXJyYXkucHJvdG90eXBlCiAgICAgICAgLCBaayA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUucmV2ZXJzZTsKICAgICAgICByZXR1cm4gZSA9PT0gcWsgfHwgWGsocWssIGUpICYmIHQgPT09IHFrLnJldmVyc2UgPyBLayA6IHQKICAgIH0KICAgICAgICAsIFZrID0gVHIKICAgICAgICAsIFFrID0gQnIKICAgICAgICAsICRrID0gbW4KICAgICAgICAsIGV5ID0gJAogICAgICAgICwgdHkgPSAkbgogICAgICAgICwgcnkgPSBHcgogICAgICAgICwgbnkgPSBWCiAgICAgICAgLCBheSA9IFdyCiAgICAgICAgLCBveSA9IGZ0CiAgICAgICAgLCBzeSA9IEphCiAgICAgICAgLCBjeSA9IEJuKCJzbGljZSIpCiAgICAgICAgLCBpeSA9IG95KCJzcGVjaWVzIikKICAgICAgICAsIHV5ID0gQXJyYXkKICAgICAgICAsIGx5ID0gTWF0aC5tYXg7CiAgICBWayh7CiAgICAgICAgdGFyZ2V0OiAiQXJyYXkiLAogICAgICAgIHByb3RvOiAhMCwKICAgICAgICBmb3JjZWQ6ICFjeQogICAgfSwgewogICAgICAgIHNsaWNlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciByLCBuLCBhLCBvID0gbnkodGhpcyksIHMgPSByeShvKSwgYyA9IHR5KGUsIHMpLCBpID0gdHkodm9pZCAwID09PSB0ID8gcyA6IHQsIHMpOwogICAgICAgICAgICBpZiAoUWsobykgJiYgKHIgPSBvLmNvbnN0cnVjdG9yLAogICAgICAgICAgICAoJGsocikgJiYgKHIgPT09IHV5IHx8IFFrKHIucHJvdG90eXBlKSkgfHwgZXkocikgJiYgbnVsbCA9PT0gKHIgPSByW2l5XSkpICYmIChyID0gdm9pZCAwKSwKICAgICAgICAgICAgciA9PT0gdXkgfHwgdm9pZCAwID09PSByKSkKICAgICAgICAgICAgICAgIHJldHVybiBzeShvLCBjLCBpKTsKICAgICAgICAgICAgZm9yIChuID0gbmV3ICh2b2lkIDAgPT09IHIgPyB1eSA6IHIpKGx5KGkgLSBjLCAwKSksCiAgICAgICAgICAgICAgICAgICAgIGEgPSAwOyBjIDwgaTsgYysrLAogICAgICAgICAgICAgICAgICAgICBhKyspCiAgICAgICAgICAgICAgICBjIGluIG8gJiYgYXkobiwgYSwgb1tjXSk7CiAgICAgICAgICAgIHJldHVybiBuLmxlbmd0aCA9IGEsCiAgICAgICAgICAgICAgICBuCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgaHkgPSBXZygiQXJyYXkiLCAic2xpY2UiKQogICAgICAgICwgZnkgPSBzZQogICAgICAgICwgZ3kgPSBoeQogICAgICAgICwgcHkgPSBBcnJheS5wcm90b3R5cGUKICAgICAgICAsIHZ5ID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5zbGljZTsKICAgICAgICByZXR1cm4gZSA9PT0gcHkgfHwgZnkocHksIGUpICYmIHQgPT09IHB5LnNsaWNlID8gZ3kgOiB0CiAgICB9OwogICAgIWZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGEuZXhwb3J0cy5kZWZhdWx0CiAgICAgICAgICAgICwgciA9IGJnCiAgICAgICAgICAgICwgbiA9ICR1CiAgICAgICAgICAgICwgbyA9IE5nCiAgICAgICAgICAgICwgcyA9IHpnCiAgICAgICAgICAgICwgYyA9IGVwCiAgICAgICAgICAgICwgaSA9IHBwCiAgICAgICAgICAgICwgdSA9IHZwCiAgICAgICAgICAgICwgbCA9IEhrCiAgICAgICAgICAgICwgaCA9IFprCiAgICAgICAgICAgICwgZiA9IHZ5OwogICAgICAgIGZ1bmN0aW9uIGcoKSB7CiAgICAgICAgICAgIC8qISByZWdlbmVyYXRvci1ydW50aW1lIC0tIENvcHlyaWdodCAoYykgMjAxNC1wcmVzZW50LCBGYWNlYm9vaywgSW5jLiAtLSBsaWNlbnNlIChNSVQpOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvYmxvYi9tYWluL0xJQ0VOU0UgKi8KICAgICAgICAgICAgZS5leHBvcnRzID0gZyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHAKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgZS5leHBvcnRzLl9fZXNNb2R1bGUgPSAhMCwKICAgICAgICAgICAgICAgIGUuZXhwb3J0cy5kZWZhdWx0ID0gZS5leHBvcnRzOwogICAgICAgICAgICB2YXIgYSwgcCA9IHt9LCB2ID0gT2JqZWN0LnByb3RvdHlwZSwgYiA9IHYuaGFzT3duUHJvcGVydHksIGQgPSByIHx8IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgIGVbdF0gPSByLnZhbHVlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICwgayA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG4gPyBuIDoge30sIHkgPSBrLml0ZXJhdG9yIHx8ICJAQGl0ZXJhdG9yIiwgbSA9IGsuYXN5bmNJdGVyYXRvciB8fCAiQEBhc3luY0l0ZXJhdG9yIiwgdyA9IGsudG9TdHJpbmdUYWcgfHwgIkBAdG9TdHJpbmdUYWciOwogICAgICAgICAgICBmdW5jdGlvbiBfKGUsIHQsIG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiByKGUsIHQsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbiwKICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgZVt0XQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBfKHt9LCAiIikKICAgICAgICAgICAgfSBjYXRjaCAoYSkgewogICAgICAgICAgICAgICAgXyA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZVt0XSA9IHIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiB4KGUsIHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgIHZhciBhID0gdCAmJiB0LnByb3RvdHlwZSBpbnN0YW5jZW9mIEQgPyB0IDogRAogICAgICAgICAgICAgICAgICAgICwgcyA9IG8oYS5wcm90b3R5cGUpCiAgICAgICAgICAgICAgICAgICAgLCBjID0gbmV3IEYobiB8fCBbXSk7CiAgICAgICAgICAgICAgICByZXR1cm4gZChzLCAiX2ludm9rZSIsIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogTChlLCByLCBjKQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgcwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFMoZSwgdCwgcikgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAibm9ybWFsIiwKICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBlLmNhbGwodCwgcikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInRocm93IiwKICAgICAgICAgICAgICAgICAgICAgICAgYXJnOiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHAud3JhcCA9IHg7CiAgICAgICAgICAgIHZhciBFID0gInN1c3BlbmRlZFN0YXJ0IgogICAgICAgICAgICAgICAgLCBBID0gInN1c3BlbmRlZFlpZWxkIgogICAgICAgICAgICAgICAgLCBDID0gImV4ZWN1dGluZyIKICAgICAgICAgICAgICAgICwgTyA9ICJjb21wbGV0ZWQiCiAgICAgICAgICAgICAgICAsIFQgPSB7fTsKICAgICAgICAgICAgZnVuY3Rpb24gRCgpIHt9CiAgICAgICAgICAgIGZ1bmN0aW9uIEIoKSB7fQogICAgICAgICAgICBmdW5jdGlvbiBqKCkge30KICAgICAgICAgICAgdmFyIE0gPSB7fTsKICAgICAgICAgICAgXyhNLCB5LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIHZhciBSID0gcyAmJiBzKHMoVShbXSkpKTsKICAgICAgICAgICAgUiAmJiBSICE9PSB2ICYmIGIuY2FsbChSLCB5KSAmJiAoTSA9IFIpOwogICAgICAgICAgICB2YXIgTiA9IGoucHJvdG90eXBlID0gRC5wcm90b3R5cGUgPSBvKE0pOwogICAgICAgICAgICBmdW5jdGlvbiBQKGUpIHsKICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgYyh0ID0gWyJuZXh0IiwgInRocm93IiwgInJldHVybiJdKS5jYWxsKHQsIChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF8oZSwgdCwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKHQsIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBJKGUsIHIpIHsKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG4oYSwgbywgcywgYykgewogICAgICAgICAgICAgICAgICAgIHZhciBpID0gUyhlW2FdLCBlLCBvKTsKICAgICAgICAgICAgICAgICAgICBpZiAoInRocm93IiAhPT0gaS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1ID0gaS5hcmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbCA9IHUudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsICYmICJvYmplY3QiID09IHQobCkgJiYgYi5jYWxsKGwsICJfX2F3YWl0IikgPyByLnJlc29sdmUobC5fX2F3YWl0KS50aGVuKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbigibmV4dCIsIGUsIHMsIGMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICksIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbigidGhyb3ciLCBlLCBzLCBjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICApKSA6IHIucmVzb2x2ZShsKS50aGVuKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS52YWx1ZSA9IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHModSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgKSwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbigidGhyb3ciLCBlLCBzLCBjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjKGkuYXJnKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGE7CiAgICAgICAgICAgICAgICBkKHRoaXMsICJfaW52b2tlIiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHIoKGZ1bmN0aW9uKHIsIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbihlLCB0LCByLCBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEgPSBhID8gYS50aGVuKG8sIG8pIDogbygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBMKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gRTsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihvLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IEMpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nIik7CiAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IE8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgPT09IG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAoci5tZXRob2QgPSBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuYXJnID0gczsgOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSByLmRlbGVnYXRlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB6KGMsIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gVCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIm5leHQiID09PSByLm1ldGhvZCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuc2VudCA9IHIuX3NlbnQgPSByLmFyZzsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoInRocm93IiA9PT0gci5tZXRob2QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuID09PSBFKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG4gPSBPLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmFyZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuZGlzcGF0Y2hFeGNlcHRpb24oci5hcmcpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgInJldHVybiIgPT09IHIubWV0aG9kICYmIHIuYWJydXB0KCJyZXR1cm4iLCByLmFyZyk7CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBDOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IFMoZSwgdCwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgibm9ybWFsIiA9PT0gdS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobiA9IHIuZG9uZSA/IE8gOiBBLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5hcmcgPT09IFQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1LmFyZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lOiByLmRvbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAidGhyb3ciID09PSB1LnR5cGUgJiYgKG4gPSBPLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5tZXRob2QgPSAidGhyb3ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5hcmcgPSB1LmFyZykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24geihlLCB0KSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHQubWV0aG9kCiAgICAgICAgICAgICAgICAgICAgLCBuID0gZS5pdGVyYXRvcltyXTsKICAgICAgICAgICAgICAgIGlmIChuID09PSBhKQogICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmRlbGVnYXRlID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICAidGhyb3ciID09PSByICYmIGUuaXRlcmF0b3IucmV0dXJuICYmICh0Lm1ldGhvZCA9ICJyZXR1cm4iLAogICAgICAgICAgICAgICAgICAgICAgICB0LmFyZyA9IGEsCiAgICAgICAgICAgICAgICAgICAgICAgIHooZSwgdCksCiAgICAgICAgICAgICAgICAgICAgInRocm93IiA9PT0gdC5tZXRob2QpIHx8ICJyZXR1cm4iICE9PSByICYmICh0Lm1ldGhvZCA9ICJ0aHJvdyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHQuYXJnID0gbmV3IFR5cGVFcnJvcigiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAnIiArIHIgKyAiJyBtZXRob2QiKSksCiAgICAgICAgICAgICAgICAgICAgICAgIFQ7CiAgICAgICAgICAgICAgICB2YXIgbyA9IFMobiwgZS5pdGVyYXRvciwgdC5hcmcpOwogICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgPT09IG8udHlwZSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5tZXRob2QgPSAidGhyb3ciLAogICAgICAgICAgICAgICAgICAgICAgICB0LmFyZyA9IG8uYXJnLAogICAgICAgICAgICAgICAgICAgICAgICB0LmRlbGVnYXRlID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgVDsKICAgICAgICAgICAgICAgIHZhciBzID0gby5hcmc7CiAgICAgICAgICAgICAgICByZXR1cm4gcyA/IHMuZG9uZSA/ICh0W2UucmVzdWx0TmFtZV0gPSBzLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHQubmV4dCA9IGUubmV4dExvYywKICAgICAgICAgICAgICAgICJyZXR1cm4iICE9PSB0Lm1ldGhvZCAmJiAodC5tZXRob2QgPSAibmV4dCIsCiAgICAgICAgICAgICAgICAgICAgdC5hcmcgPSBhKSwKICAgICAgICAgICAgICAgICAgICB0LmRlbGVnYXRlID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICBUKSA6IHMgOiAodC5tZXRob2QgPSAidGhyb3ciLAogICAgICAgICAgICAgICAgICAgIHQuYXJnID0gbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3QiKSwKICAgICAgICAgICAgICAgICAgICB0LmRlbGVnYXRlID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICBUKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEcoZSkgewogICAgICAgICAgICAgICAgdmFyIHQsIHIgPSB7CiAgICAgICAgICAgICAgICAgICAgdHJ5TG9jOiBlWzBdCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgMSBpbiBlICYmIChyLmNhdGNoTG9jID0gZVsxXSksCiAgICAgICAgICAgICAgICAyIGluIGUgJiYgKHIuZmluYWxseUxvYyA9IGVbMl0sCiAgICAgICAgICAgICAgICAgICAgci5hZnRlckxvYyA9IGVbM10pLAogICAgICAgICAgICAgICAgICAgIGkodCA9IHRoaXMudHJ5RW50cmllcykuY2FsbCh0LCByKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEgoZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNvbXBsZXRpb24gfHwge307CiAgICAgICAgICAgICAgICB0LnR5cGUgPSAibm9ybWFsIiwKICAgICAgICAgICAgICAgICAgICBkZWxldGUgdC5hcmcsCiAgICAgICAgICAgICAgICAgICAgZS5jb21wbGV0aW9uID0gdAogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEYoZSkgewogICAgICAgICAgICAgICAgdGhpcy50cnlFbnRyaWVzID0gW3sKICAgICAgICAgICAgICAgICAgICB0cnlMb2M6ICJyb290IgogICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgYyhlKS5jYWxsKGUsIEcsIHRoaXMpLAogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoITApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gVShlKSB7CiAgICAgICAgICAgICAgICBpZiAoZSB8fCAiIiA9PT0gZSkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gZVt5XTsKICAgICAgICAgICAgICAgICAgICBpZiAocikKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuY2FsbChlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZS5uZXh0KQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKGUubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IC0xCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG8gPSBmdW5jdGlvbiB0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7ICsrbiA8IGUubGVuZ3RoOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIuY2FsbChlLCBuKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudmFsdWUgPSBlW25dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5kb25lID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQudmFsdWUgPSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZG9uZSA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ubmV4dCA9IG8KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHQoZSkgKyAiIGlzIG5vdCBpdGVyYWJsZSIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIEIucHJvdG90eXBlID0gaiwKICAgICAgICAgICAgICAgIGQoTiwgImNvbnN0cnVjdG9yIiwgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBqLAogICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogITAKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgZChqLCAiY29uc3RydWN0b3IiLCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEIsCiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBCLmRpc3BsYXlOYW1lID0gXyhqLCB3LCAiR2VuZXJhdG9yRnVuY3Rpb24iKSwKICAgICAgICAgICAgICAgIHAuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgZS5jb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0ICYmICh0ID09PSBCIHx8ICJHZW5lcmF0b3JGdW5jdGlvbiIgPT09ICh0LmRpc3BsYXlOYW1lIHx8IHQubmFtZSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICBwLm1hcmsgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPyB1KGUsIGopIDogKGUuX19wcm90b19fID0gaiwKICAgICAgICAgICAgICAgICAgICAgICAgXyhlLCB3LCAiR2VuZXJhdG9yRnVuY3Rpb24iKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJvdG90eXBlID0gbyhOKSwKICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgcC5hd3JhcCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBfX2F3YWl0OiBlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgUChJLnByb3RvdHlwZSksCiAgICAgICAgICAgICAgICBfKEkucHJvdG90eXBlLCBtLCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBwLkFzeW5jSXRlcmF0b3IgPSBJLAogICAgICAgICAgICAgICAgcC5hc3luYyA9IGZ1bmN0aW9uKGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IGEgJiYgKGEgPSBsKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG5ldyBJKHgoZSwgdCwgciwgbiksYSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAuaXNHZW5lcmF0b3JGdW5jdGlvbih0KSA/IG8gOiBvLm5leHQoKS50aGVuKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5kb25lID8gZS52YWx1ZSA6IG8ubmV4dCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgUChOKSwKICAgICAgICAgICAgICAgIF8oTiwgdywgIkdlbmVyYXRvciIpLAogICAgICAgICAgICAgICAgXyhOLCB5LCAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBfKE4sICJ0b1N0cmluZyIsIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJbb2JqZWN0IEdlbmVyYXRvcl0iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBwLmtleXMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBPYmplY3QoZSkKICAgICAgICAgICAgICAgICAgICAgICAgLCByID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0KQogICAgICAgICAgICAgICAgICAgICAgICBpKHIpLmNhbGwociwgbik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgocikuY2FsbChyKSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyByLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSByLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuIGluIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnZhbHVlID0gbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZG9uZSA9ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZG9uZSA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgcC52YWx1ZXMgPSBVLAogICAgICAgICAgICAgICAgRi5wcm90b3R5cGUgPSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3RydWN0b3I6IEYsCiAgICAgICAgICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPSAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VudCA9IHRoaXMuX3NlbnQgPSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb25lID0gITEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWV0aG9kID0gIm5leHQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcmcgPSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyh0ID0gdGhpcy50cnlFbnRyaWVzKS5jYWxsKHQsIEgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInQiID09PSByLmNoYXJBdCgwKSAmJiBiLmNhbGwodGhpcywgcikgJiYgIWlzTmFOKCtmKHIpLmNhbGwociwgMSkpICYmICh0aGlzW3JdID0gYSkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHN0b3A6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSAhMDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJ0aHJvdyIgPT09IGUudHlwZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGUuYXJnOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ydmFsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kb25lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiByKHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLnR5cGUgPSAidGhyb3ciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuYXJnID0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm5leHQgPSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiAodC5tZXRob2QgPSAibmV4dCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5hcmcgPSBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIW4KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IG4gPj0gMDsgLS1uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMudHJ5RW50cmllc1tuXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcyA9IG8uY29tcGxldGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgicm9vdCIgPT09IG8udHJ5TG9jKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKCJlbmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvLnRyeUxvYyA8PSB0aGlzLnByZXYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGIuY2FsbChvLCAiY2F0Y2hMb2MiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGkgPSBiLmNhbGwobywgImZpbmFsbHlMb2MiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyAmJiBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBvLmNhdGNoTG9jKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoby5jYXRjaExvYywgITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgby5maW5hbGx5TG9jKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoby5maW5hbGx5TG9jKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgby5jYXRjaExvYykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByKG8uY2F0Y2hMb2MsICEwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseSIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgby5maW5hbGx5TG9jKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIoby5maW5hbGx5TG9jKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYWJydXB0OiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgciA+PSAwOyAtLXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy50cnlFbnRyaWVzW3JdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4udHJ5TG9jIDw9IHRoaXMucHJldiAmJiBiLmNhbGwobiwgImZpbmFsbHlMb2MiKSAmJiB0aGlzLnByZXYgPCBuLmZpbmFsbHlMb2MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBhICYmICgiYnJlYWsiID09PSBlIHx8ICJjb250aW51ZSIgPT09IGUpICYmIGEudHJ5TG9jIDw9IHQgJiYgdCA8PSBhLmZpbmFsbHlMb2MgJiYgKGEgPSBudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhID8gYS5jb21wbGV0aW9uIDoge307CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvLnR5cGUgPSBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5hcmcgPSB0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA/ICh0aGlzLm1ldGhvZCA9ICJuZXh0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHQgPSBhLmZpbmFsbHlMb2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCkgOiB0aGlzLmNvbXBsZXRlKG8pCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoInRocm93IiA9PT0gZS50eXBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZS5hcmc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiYnJlYWsiID09PSBlLnR5cGUgfHwgImNvbnRpbnVlIiA9PT0gZS50eXBlID8gdGhpcy5uZXh0ID0gZS5hcmcgOiAicmV0dXJuIiA9PT0gZS50eXBlID8gKHRoaXMucnZhbCA9IHRoaXMuYXJnID0gZS5hcmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1ldGhvZCA9ICJyZXR1cm4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gImVuZCIpIDogIm5vcm1hbCIgPT09IGUudHlwZSAmJiB0ICYmICh0aGlzLm5leHQgPSB0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZpbmlzaDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMudHJ5RW50cmllc1t0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLmZpbmFsbHlMb2MgPT09IGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGxldGUoci5jb21wbGV0aW9uLCByLmFmdGVyTG9jKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSChyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjYXRjaDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IHQgPj0gMDsgLS10KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRoaXMudHJ5RW50cmllc1t0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyLnRyeUxvYyA9PT0gZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gci5jb21wbGV0aW9uOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgidGhyb3ciID09PSBuLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBuLmFyZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSChyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHQiKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yOiBVKGUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TmFtZTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHRMb2M6IHIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgIm5leHQiID09PSB0aGlzLm1ldGhvZCAmJiAodGhpcy5hcmcgPSBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcAogICAgICAgIH0KICAgICAgICBlLmV4cG9ydHMgPSBnLAogICAgICAgICAgICBlLmV4cG9ydHMuX19lc01vZHVsZSA9ICEwLAogICAgICAgICAgICBlLmV4cG9ydHMuZGVmYXVsdCA9IGUuZXhwb3J0cwogICAgfShNZyk7CiAgICB2YXIgYnkgPSBNZy5leHBvcnRzKCkKICAgICAgICAsIGR5ID0gYnk7CiAgICB0cnkgewogICAgICAgIHJlZ2VuZXJhdG9yUnVudGltZSA9IGJ5CiAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgIm9iamVjdCIgPT09ICh2b2lkIDAgPT09IGpnID8gInVuZGVmaW5lZCIgOiBEZyhqZykpID8gamcucmVnZW5lcmF0b3JSdW50aW1lID0gYnkgOiBGdW5jdGlvbigiciIsICJyZWdlbmVyYXRvclJ1bnRpbWUgPSByIikoYnkpCiAgICB9CiAgICB2YXIga3kgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICAhZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gSGs7CiAgICAgICAgZnVuY3Rpb24gcihlLCByLCBuLCBhLCBvLCBzLCBjKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICB2YXIgaSA9IGVbc10oYykKICAgICAgICAgICAgICAgICAgICAsIHUgPSBpLnZhbHVlCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIG4oZSkKICAgICAgICAgICAgfQogICAgICAgICAgICBpLmRvbmUgPyByKHUpIDogdC5yZXNvbHZlKHUpLnRoZW4oYSwgbykKICAgICAgICB9CiAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMKICAgICAgICAgICAgICAgICAgICAsIGEgPSBhcmd1bWVudHM7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHQoKGZ1bmN0aW9uKHQsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBlLmFwcGx5KG4sIGEpOwogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIocywgdCwgbywgYywgaSwgIm5leHQiLCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcihzLCB0LCBvLCBjLCBpLCAidGhyb3ciLCBlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGModm9pZCAwKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgZS5leHBvcnRzLl9fZXNNb2R1bGUgPSAhMCwKICAgICAgICAgICAgZS5leHBvcnRzLmRlZmF1bHQgPSBlLmV4cG9ydHMKICAgIH0oa3kpOwogICAgdmFyIHl5ID0gewogICAgICAgIGV4cG9ydHM6IHt9CiAgICB9OwogICAgIWZ1bmN0aW9uKGUpIHsKICAgICAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiB0KSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpCiAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgIGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gITAsCiAgICAgICAgICAgIGUuZXhwb3J0cy5kZWZhdWx0ID0gZS5leHBvcnRzCiAgICB9KHl5KTsKICAgIHZhciBteSA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgd3kgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH0KICAgICAgICAsIF95ID0gewogICAgICAgIGV4cG9ydHM6IHt9CiAgICB9CiAgICAgICAgLCB4eSA9IHJvLmYoInRvUHJpbWl0aXZlIikKICAgICAgICAsIFN5ID0geHk7CiAgICAhZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0geHkKICAgICAgICAgICAgLCByID0gYS5leHBvcnRzLmRlZmF1bHQ7CiAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSwgbikgewogICAgICAgICAgICBpZiAoIm9iamVjdCIgIT0gcihlKSB8fCAhZSkKICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICB2YXIgYSA9IGVbdF07CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGEpIHsKICAgICAgICAgICAgICAgIHZhciBvID0gYS5jYWxsKGUsIG4gfHwgImRlZmF1bHQiKTsKICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiAhPSByKG8pKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBvOwogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS4iKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAoInN0cmluZyIgPT09IG4gPyBTdHJpbmcgOiBOdW1iZXIpKGUpCiAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgIGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gITAsCiAgICAgICAgICAgIGUuZXhwb3J0cy5kZWZhdWx0ID0gZS5leHBvcnRzCiAgICB9KF95KSwKICAgICAgICBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gYS5leHBvcnRzLmRlZmF1bHQKICAgICAgICAgICAgICAgICwgciA9IF95LmV4cG9ydHM7CiAgICAgICAgICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gcihlLCAic3RyaW5nIik7CiAgICAgICAgICAgICAgICByZXR1cm4gInN5bWJvbCIgPT0gdChuKSA/IG4gOiBuICsgIiIKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgZS5leHBvcnRzLl9fZXNNb2R1bGUgPSAhMCwKICAgICAgICAgICAgICAgIGUuZXhwb3J0cy5kZWZhdWx0ID0gZS5leHBvcnRzCiAgICAgICAgfSh3eSksCiAgICAgICAgZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IGJnCiAgICAgICAgICAgICAgICAsIHIgPSB3eS5leHBvcnRzOwogICAgICAgICAgICBmdW5jdGlvbiBuKGUsIG4pIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykgewogICAgICAgICAgICAgICAgICAgIHZhciBvID0gblthXTsKICAgICAgICAgICAgICAgICAgICBvLmVudW1lcmFibGUgPSBvLmVudW1lcmFibGUgfHwgITEsCiAgICAgICAgICAgICAgICAgICAgICAgIG8uY29uZmlndXJhYmxlID0gITAsCiAgICAgICAgICAgICAgICAgICAgInZhbHVlImluIG8gJiYgKG8ud3JpdGFibGUgPSAhMCksCiAgICAgICAgICAgICAgICAgICAgICAgIHQoZSwgcihvLmtleSksIG8pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZS5leHBvcnRzID0gZnVuY3Rpb24oZSwgciwgYSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHIgJiYgbihlLnByb3RvdHlwZSwgciksCiAgICAgICAgICAgICAgICBhICYmIG4oZSwgYSksCiAgICAgICAgICAgICAgICAgICAgdChlLCAicHJvdG90eXBlIiwgewogICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogITEKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICwKICAgICAgICAgICAgICAgIGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gITAsCiAgICAgICAgICAgICAgICBlLmV4cG9ydHMuZGVmYXVsdCA9IGUuZXhwb3J0cwogICAgICAgIH0obXkpOwogICAgdmFyIEV5ID0gIlx0XG5cdlxmXHIgwqDhmoDigIDigIHigILigIPigITigIXigIbigIfigIjigInigIrigK/igZ/jgIBcdTIwMjhcdTIwMjlcdWZlZmYiCiAgICAgICAgLCBBeSA9IEsKICAgICAgICAsIEN5ID0gS24KICAgICAgICAsIE95ID0gRXkKICAgICAgICAsIFR5ID0gaygiIi5yZXBsYWNlKQogICAgICAgICwgRHkgPSBSZWdFeHAoIl5bIiArIE95ICsgIl0rIikKICAgICAgICAsIEJ5ID0gUmVnRXhwKCIoXnxbXiIgKyBPeSArICJdKVsiICsgT3kgKyAiXSskIikKICAgICAgICAsIGp5ID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgIHZhciByID0gQ3koQXkodCkpOwogICAgICAgICAgICByZXR1cm4gMSAmIGUgJiYgKHIgPSBUeShyLCBEeSwgIiIpKSwKICAgICAgICAgICAgMiAmIGUgJiYgKHIgPSBUeShyLCBCeSwgIiQxIikpLAogICAgICAgICAgICAgICAgcgogICAgICAgIH0KICAgIH0KICAgICAgICAsIE15ID0gewogICAgICAgIHN0YXJ0OiBqeSgxKSwKICAgICAgICBlbmQ6IGp5KDIpLAogICAgICAgIHRyaW06IGp5KDMpCiAgICB9CiAgICAgICAgLCBSeSA9IHMKICAgICAgICAsIE55ID0gYwogICAgICAgICwgUHkgPSBrCiAgICAgICAgLCBJeSA9IEtuCiAgICAgICAgLCBMeSA9IE15LnRyaW0KICAgICAgICAsIHp5ID0gRXkKICAgICAgICAsIEd5ID0gUnkucGFyc2VJbnQKICAgICAgICAsIEh5ID0gUnkuU3ltYm9sCiAgICAgICAgLCBGeSA9IEh5ICYmIEh5Lml0ZXJhdG9yCiAgICAgICAgLCBVeSA9IC9eWystXT8weC9pCiAgICAgICAgLCBZeSA9IFB5KFV5LmV4ZWMpCiAgICAgICAgLCBKeSA9IDggIT09IEd5KHp5ICsgIjA4IikgfHwgMjIgIT09IEd5KHp5ICsgIjB4MTYiKSB8fCBGeSAmJiAhTnkoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBHeShPYmplY3QoRnkpKQogICAgICAgIH0KICAgICkpID8gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgciA9IEx5KEl5KGUpKTsKICAgICAgICAgICAgcmV0dXJuIEd5KHIsIHQgPj4+IDAgfHwgKFl5KFV5LCByKSA/IDE2IDogMTApKQogICAgICAgIH0KICAgICAgICA6IEd5OwogICAgVHIoewogICAgICAgIGdsb2JhbDogITAsCiAgICAgICAgZm9yY2VkOiBwYXJzZUludCAhPT0gSnkKICAgIH0sIHsKICAgICAgICBwYXJzZUludDogSnkKICAgIH0pOwogICAgdmFyIFd5ID0gZWUucGFyc2VJbnQKICAgICAgICAsIFh5ID0gVHIKICAgICAgICAsIEt5ID0gYWEuaW5kZXhPZgogICAgICAgICwgcXkgPSBIZwogICAgICAgICwgWnkgPSBFKFtdLmluZGV4T2YpCiAgICAgICAgLCBWeSA9ICEhWnkgJiYgMSAvIFp5KFsxXSwgMSwgLTApIDwgMDsKICAgIFh5KHsKICAgICAgICB0YXJnZXQ6ICJBcnJheSIsCiAgICAgICAgcHJvdG86ICEwLAogICAgICAgIGZvcmNlZDogVnkgfHwgIXF5KCJpbmRleE9mIikKICAgIH0sIHsKICAgICAgICBpbmRleE9mOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiB2b2lkIDA7CiAgICAgICAgICAgIHJldHVybiBWeSA/IFp5KHRoaXMsIGUsIHQpIHx8IDAgOiBLeSh0aGlzLCBlLCB0KQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIFF5ID0gV2coIkFycmF5IiwgImluZGV4T2YiKQogICAgICAgICwgJHkgPSBzZQogICAgICAgICwgZW0gPSBReQogICAgICAgICwgdG0gPSBBcnJheS5wcm90b3R5cGUKICAgICAgICAsIHJtID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5pbmRleE9mOwogICAgICAgIHJldHVybiBlID09PSB0bSB8fCAkeSh0bSwgZSkgJiYgdCA9PT0gdG0uaW5kZXhPZiA/IGVtIDogdAogICAgfQogICAgICAgICwgbm0gPSB2eQogICAgICAgICwgYW0gPSBUCiAgICAgICAgLCBvbSA9IGsKICAgICAgICAsIHNtID0gagogICAgICAgICwgY20gPSBjCiAgICAgICAgLCBpbSA9IHZhCiAgICAgICAgLCB1bSA9IFZhCiAgICAgICAgLCBsbSA9IE0KICAgICAgICAsIGhtID0gcWUKICAgICAgICAsIGZtID0gWQogICAgICAgICwgZ20gPSBPYmplY3QuYXNzaWduCiAgICAgICAgLCBwbSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eQogICAgICAgICwgdm0gPSBvbShbXS5jb25jYXQpCiAgICAgICAgLCBibSA9ICFnbSB8fCBjbSgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmIChhbSAmJiAxICE9PSBnbSh7CiAgICAgICAgICAgICAgICBiOiAxCiAgICAgICAgICAgIH0sIGdtKHBtKHt9LCAiYSIsIHsKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBwbSh0aGlzLCAiYiIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDMsCiAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICExCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksIHsKICAgICAgICAgICAgICAgIGI6IDIKICAgICAgICAgICAgfSkpLmIpCiAgICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgIHZhciBlID0ge30KICAgICAgICAgICAgICAgICwgdCA9IHt9CiAgICAgICAgICAgICAgICAsIHIgPSBTeW1ib2woImFzc2lnbiBkZXRlY3Rpb24iKQogICAgICAgICAgICAgICAgLCBuID0gImFiY2RlZmdoaWprbG1ub3BxcnN0IjsKICAgICAgICAgICAgcmV0dXJuIGVbcl0gPSA3LAogICAgICAgICAgICAgICAgbi5zcGxpdCgiIikuZm9yRWFjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICB0W2VdID0gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICA3ICE9PSBnbSh7fSwgZSlbcl0gfHwgaW0oZ20oe30sIHQpKS5qb2luKCIiKSAhPT0gbgogICAgICAgIH0KICAgICkpID8gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBmb3IgKHZhciByID0gaG0oZSksIG4gPSBhcmd1bWVudHMubGVuZ3RoLCBhID0gMSwgbyA9IHVtLmYsIHMgPSBsbS5mOyBuID4gYTsgKQogICAgICAgICAgICAgICAgZm9yICh2YXIgYywgaSA9IGZtKGFyZ3VtZW50c1thKytdKSwgdSA9IG8gPyB2bShpbShpKSwgbyhpKSkgOiBpbShpKSwgbCA9IHUubGVuZ3RoLCBoID0gMDsgbCA+IGg7ICkKICAgICAgICAgICAgICAgICAgICBjID0gdVtoKytdLAogICAgICAgICAgICAgICAgICAgIGFtICYmICFzbShzLCBpLCBjKSB8fCAocltjXSA9IGlbY10pOwogICAgICAgICAgICByZXR1cm4gcgogICAgICAgIH0KICAgICAgICA6IGdtCiAgICAgICAgLCBkbSA9IGJtOwogICAgVHIoewogICAgICAgIHRhcmdldDogIk9iamVjdCIsCiAgICAgICAgc3RhdDogITAsCiAgICAgICAgYXJpdHk6IDIsCiAgICAgICAgZm9yY2VkOiBPYmplY3QuYXNzaWduICE9PSBkbQogICAgfSwgewogICAgICAgIGFzc2lnbjogZG0KICAgIH0pOwogICAgdmFyIGttID0gZWUuT2JqZWN0LmFzc2lnbgogICAgICAgICwgeW0gPSBlcAogICAgICAgICwgbW0gPSBWby5tYXA7CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiQXJyYXkiLAogICAgICAgIHByb3RvOiAhMCwKICAgICAgICBmb3JjZWQ6ICFCbigibWFwIikKICAgIH0sIHsKICAgICAgICBtYXA6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG1tKHRoaXMsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIHdtID0gV2coIkFycmF5IiwgIm1hcCIpCiAgICAgICAgLCBfbSA9IHNlCiAgICAgICAgLCB4bSA9IHdtCiAgICAgICAgLCBTbSA9IEFycmF5LnByb3RvdHlwZQogICAgICAgICwgRW0gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLm1hcDsKICAgICAgICByZXR1cm4gZSA9PT0gU20gfHwgX20oU20sIGUpICYmIHQgPT09IFNtLm1hcCA/IHhtIDogdAogICAgfQogICAgICAgICwgQW0gPSBWby5maWx0ZXI7CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiQXJyYXkiLAogICAgICAgIHByb3RvOiAhMCwKICAgICAgICBmb3JjZWQ6ICFCbigiZmlsdGVyIikKICAgIH0sIHsKICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIEFtKHRoaXMsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIENtID0gV2coIkFycmF5IiwgImZpbHRlciIpCiAgICAgICAgLCBPbSA9IHNlCiAgICAgICAgLCBUbSA9IENtCiAgICAgICAgLCBEbSA9IEFycmF5LnByb3RvdHlwZQogICAgICAgICwgQm0gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdmFyIHQgPSBlLmZpbHRlcjsKICAgICAgICByZXR1cm4gZSA9PT0gRG0gfHwgT20oRG0sIGUpICYmIHQgPT09IERtLmZpbHRlciA/IFRtIDogdAogICAgfQogICAgICAgICwgam0gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBCdW4gJiYgQnVuICYmICJzdHJpbmciID09IHR5cGVvZiBCdW4udmVyc2lvbgogICAgICAgICwgTW0gPSBzCiAgICAgICAgLCBSbSA9IGcKICAgICAgICAsIE5tID0gQwogICAgICAgICwgUG0gPSBqbQogICAgICAgICwgSW0gPSBjZQogICAgICAgICwgTG0gPSBKYQogICAgICAgICwgem0gPSB3dgogICAgICAgICwgR20gPSBNbS5GdW5jdGlvbgogICAgICAgICwgSG0gPSAvTVNJRSAuXC4vLnRlc3QoSW0pIHx8IFBtICYmIGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBlID0gTW0uQnVuLnZlcnNpb24uc3BsaXQoIi4iKTsKICAgICAgICByZXR1cm4gZS5sZW5ndGggPCAzIHx8ICIwIiA9PT0gZVswXSAmJiAoZVsxXSA8IDMgfHwgIjMiID09PSBlWzFdICYmICIwIiA9PT0gZVsyXSkKICAgIH0oKQogICAgICAgICwgRm0gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgdmFyIHIgPSB0ID8gMiA6IDE7CiAgICAgICAgcmV0dXJuIEhtID8gZnVuY3Rpb24obiwgYSkgewogICAgICAgICAgICAgICAgdmFyIG8gPSB6bShhcmd1bWVudHMubGVuZ3RoLCAxKSA+IHIKICAgICAgICAgICAgICAgICAgICAsIHMgPSBObShuKSA/IG4gOiBHbShuKQogICAgICAgICAgICAgICAgICAgICwgYyA9IG8gPyBMbShhcmd1bWVudHMsIHIpIDogW10KICAgICAgICAgICAgICAgICAgICAsIGkgPSBvID8gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFJtKHMsIHRoaXMsIGMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIDogczsKICAgICAgICAgICAgICAgIHJldHVybiB0ID8gZShpLCBhKSA6IGUoaSkKICAgICAgICAgICAgfQogICAgICAgICAgICA6IGUKICAgIH0KICAgICAgICAsIFVtID0gVHIKICAgICAgICAsIFltID0gcwogICAgICAgICwgSm0gPSBGbShZbS5zZXRJbnRlcnZhbCwgITApOwogICAgVW0oewogICAgICAgIGdsb2JhbDogITAsCiAgICAgICAgYmluZDogITAsCiAgICAgICAgZm9yY2VkOiBZbS5zZXRJbnRlcnZhbCAhPT0gSm0KICAgIH0sIHsKICAgICAgICBzZXRJbnRlcnZhbDogSm0KICAgIH0pOwogICAgdmFyIFdtID0gVHIKICAgICAgICAsIFhtID0gcwogICAgICAgICwgS20gPSBGbShYbS5zZXRUaW1lb3V0LCAhMCk7CiAgICBXbSh7CiAgICAgICAgZ2xvYmFsOiAhMCwKICAgICAgICBiaW5kOiAhMCwKICAgICAgICBmb3JjZWQ6IFhtLnNldFRpbWVvdXQgIT09IEttCiAgICB9LCB7CiAgICAgICAgc2V0VGltZW91dDogS20KICAgIH0pOwogICAgdmFyIHFtID0gZWUuc2V0VGltZW91dAogICAgICAgICwgWm0gPSBIawogICAgICAgICwgVm0gPSBOcgogICAgICAgICwgUW0gPSBLbgogICAgICAgICwgJG0gPSBLCiAgICAgICAgLCBldyA9IFJhbmdlRXJyb3IKICAgICAgICAsIHR3ID0gawogICAgICAgICwgcncgPSBMcgogICAgICAgICwgbncgPSBLbgogICAgICAgICwgYXcgPSBLCiAgICAgICAgLCBvdyA9IHR3KChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gUW0oJG0odGhpcykpCiAgICAgICAgICAgICAgICAsIHIgPSAiIgogICAgICAgICAgICAgICAgLCBuID0gVm0oZSk7CiAgICAgICAgICAgIGlmIChuIDwgMCB8fCBuID09PSAxIC8gMCkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBldygiV3JvbmcgbnVtYmVyIG9mIHJlcGV0aXRpb25zIik7CiAgICAgICAgICAgIGZvciAoOyBuID4gMDsgKG4gPj4+PSAxKSAmJiAodCArPSB0KSkKICAgICAgICAgICAgICAgIDEgJiBuICYmIChyICs9IHQpOwogICAgICAgICAgICByZXR1cm4gcgogICAgICAgIH0KICAgICkpCiAgICAgICAgLCBzdyA9IHR3KCIiLnNsaWNlKQogICAgICAgICwgY3cgPSBNYXRoLmNlaWwKICAgICAgICAsIGl3ID0gZnVuY3Rpb24oZSkgewogICAgICAgIHJldHVybiBmdW5jdGlvbih0LCByLCBuKSB7CiAgICAgICAgICAgIHZhciBhLCBvLCBzID0gbncoYXcodCkpLCBjID0gcncociksIGkgPSBzLmxlbmd0aCwgdSA9IHZvaWQgMCA9PT0gbiA/ICIgIiA6IG53KG4pOwogICAgICAgICAgICByZXR1cm4gYyA8PSBpIHx8ICIiID09PSB1ID8gcyA6ICgobyA9IG93KHUsIGN3KChhID0gYyAtIGkpIC8gdS5sZW5ndGgpKSkubGVuZ3RoID4gYSAmJiAobyA9IHN3KG8sIDAsIGEpKSwKICAgICAgICAgICAgICAgIGUgPyBzICsgbyA6IG8gKyBzKQogICAgICAgIH0KICAgIH0KICAgICAgICAsIHV3ID0gawogICAgICAgICwgbHcgPSBjCiAgICAgICAgLCBodyA9IHsKICAgICAgICBzdGFydDogaXcoITEpLAogICAgICAgIGVuZDogaXcoITApCiAgICB9LnN0YXJ0CiAgICAgICAgLCBmdyA9IFJhbmdlRXJyb3IKICAgICAgICAsIGd3ID0gaXNGaW5pdGUKICAgICAgICAsIHB3ID0gTWF0aC5hYnMKICAgICAgICAsIHZ3ID0gRGF0ZS5wcm90b3R5cGUKICAgICAgICAsIGJ3ID0gdncudG9JU09TdHJpbmcKICAgICAgICAsIGR3ID0gdXcodncuZ2V0VGltZSkKICAgICAgICAsIGt3ID0gdXcodncuZ2V0VVRDRGF0ZSkKICAgICAgICAsIHl3ID0gdXcodncuZ2V0VVRDRnVsbFllYXIpCiAgICAgICAgLCBtdyA9IHV3KHZ3LmdldFVUQ0hvdXJzKQogICAgICAgICwgd3cgPSB1dyh2dy5nZXRVVENNaWxsaXNlY29uZHMpCiAgICAgICAgLCBfdyA9IHV3KHZ3LmdldFVUQ01pbnV0ZXMpCiAgICAgICAgLCB4dyA9IHV3KHZ3LmdldFVUQ01vbnRoKQogICAgICAgICwgU3cgPSB1dyh2dy5nZXRVVENTZWNvbmRzKQogICAgICAgICwgRXcgPSBsdygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiAiMDM4NS0wNy0yNVQwNzowNjozOS45OTlaIiAhPT0gYncuY2FsbChuZXcgRGF0ZSgtNTAwMDAwMDAwMDAwMDEpKQogICAgICAgIH0KICAgICkpIHx8ICFsdygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGJ3LmNhbGwobmV3IERhdGUoTmFOKSkKICAgICAgICB9CiAgICApKSA/IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoIWd3KGR3KHRoaXMpKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBmdygiSW52YWxpZCB0aW1lIHZhbHVlIik7CiAgICAgICAgICAgIHZhciBlID0gdGhpcwogICAgICAgICAgICAgICAgLCB0ID0geXcoZSkKICAgICAgICAgICAgICAgICwgciA9IHd3KGUpCiAgICAgICAgICAgICAgICAsIG4gPSB0IDwgMCA/ICItIiA6IHQgPiA5OTk5ID8gIisiIDogIiI7CiAgICAgICAgICAgIHJldHVybiBuICsgaHcocHcodCksIG4gPyA2IDogNCwgMCkgKyAiLSIgKyBodyh4dyhlKSArIDEsIDIsIDApICsgIi0iICsgaHcoa3coZSksIDIsIDApICsgIlQiICsgaHcobXcoZSksIDIsIDApICsgIjoiICsgaHcoX3coZSksIDIsIDApICsgIjoiICsgaHcoU3coZSksIDIsIDApICsgIi4iICsgaHcociwgMywgMCkgKyAiWiIKICAgICAgICB9CiAgICAgICAgOiBidwogICAgICAgICwgQXcgPSBqCiAgICAgICAgLCBDdyA9IHFlCiAgICAgICAgLCBPdyA9IG10CiAgICAgICAgLCBUdyA9IEV3CiAgICAgICAgLCBEdyA9IF87CiAgICBUcih7CiAgICAgICAgdGFyZ2V0OiAiRGF0ZSIsCiAgICAgICAgcHJvdG86ICEwLAogICAgICAgIGZvcmNlZDogYygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gbmV3IERhdGUoTmFOKS50b0pTT04oKSB8fCAxICE9PSBBdyhEYXRlLnByb3RvdHlwZS50b0pTT04sIHsKICAgICAgICAgICAgICAgICAgICB0b0lTT1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgICkpCiAgICB9LCB7CiAgICAgICAgdG9KU09OOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gQ3codGhpcykKICAgICAgICAgICAgICAgICwgciA9IE93KHQsICJudW1iZXIiKTsKICAgICAgICAgICAgcmV0dXJuICJudW1iZXIiICE9IHR5cGVvZiByIHx8IGlzRmluaXRlKHIpID8gInRvSVNPU3RyaW5nImluIHQgfHwgIkRhdGUiICE9PSBEdyh0KSA/IHQudG9JU09TdHJpbmcoKSA6IEF3KFR3LCB0KSA6IG51bGwKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBCdyA9IGVlCiAgICAgICAgLCBqdyA9IGc7CiAgICBCdy5KU09OIHx8IChCdy5KU09OID0gewogICAgICAgIHN0cmluZ2lmeTogSlNPTi5zdHJpbmdpZnkKICAgIH0pOwogICAgdmFyIE13ID0gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgIHJldHVybiBqdyhCdy5KU09OLnN0cmluZ2lmeSwgbnVsbCwgYXJndW1lbnRzKQogICAgfQogICAgICAgICwgUncgPSBNdwogICAgICAgICwgTncgPSBUcgogICAgICAgICwgUHcgPSBEYXRlCiAgICAgICAgLCBJdyA9IGsoUHcucHJvdG90eXBlLmdldFRpbWUpOwogICAgTncoewogICAgICAgIHRhcmdldDogIkRhdGUiLAogICAgICAgIHN0YXQ6ICEwCiAgICB9LCB7CiAgICAgICAgbm93OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIEl3KG5ldyBQdykKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBMdyA9IGVlLkRhdGUubm93CiAgICAgICAgLCB6dyA9IEFlCiAgICAgICAgLCBHdyA9IFR5cGVFcnJvcgogICAgICAgICwgSHcgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgaWYgKCFkZWxldGUgZVt0XSkKICAgICAgICAgICAgdGhyb3cgbmV3IEd3KCJDYW5ub3QgZGVsZXRlIHByb3BlcnR5ICIgKyB6dyh0KSArICIgb2YgIiArIHp3KGUpKQogICAgfQogICAgICAgICwgRncgPSBKYQogICAgICAgICwgVXcgPSBNYXRoLmZsb29yCiAgICAgICAgLCBZdyA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICB2YXIgciA9IGUubGVuZ3RoOwogICAgICAgIGlmIChyIDwgOCkKICAgICAgICAgICAgZm9yICh2YXIgbiwgYSwgbyA9IDE7IG8gPCByOyApIHsKICAgICAgICAgICAgICAgIGZvciAoYSA9IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZVtvXTsgYSAmJiB0KGVbYSAtIDFdLCBuKSA+IDA7ICkKICAgICAgICAgICAgICAgICAgICBlW2FdID0gZVstLWFdOwogICAgICAgICAgICAgICAgYSAhPT0gbysrICYmIChlW2FdID0gbikKICAgICAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICAgICAgZm9yICh2YXIgcyA9IFV3KHIgLyAyKSwgYyA9IFl3KEZ3KGUsIDAsIHMpLCB0KSwgaSA9IFl3KEZ3KGUsIHMpLCB0KSwgdSA9IGMubGVuZ3RoLCBsID0gaS5sZW5ndGgsIGggPSAwLCBmID0gMDsgaCA8IHUgfHwgZiA8IGw7ICkKICAgICAgICAgICAgICAgIGVbaCArIGZdID0gaCA8IHUgJiYgZiA8IGwgPyB0KGNbaF0sIGlbZl0pIDw9IDAgPyBjW2grK10gOiBpW2YrK10gOiBoIDwgdSA/IGNbaCsrXSA6IGlbZisrXTsKICAgICAgICByZXR1cm4gZQogICAgfQogICAgICAgICwgSncgPSBZdwogICAgICAgICwgV3cgPSBjZS5tYXRjaCgvZmlyZWZveFwvKFxkKykvaSkKICAgICAgICAsIFh3ID0gISFXdyAmJiArV3dbMV0KICAgICAgICAsIEt3ID0gL01TSUV8VHJpZGVudC8udGVzdChjZSkKICAgICAgICAsIHF3ID0gY2UubWF0Y2goL0FwcGxlV2ViS2l0XC8oXGQrKVwuLykKICAgICAgICAsIFp3ID0gISFxdyAmJiArcXdbMV0KICAgICAgICAsIFZ3ID0gVHIKICAgICAgICAsIFF3ID0gawogICAgICAgICwgJHcgPSBEZQogICAgICAgICwgZV8gPSBxZQogICAgICAgICwgdF8gPSBHcgogICAgICAgICwgcl8gPSBIdwogICAgICAgICwgbl8gPSBLbgogICAgICAgICwgYV8gPSBjCiAgICAgICAgLCBvXyA9IEp3CiAgICAgICAgLCBzXyA9IEhnCiAgICAgICAgLCBjXyA9IFh3CiAgICAgICAgLCBpXyA9IEt3CiAgICAgICAgLCB1XyA9IHBlCiAgICAgICAgLCBsXyA9IFp3CiAgICAgICAgLCBoXyA9IFtdCiAgICAgICAgLCBmXyA9IFF3KGhfLnNvcnQpCiAgICAgICAgLCBnXyA9IFF3KGhfLnB1c2gpCiAgICAgICAgLCBwXyA9IGFfKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgaF8uc29ydCh2b2lkIDApCiAgICAgICAgfQogICAgKSkKICAgICAgICAsIHZfID0gYV8oKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBoXy5zb3J0KG51bGwpCiAgICAgICAgfQogICAgKSkKICAgICAgICAsIGJfID0gc18oInNvcnQiKQogICAgICAgICwgZF8gPSAhYV8oKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAodV8pCiAgICAgICAgICAgICAgICByZXR1cm4gdV8gPCA3MDsKICAgICAgICAgICAgaWYgKCEoY18gJiYgY18gPiAzKSkgewogICAgICAgICAgICAgICAgaWYgKGlfKQogICAgICAgICAgICAgICAgICAgIHJldHVybiAhMDsKICAgICAgICAgICAgICAgIGlmIChsXykKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbF8gPCA2MDM7CiAgICAgICAgICAgICAgICB2YXIgZSwgdCwgciwgbiwgYSA9ICIiOwogICAgICAgICAgICAgICAgZm9yIChlID0gNjU7IGUgPCA3NjsgZSsrKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShlKSwKICAgICAgICAgICAgICAgICAgICAgICAgZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcwOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2ODoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gMgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgNDc7IG4rKykKICAgICAgICAgICAgICAgICAgICAgICAgaF8ucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrOiB0ICsgbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHY6IHIKICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAoaF8uc29ydCgoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC52IC0gZS52CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMDsgbiA8IGhfLmxlbmd0aDsgbisrKQogICAgICAgICAgICAgICAgICAgIHQgPSBoX1tuXS5rLmNoYXJBdCgwKSwKICAgICAgICAgICAgICAgICAgICBhLmNoYXJBdChhLmxlbmd0aCAtIDEpICE9PSB0ICYmIChhICs9IHQpOwogICAgICAgICAgICAgICAgcmV0dXJuICJER0JFRkhBQ0lKSyIgIT09IGEKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICkpOwogICAgVncoewogICAgICAgIHRhcmdldDogIkFycmF5IiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgZm9yY2VkOiBwXyB8fCAhdl8gfHwgIWJfIHx8ICFkXwogICAgfSwgewogICAgICAgIHNvcnQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdm9pZCAwICE9PSBlICYmICR3KGUpOwogICAgICAgICAgICB2YXIgdCA9IGVfKHRoaXMpOwogICAgICAgICAgICBpZiAoZF8pCiAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAwID09PSBlID8gZl8odCkgOiBmXyh0LCBlKTsKICAgICAgICAgICAgdmFyIHIsIG4sIGEgPSBbXSwgbyA9IHRfKHQpOwogICAgICAgICAgICBmb3IgKG4gPSAwOyBuIDwgbzsgbisrKQogICAgICAgICAgICAgICAgbiBpbiB0ICYmIGdfKGEsIHRbbl0pOwogICAgICAgICAgICBmb3IgKG9fKGEsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCByKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gciA/IC0xIDogdm9pZCAwID09PSB0ID8gMSA6IHZvaWQgMCAhPT0gZSA/ICtlKHQsIHIpIHx8IDAgOiBuXyh0KSA+IG5fKHIpID8gMSA6IC0xCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0oZSkpLAogICAgICAgICAgICAgICAgICAgICByID0gdF8oYSksCiAgICAgICAgICAgICAgICAgICAgIG4gPSAwOyBuIDwgcjsgKQogICAgICAgICAgICAgICAgdFtuXSA9IGFbbisrXTsKICAgICAgICAgICAgZm9yICg7IG4gPCBvOyApCiAgICAgICAgICAgICAgICByXyh0LCBuKyspOwogICAgICAgICAgICByZXR1cm4gdAogICAgICAgIH0KICAgIH0pOwogICAgdmFyIGtfID0gV2coIkFycmF5IiwgInNvcnQiKQogICAgICAgICwgeV8gPSBzZQogICAgICAgICwgbV8gPSBrXwogICAgICAgICwgd18gPSBBcnJheS5wcm90b3R5cGUKICAgICAgICAsIF9fID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5zb3J0OwogICAgICAgIHJldHVybiBlID09PSB3XyB8fCB5Xyh3XywgZSkgJiYgdCA9PT0gd18uc29ydCA/IG1fIDogdAogICAgfQogICAgICAgICwgeF8gPSBxZQogICAgICAgICwgU18gPSB2YTsKICAgIFRyKHsKICAgICAgICB0YXJnZXQ6ICJPYmplY3QiLAogICAgICAgIHN0YXQ6ICEwLAogICAgICAgIGZvcmNlZDogYygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBTXygxKQogICAgICAgICAgICB9CiAgICAgICAgKSkKICAgIH0sIHsKICAgICAgICBrZXlzOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBTXyh4XyhlKSkKICAgICAgICB9CiAgICB9KTsKICAgIHZhciBFXyA9IGVlLk9iamVjdC5rZXlzCiAgICAgICAgLCBBXyA9IFdnKCJBcnJheSIsICJjb25jYXQiKQogICAgICAgICwgQ18gPSBzZQogICAgICAgICwgT18gPSBBXwogICAgICAgICwgVF8gPSBBcnJheS5wcm90b3R5cGUKICAgICAgICAsIERfID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gZS5jb25jYXQ7CiAgICAgICAgcmV0dXJuIGUgPT09IFRfIHx8IENfKFRfLCBlKSAmJiB0ID09PSBUXy5jb25jYXQgPyBPXyA6IHQKICAgIH07CiAgICBmdW5jdGlvbiBCXyhlLCB0KSB7CiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSA9PT0gIltvYmplY3QgIi5jb25jYXQodCwgIl0iKQogICAgfQogICAgZnVuY3Rpb24gal8oKSB7CiAgICAgICAgdmFyIGUsIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHt9LCByID0gdC5zaXplLCBuID0gdm9pZCAwID09PSByID8gMTAgOiByLCBhID0gdC5kaWN0VHlwZSwgbyA9IHZvaWQgMCA9PT0gYSA/ICJudW1iZXIiIDogYSwgcyA9IHQuY3VzdG9tRGljdCwgYyA9ICIiOwogICAgICAgIGlmIChzICYmICJzdHJpbmciID09IHR5cGVvZiBzKQogICAgICAgICAgICBlID0gczsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHN3aXRjaCAobykgewogICAgICAgICAgICAgICAgY2FzZSAiYWxwaGFiZXQiOgogICAgICAgICAgICAgICAgICAgIGUgPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJtYXgiOgogICAgICAgICAgICAgICAgICAgIGUgPSAiMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpfLSI7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGUgPSAiMDEyMzQ1Njc4OSIKICAgICAgICAgICAgfQogICAgICAgIGZvciAoOyBuLS07ICkKICAgICAgICAgICAgYyArPSBlW01hdGgucmFuZG9tKCkgKiBlLmxlbmd0aCB8IDBdOwogICAgICAgIHJldHVybiBjCiAgICB9CiAgICB2YXIgTV8gPSBbImg1c3QiLCAiX3N0ayIsICJfc3RlIl07CiAgICBmdW5jdGlvbiBSXyhlLCB0KSB7CiAgICAgICAgdCA9IHQgfHwgMDsKICAgICAgICBmb3IgKHZhciByID0gZS5sZW5ndGggLSB0LCBuID0gbmV3IEFycmF5KHIpOyByLS07ICkKICAgICAgICAgICAgbltyXSA9IGVbciArIHRdOwogICAgICAgIHJldHVybiBuCiAgICB9CiAgICBmdW5jdGlvbiBOXyhlKSB7CiAgICAgICAgdmFyIHQsIHIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICAgIHJldHVybiB3aW5kb3cuX19KRFdFQlNJR05IRUxQRVJfJERBVEFfXyA9IHdpbmRvdy5fX0pEV0VCU0lHTkhFTFBFUl8kREFUQV9fIHx8IHt9LAogICAgICAgICAgICB3aW5kb3cuX19KRFdFQlNJR05IRUxQRVJfJERBVEFfX1tlXSA9IHdpbmRvdy5fX0pEV0VCU0lHTkhFTFBFUl8kREFUQV9fW2VdIHx8ICgiZnVuY3Rpb24iID09IHR5cGVvZiAodCA9IHIpID8gdCgpIDogdCkKICAgIH0KICAgIHZhciBQXywgSV8sIExfID0gT2JqZWN0LmZyZWV6ZSh7CiAgICAgICAgX19wcm90b19fOiBudWxsLAogICAgICAgIGlzVmFsaWRXSUQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBXeShlKTsKICAgICAgICAgICAgcmV0dXJuIGUgJiYgQl8oZSwgIlN0cmluZyIpICYmIHQgJiYgQl8odCwgIk51bWJlciIpICYmIGUubGVuZ3RoID49IDkgJiYgZS5sZW5ndGggPD0gMTIKICAgICAgICB9LAogICAgICAgIGZvcm1hdFN0cmluZzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IGUuc3RyCiAgICAgICAgICAgICAgICAsIHIgPSBlLmxlbgogICAgICAgICAgICAgICAgLCBuID0gZS5lbGUKICAgICAgICAgICAgICAgICwgYSA9IHZvaWQgMCA9PT0gbiA/ICIwIiA6IG4KICAgICAgICAgICAgICAgICwgbyA9IGUudHlwZQogICAgICAgICAgICAgICAgLCBzID0gdm9pZCAwID09PSBvID8gInByZWZpeCIgOiBvOwogICAgICAgICAgICBpZiAoIShCXyh0LCAiU3RyaW5nIikgJiYgciAmJiBCXyhyLCAiTnVtYmVyIikgJiYgQl8oYSwgIlN0cmluZyIpICYmIDEgPT09IGEubGVuZ3RoKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiPT0+Zm9ybWF0U3RyaW5n77ya6L6T5YWl5LiN5ZCI5rOV44CCIik7CiAgICAgICAgICAgIGZvciAodmFyIGMgPSB0Lmxlbmd0aCwgaSA9ICIiLCB1ID0gMDsgdSA8IHIgLSBjOyB1KyspCiAgICAgICAgICAgICAgICBpICs9IGE7CiAgICAgICAgICAgIHJldHVybiAicHJlZml4IiA9PT0gcyA/IGkgKyB0IDogdCArIGkKICAgICAgICB9LAogICAgICAgIGlzVHlwZTogQl8sCiAgICAgICAgZ2V0UmFuZG9tSURQcm86IGpfLAogICAgICAgIG5vb3A6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgaXNTdHJpbmc6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiBlCiAgICAgICAgfSwKICAgICAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAiZnVuY3Rpb24iID09IHR5cGVvZiBlCiAgICAgICAgfSwKICAgICAgICB1bXBCaXo6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgaXNTYWZlUGFyYW1WYWx1ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IERnKGUpOwogICAgICAgICAgICByZXR1cm4gIm51bWJlciIgPT0gdCAmJiAhaXNOYU4oZSkgfHwgInN0cmluZyIgPT0gdCB8fCAiYm9vbGVhbiIgPT0gdAogICAgICAgIH0sCiAgICAgICAgUkVTRVJWRURfUEFSQU1fTkFNRVM6IE1fLAogICAgICAgIGNvbnRhaW5zUmVzZXJ2ZWRQYXJhbU5hbWU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IEVfKGUpLCByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdFtyXTsKICAgICAgICAgICAgICAgIGlmIChybShNXykuY2FsbChNXywgbikgPj0gMCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gITEKICAgICAgICB9LAogICAgICAgIHRvQXJyYXk6IFJfLAogICAgICAgIHRvQmFzZTY0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAoZSArIG5tKCI9PT0iKS5jYWxsKCI9PT0iLCAoZS5sZW5ndGggKyAzKSAlIDQpKS5yZXBsYWNlKC8tL2csICIrIikucmVwbGFjZSgvXy9nLCAiLyIpCiAgICAgICAgfSwKICAgICAgICBmcm9tQmFzZTY0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiBlLnJlcGxhY2UoL1wrL2csICItIikucmVwbGFjZSgvXC8vZywgIl8iKS5yZXBsYWNlKC89L2csICIiKQogICAgICAgIH0sCiAgICAgICAgbG9nOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCByID0gYXJndW1lbnRzLmxlbmd0aCwgbiA9IG5ldyBBcnJheShyID4gMSA/IHIgLSAxIDogMCksIGEgPSAxOyBhIDwgcjsgYSsrKQogICAgICAgICAgICAgICAgICAgIG5bYSAtIDFdID0gYXJndW1lbnRzW2FdOwogICAgICAgICAgICAgICAgdmFyIG8gPSBSXyhuKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIERfKHQgPSBbIltzaWduXSAiXSkuY2FsbCh0LCBvKSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXNzaWduOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmIChudWxsID09IGUpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QiKTsKICAgICAgICAgICAgZSA9IE9iamVjdChlKTsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBhcmd1bWVudHMubGVuZ3RoOyB0KyspIHsKICAgICAgICAgICAgICAgIHZhciByID0gYXJndW1lbnRzW3RdOwogICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gcikKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHIpCiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLCBuKSAmJiAoZVtuXSA9IHJbbl0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICB9LAogICAgICAgIHVzZVZhcjogTl8KICAgIH0pOwogICAgd2luZG93Ll9fTUlDUk9fQVBQX0VOVklST05NRU5UX18gfHwgKG51bGwgPT09IChQXyA9IHdpbmRvdy5yYXdXaW5kb3cpIHx8IHZvaWQgMCA9PT0gUF8gPyB2b2lkIDAgOiBQXy5fX01JQ1JPX0FQUF9FTlZJUk9OTUVOVF9fKSB8fCB3aW5kb3cuX19NSUNST19BUFBfUFJPWFlfV0lORE9XX18gfHwgd2luZG93Ll9fTUlDUk9fQVBQX0JBU0VfQVBQTElDQVRJT05fXyB8fCAod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPSAoSV8gPSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvciwKICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gTl8oIm1haW4uc2lnbiNfX2RldGVjdGluZyIsIHt9KQogICAgICAgICAgICAgICAgICAgICAgICAsIHQgPSBuZXcgRXJyb3IoInRlc3QgZXJyIik7CiAgICAgICAgICAgICAgICAgICAgZS5xdWVyeVNlbGVjdG9yID0gdC5zdGFjay50b1N0cmluZygpCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgcmV0dXJuIElfLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgfQogICAgKSk7CiAgICB2YXIgel8gPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH0KICAgICAgICAsIEdfID0gcihMXykKICAgICAgICAsIEhfID0gZW5jb2RlVVJJQ29tcG9uZW50CiAgICAgICAgLCBGXyA9IEdfLmxvZwogICAgICAgICwgVV8gPSB7CiAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICByZXRyeTogMCwKICAgICAgICBub1Rva2VuOiAhMSwKICAgICAgICBoZWFkZXI6IG51bGwsCiAgICAgICAgZW5jb2Rpbmc6ICJ1dGYtOCIsCiAgICAgICAgeGhyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QKICAgICAgICB9LAogICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgYWNjZXB0czogewogICAgICAgICAgICBzY3JpcHQ6ICJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdCIsCiAgICAgICAgICAgIGpzb246ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICAgeG1sOiAiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsCiAgICAgICAgICAgIGh0bWw6ICJ0ZXh0L2h0bWwiLAogICAgICAgICAgICB0ZXh0OiAidGV4dC9wbGFpbiIKICAgICAgICB9LAogICAgICAgIGNyb3NzRG9tYWluOiAhMSwKICAgICAgICB0aW1lb3V0OiA4LAogICAgICAgIGV4cGlyZTogITEsCiAgICAgICAgc2V0UmVwb3J0VXJsOiAiIgogICAgfTsKICAgIGZ1bmN0aW9uIFlfKGUpIHsKICAgICAgICBlID0gZSB8fCB7fTsKICAgICAgICBmb3IgKHZhciB0ID0gYXJndW1lbnRzLCByID0gMSwgbiA9IHQubGVuZ3RoOyByIDwgbjsgcisrKQogICAgICAgICAgICBmb3IgKHZhciBhIGluIHRbcl0pCiAgICAgICAgICAgICAgICAib2JqZWN0IiA9PSBEZyh0W3JdW2FdKSA/IGVbYV0gPSBZXyhlW2FdLCB0W3JdW2FdKSA6IHZvaWQgMCA9PT0gZVthXSAmJiAoZVthXSA9IHRbcl1bYV0pOwogICAgICAgIHJldHVybiBlCiAgICB9CiAgICBmdW5jdGlvbiBKXyhlKSB7CiAgICAgICAgdmFyIHQ7CiAgICAgICAgaWYgKCFlKQogICAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgdmFyIHIgPSBZXyhlLCBVXyk7CiAgICAgICAgci5tZXRob2QgPSByLm1ldGhvZC50b1VwcGVyQ2FzZSgpLAogICAgICAgIHIua2VlcFByb3RvY2FsIHx8IChyLnVybCA9IHIudXJsLnJlcGxhY2UoL15odHRwOi8sICIiKSksCiAgICAgICAgci5jcm9zc0RvbWFpbiB8fCAoci5jcm9zc0RvbWFpbiA9IC9eKFtcdy1dKzopP1wvXC8oW14vXSspLy50ZXN0KHIudXJsKSAmJiBSZWdFeHAuJDIgIT0gd2luZG93LmxvY2F0aW9uLmhvc3QpLAogICAgICAgIHIuY3Jvc3NEb21haW4gJiYgIXIubm9DcmVkZW50aWFscyAmJiAoci54aHJGaWVsZHMgPSB7CiAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogITAKICAgICAgICB9KSwKICAgICAgICByLnVybCB8fCAoci51cmwgPSB3aW5kb3cubG9jYXRpb24udG9TdHJpbmcoKSk7CiAgICAgICAgdmFyIG4sIGEgPSByLmRhdGFUeXBlLCBvID0gci5hY2NlcHRzW2FdLCBzID0ge30sIGMgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHNbZS50b0xvd2VyQ2FzZSgpXSA9IFtlLCB0XQogICAgICAgIH0sIGkgPSAvXihbXHctXSs6KVwvXC8vLnRlc3Qoci51cmwpID8gUmVnRXhwLiQxIDogd2luZG93LmxvY2F0aW9uLnByb3RvY29sLCB1ID0gci54aHIoKSwgbCA9IHUuc2V0UmVxdWVzdEhlYWRlcjsKICAgICAgICBpZiAoci5jcm9zc0RvbWFpbiB8fCBjKCJYLVJlcXVlc3RlZC1XaXRoIiwgIlhNTEh0dHBSZXF1ZXN0IiksCiAgICAgICAgICAgIGMoIkFjY2VwdCIsIG8gfHwgIiovKiIpLAogICAgICAgIChvID0gci5taW1lVHlwZSkgJiYgKHJtKG8pLmNhbGwobywgIiwiKSA+IC0xICYmIChvID0gby5zcGxpdCgiLCIsIDIpWzBdKSwKICAgICAgICB1Lm92ZXJyaWRlTWltZVR5cGUgJiYgdS5vdmVycmlkZU1pbWVUeXBlKG8pKSwKICAgICAgICAoci5jb250ZW50VHlwZSB8fCAhMSAhPT0gci5jb250ZW50VHlwZSAmJiByLmRhdGEgJiYgIkdFVCIgIT0gci5tZXRob2QpICYmIGMoIkNvbnRlbnQtVHlwZSIsIHIuY29udGVudFR5cGUgfHwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpLAogICAgICAgICAgICByLmhlYWRlcnMpCiAgICAgICAgICAgIGZvciAodmFyIGggaW4gci5oZWFkZXJzKQogICAgICAgICAgICAgICAgYyhoLCByLmhlYWRlcnNbaF0pOwogICAgICAgIHUuc2V0UmVxdWVzdEhlYWRlciA9IGMsCiAgICAgICAgICAgIHUub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAoNCA9PSB1LnJlYWR5U3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICB1Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IEtfLAogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobik7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUsIHQgPSAhMTsKICAgICAgICAgICAgICAgICAgICBpZiAodS5zdGF0dXMgPj0gMjAwICYmIHUuc3RhdHVzIDwgMzAwIHx8IDMwNCA9PSB1LnN0YXR1cyB8fCAwID09IHUuc3RhdHVzICYmICJmaWxlOiIgPT0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICBlID0gdS5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAic2NyaXB0IiA9PSBhID8gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbCkoZSkgOiAieG1sIiA9PSBhID8gZSA9IHUucmVzcG9uc2VYTUwgOiAianNvbiIgPT0gYSAmJiAoZSA9IC9eXHMqJC8udGVzdChlKSA/IG51bGwgOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8ICJzdHJpbmciICE9IHR5cGVvZiBlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA9IGUucmVwbGFjZSgvXlxzK3xccyskL2csICIiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA/IEpTT04ucGFyc2UoZSkgOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUpKQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHQgPyBXXyh0LCAicGFyc2VyZXJyb3IiLCB1LCByKSA6IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gci5jb250ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gInN1Y2Nlc3MiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5zdWNjZXNzLmNhbGwobiwgZSwgciwgYSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB1LCByKQogICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICBGXyhyLmRlYnVnLCAiYWpheCBlcnJvciIsIHUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgV18odS5zdGF0dXNUZXh0IHx8IG51bGwsICJsb2FkIiwgdSwgcikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIDsKICAgICAgICB2YXIgZiA9ICEoImFzeW5jImluIHIpIHx8IHIuYXN5bmM7CiAgICAgICAgaWYgKHIueGhyRmllbGRzKQogICAgICAgICAgICBmb3IgKHZhciBnIGluIHIueGhyRmllbGRzKQogICAgICAgICAgICAgICAgdVtnXSA9IHIueGhyRmllbGRzW2ddOwogICAgICAgIGZvciAodmFyIHAgaW4gdS5vcGVuKHIubWV0aG9kLCByLnVybCwgZiwgci51c2VybmFtZSwgci5wYXNzd29yZCksCiAgICAgICAgICAgIHMpCiAgICAgICAgICAgIGwuYXBwbHkodSwgc1twXSk7CiAgICAgICAgaWYgKHIudGltZW91dCA+IDAgJiYgKG4gPSBzZXRUaW1lb3V0KChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHUub25yZWFkeXN0YXRlY2hhbmdlID0gS18sCiAgICAgICAgICAgICAgICAgICAgdS5hYm9ydCgpLAogICAgICAgICAgICAgICAgICAgIFdfKG51bGwsICJ0aW1lb3V0IiwgdSwgcikKICAgICAgICAgICAgfQogICAgICAgICksIDFlMyAqIHIudGltZW91dCkpLAogICAgICAgICJQT1NUIiA9PSByLm1ldGhvZCAmJiBlLmRhdGEgJiYgIm9iamVjdCIgPT0gRGcoZS5kYXRhKSAmJiByLmNvbnRlbnRUeXBlICYmIHJtKHQgPSByLmNvbnRlbnRUeXBlKS5jYWxsKHQsICJtdWx0aXBhcnQvZm9ybS1kYXRhIikgPj0gMCkgewogICAgICAgICAgICB2YXIgdiA9IG5ldyBGb3JtRGF0YTsKICAgICAgICAgICAgZm9yICh2YXIgYiBpbiByLmRhdGEpCiAgICAgICAgICAgICAgICB2LmFwcGVuZChbYl0sIHIuZGF0YVtiXSk7CiAgICAgICAgICAgIHIuZGF0YSA9IHYKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHUuc2VuZChyLmRhdGEgPyByLmRhdGEgOiBudWxsKSwKICAgICAgICAgICAgdQogICAgfQogICAgZnVuY3Rpb24gV18oZSwgdCwgciwgbikgewogICAgICAgIHZhciBhOwogICAgICAgIG4ucmV0cnkgPD0gMCB8fCAiUE9TVCIgPT09IG4ubWV0aG9kIHx8IHJtKGEgPSBbImVycm9yIiwgInBhcnNlcmVycm9yIl0pLmNhbGwoYSwgdCkgPj0gMCA/IFhfKGUsIHQsIHIsIG4pIDogc2V0VGltZW91dCgoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBuLnVybCA9IG4udXJsLnJlcGxhY2UoLygmKT8oX3xnX3RrfGdfdHl8Y2FsbGJhY2spPVx3Ky9nLCAiIiksCiAgICAgICAgICAgICAgICAgICAgbi5yZXRyeS0tLAogICAgICAgICAgICAgICAgICAgIEpfKG4pCiAgICAgICAgICAgIH0KICAgICAgICApLCAwKQogICAgfQogICAgZnVuY3Rpb24gWF8oZSwgdCwgciwgbikgewogICAgICAgIHZhciBhID0gbi5jb250ZXh0OwogICAgICAgIEZfKG4uZGVidWcsIG4udXJsLCB0LCBlKTsKICAgICAgICBuLmVycm9yLmNhbGwoYSwgewogICAgICAgICAgICBjb2RlOiB7CiAgICAgICAgICAgICAgICB0aW1lb3V0OiA4ZTMsCiAgICAgICAgICAgICAgICBlcnJvcjogNWUzLAogICAgICAgICAgICAgICAgbG9hZDogMzAyMCwKICAgICAgICAgICAgICAgIGFib3J0OiA1MDAxLAogICAgICAgICAgICAgICAgcGFyc2VyZXJyb3I6IDMwMjEKICAgICAgICAgICAgfVt0XSB8fCA5ZTMsCiAgICAgICAgICAgIG1lc3NhZ2U6IHQKICAgICAgICB9LCBuLCBlLCByKQogICAgfQogICAgZnVuY3Rpb24gS18oKSB7fQogICAgZnVuY3Rpb24gcV8oZSkgewogICAgICAgIGlmIChlLmRhdGEgJiYgInN0cmluZyIgIT0gdHlwZW9mIGUuZGF0YSkgewogICAgICAgICAgICBpZiAoIlBPU1QiID09PSBlLm1ldGhvZCAmJiBlLmpzb25wQ2FsbGJhY2spCiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGUuZGF0YSA9ICh0ID0gZS5kYXRhLAogICAgICAgICAgICAgICAgKHIgPSBbXSkuYWRkID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaChIXyhlKSArICI9IiArICgib2JqZWN0IiA9PSBEZyh0KSA/IFJ3KHQpIDogSF8odCkpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgaW4gdCkKICAgICAgICAgICAgICAgICAgICAgICAgZS5hZGQociwgdFtyXSkKICAgICAgICAgICAgICAgIH0ociwgdCksCiAgICAgICAgICAgICAgICByLmpvaW4oIiYiKS5yZXBsYWNlKC8lMjAvZywgIisiKSkKICAgICAgICB9CiAgICAgICAgdmFyIHQsIHIsIG4sIGE7CiAgICAgICAgZS5kYXRhICYmICJHRVQiID09PSBlLm1ldGhvZCAmJiAoZS51cmwgPSAobiA9IGUudXJsLAogICAgICAgICAgICAiIiA9PSAoYSA9IGUuZGF0YSkgPyBuIDogKG4gKyAiJiIgKyBhKS5yZXBsYWNlKC9bJj9dezEsMn0vLCAiPyIpKSwKICAgICAgICAgICAgZS5kYXRhID0gdm9pZCAwKQogICAgfQogICAgZnVuY3Rpb24gWl8oZSkgewogICAgICAgIHJldHVybiBuZXcgWm0oKGZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICAgICAgICAgIHZhciBuOwogICAgICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IFZfKGUpOwogICAgICAgICAgICAgICAgICAgIGEuc3VjY2VzcyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDk5OSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAgICAgICAgIGEuZXJyb3IgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByKGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgICAgICFhLm1ldGhvZCB8fCBhLmNvbnRlbnRUeXBlICYmIC0xICE9PSBybShuID0gYS5jb250ZW50VHlwZSkuY2FsbChuLCAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIpIHx8IHFfKGEpLAogICAgICAgICAgICAgICAgICAgICAgICBKXyhhKQogICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgcigpCiAgICAgICAgICAgIH0KICAgICAgICApKQogICAgfQogICAgZnVuY3Rpb24gVl8oZSkgewogICAgICAgIHZhciB0ID0gZSBpbnN0YW5jZW9mIEFycmF5ID8gW10gOiB7fTsKICAgICAgICBmb3IgKHZhciByIGluIGUpCiAgICAgICAgICAgIHRbcl0gPSAib2JqZWN0IiA9PT0gRGcoZVtyXSkgJiYgbnVsbCAhPT0gZVtyXSA/IFZfKGVbcl0pIDogZVtyXTsKICAgICAgICByZXR1cm4gdAogICAgfQogICAgZnVuY3Rpb24gUV8oZSkgewogICAgICAgIGZvciAodmFyIHQgPSAxLCByID0gYXJndW1lbnRzLmxlbmd0aDsgdCA8IHI7IHQrKykKICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBhcmd1bWVudHNbdF0pCiAgICAgICAgICAgICAgICBlW25dID0gYXJndW1lbnRzW3RdW25dOwogICAgICAgIHJldHVybiBlCiAgICB9CiAgICBmdW5jdGlvbiAkXyhlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICAgICAgdmFyIG4gPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IHt9OwogICAgICAgICAgICAgICAgcmV0dXJuICJvYmplY3QiID09IERnKHQpID8gUV8ociwgdCwgewogICAgICAgICAgICAgICAgICAgIHVybDogZQogICAgICAgICAgICAgICAgfSkgOiBRXyhyLCAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IHsKICAgICAgICAgICAgICAgICAgICB1cmw6IGUKICAgICAgICAgICAgICAgIH0gOiBlKSwKICAgICAgICAgICAgICAgICAgICByCiAgICAgICAgICAgIH0odCwgcik7CiAgICAgICAgICAgIHJldHVybiBuLm1ldGhvZCA9IGUsCiAgICAgICAgICAgICAgICBaXyhuKQogICAgICAgIH0KICAgIH0KICAgIHpfLmV4cG9ydHMgPSBaXywKICAgICAgICB6Xy5leHBvcnRzLmdldCA9ICRfKCJHRVQiKSwKICAgICAgICB6Xy5leHBvcnRzLnBvc3QgPSAkXygiUE9TVCIpOwogICAgdmFyIGV4ID0gel8uZXhwb3J0cwogICAgICAgICwgdHggPSAiaDVfZmlsZV92NC43LjQiCiAgICAgICAgLCByeCA9ICIwLjEuNSIKICAgICAgICAsIG54ID0gT2JqZWN0LmZyZWV6ZSh7CiAgICAgICAgX19wcm90b19fOiBudWxsLAogICAgICAgIENPT0tJRTogewogICAgICAgICAgICBEWU5BTUlDX1RPS0VOOiAiV1FfZHlfdGtfcyIsCiAgICAgICAgICAgIERZTkFNSUNfQUxHT1JJVEhNOiAiV1FfZHlfYWxnb19zIiwKICAgICAgICAgICAgVks6ICJXUV92azEiCiAgICAgICAgfSwKICAgICAgICBMT0NBTF9BTEdPUklUSE1fUFJFRklYOiAibG9jYWxfa2V5XyIsCiAgICAgICAgRU5WSVJPTk1FTlQ6IDEsCiAgICAgICAgX19KU19TRUNVUklUWV9WRVJTSU9OOiB0eCwKICAgICAgICBfX0pTX1NFQ1VSSVRZX0JVQ0tFVF9JTkRFWDogcngKICAgIH0pOwogICAgdmFyIGF4ID0gT2JqZWN0LmZyZWV6ZSh7CiAgICAgICAgX19wcm90b19fOiBudWxsLAogICAgICAgIHJlcXVlc3RBbGdvcml0aG06IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgdmFyIHIgPSBlLmZpbmdlcnByaW50CiAgICAgICAgICAgICAgICAsIG4gPSBlLmFwcElkCiAgICAgICAgICAgICAgICAsIGEgPSBlLnZlcnNpb24KICAgICAgICAgICAgICAgICwgbyA9IGUuZW52CiAgICAgICAgICAgICAgICAsIHMgPSBlLmRlYnVnOwogICAgICAgICAgICByZXR1cm4gbmV3IFptKChmdW5jdGlvbihlLCBjKSB7CiAgICAgICAgICAgICAgICAgICAgZXgucG9zdCgiaHR0cHM6Ly9jYWN0dXMuamQuY29tL3JlcXVlc3RfYWxnbyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJqc29uIiwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogUncoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZwOiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwSWQ6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogIndlYiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBhbmRQYXJhbXM6IG8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdjogdHgKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIG5vQ3JlZGVudGlhbHM6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAyLAogICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZzogcwogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKGZ1bmN0aW9uKHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gci5ib2R5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogbi5zdGF0dXMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMjAwID09PSBuLnN0YXR1cyAmJiBuLmRhdGEgJiYgbi5kYXRhLnJlc3VsdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gbi5kYXRhLnJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG8gPSBhLmFsZ28KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzID0gYS50awogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGkgPSBhLmZwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgdSA9IG4uZGF0YS50czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIHMgJiYgaSA/IGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGdvOiBvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnA6IGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRzOiB1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkgOiBjKCJkYXRhLnJlc3VsdCBmb3JtYXQgZXJyb3IuIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMoInJlcXVlc3QgcGFyYW1zIGVycm9yLiIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKS5jYXRjaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIsIG4gPSBlLmNvZGUsIGEgPSBlLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIHQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IG4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhEXyhyID0gInJlcXVlc3QgZXJyb3IsICIuY29uY2F0KG4sICIsICIpKS5jYWxsKHIsIGEpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSkKICAgICAgICB9CiAgICB9KQogICAgICAgICwgb3ggPSByKGF4KQogICAgICAgICwgc3ggPSByKG54KTsKICAgIGZ1bmN0aW9uIGN4KGUpIHsKICAgICAgICB2YXIgdCA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgaWYgKCJvYmplY3QiICE9IERnKGUpIHx8ICFlKQogICAgICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgICAgIHZhciByID0gZVtTeV07CiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gci5jYWxsKGUsIHQgfHwgImRlZmF1bHQiKTsKICAgICAgICAgICAgICAgIGlmICgib2JqZWN0IiAhPSBEZyhuKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbjsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gKCJzdHJpbmciID09PSB0ID8gU3RyaW5nIDogTnVtYmVyKShlKQogICAgICAgIH0oZSwgInN0cmluZyIpOwogICAgICAgIHJldHVybiAic3ltYm9sIiA9PSBEZyh0KSA/IHQgOiB0ICsgIiIKICAgIH0KICAgIGZ1bmN0aW9uIGl4KGUsIHQpIHsKICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IHQubGVuZ3RoOyByKyspIHsKICAgICAgICAgICAgdmFyIG4gPSB0W3JdOwogICAgICAgICAgICBuLmVudW1lcmFibGUgPSBuLmVudW1lcmFibGUgfHwgITEsCiAgICAgICAgICAgICAgICBuLmNvbmZpZ3VyYWJsZSA9ICEwLAogICAgICAgICAgICAidmFsdWUiaW4gbiAmJiAobi53cml0YWJsZSA9ICEwKSwKICAgICAgICAgICAgICAgIGRnKGUsIGN4KG4ua2V5KSwgbikKICAgICAgICB9CiAgICB9CiAgICB2YXIgdXgsIGx4LCBoeCA9IG5ldyAoZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuIGUgPSBmdW5jdGlvbiBlKCkgewogICAgICAgICAgICAhZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKQogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpCiAgICAgICAgICAgIH0odGhpcywgZSksCiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB7fQogICAgICAgIH0KICAgICAgICAgICAgLAogICAgICAgICh0ID0gW3sKICAgICAgICAgICAga2V5OiAiZ2V0SXRlbSIsCiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2VdCiAgICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICAgIGtleTogInNldEl0ZW0iLAogICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgdGhpcy5kYXRhW2VdID0gdAogICAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAgICBrZXk6ICJyZW1vdmVJdGVtIiwKICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbZV0KICAgICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgICAga2V5OiAiY2xlYXIiLAogICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSB7fQogICAgICAgICAgICB9CiAgICAgICAgfV0pICYmIGl4KGUucHJvdG90eXBlLCB0KSwKICAgICAgICByICYmIGl4KGUsIHIpLAogICAgICAgICAgICBkZyhlLCAicHJvdG90eXBlIiwgewogICAgICAgICAgICAgICAgd3JpdGFibGU6ICExCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBlOwogICAgICAgIHZhciBlLCB0LCByCiAgICB9KCkpLCBmeCA9ICh1eCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UsCiAgICAgICAgewogICAgICAgICAgICBzZXRJdGVtOiBmdW5jdGlvbihlLCB0LCByLCBuLCBhKSB7CiAgICAgICAgICAgICAgICB2YXIgbywgcyA9IHsKICAgICAgICAgICAgICAgICAgICB2OiB0LAogICAgICAgICAgICAgICAgICAgIHQ6IChuZXcgRGF0ZSkuZ2V0VGltZSgpLAogICAgICAgICAgICAgICAgICAgIGU6ICJudW1iZXIiICE9IHR5cGVvZiByID8gMCA6IHIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIG8gPSBSdyhzKQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIGlmIChoeC5zZXRJdGVtKGUsIG8pLAogICAgICAgICAgICAgICAgMCA9PT0gbikKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICB1eC5zZXRJdGVtKGUsIG8pLAogICAgICAgICAgICAgICAgICAgICAgICBhICYmIGEoMCkKICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGEgJiYgYSgxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXguc2V0SXRlbShlLCBvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIDApCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXRJdGVtOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB2YXIgdCwgciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogMCwgbiA9IGh4LmdldEl0ZW0oZSk7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIG4gJiYgMSAhPT0gciB8fCAobiA9IHV4LmdldEl0ZW0oZSkpICYmIGh4LnNldEl0ZW0oZSwgbikKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICBpZiAoIW4pCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0ID0gSlNPTi5wYXJzZShuKQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgIHJldHVybiAhdCB8fCAhdC50IHx8ICF0LmUgfHwgMCA9PT0gdC5lIHx8IG5ldyBEYXRlIC0gdC50ID49IDFlMyAqIHQuZSA/IChseChlKSwKICAgICAgICAgICAgICAgICAgICAiIikgOiB0LnYKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVtb3ZlSXRlbTogbHggPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGh4LnJlbW92ZUl0ZW0oZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHV4LnJlbW92ZUl0ZW0oZSkKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIH0KICAgICAgICB9KSwgZ3ggPSB7CiAgICAgICAgZ2V0U3luYzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCwgciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHQgPSBmeC5nZXRJdGVtKGUsIHIpCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgfSwKICAgICAgICBzZXRTeW5jOiBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbM10gPyBhcmd1bWVudHNbM10gOiAwCiAgICAgICAgICAgICAgICAsIGEgPSBhcmd1bWVudHMubGVuZ3RoID4gNCA/IGFyZ3VtZW50c1s0XSA6IHZvaWQgMDsKICAgICAgICAgICAgZnguc2V0SXRlbShlLCB0LCByLmV4cGlyZSwgbiwgYSkKICAgICAgICB9LAogICAgICAgIHJlbW92ZVN5bmM6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgZngucmVtb3ZlSXRlbShlKQogICAgICAgIH0KICAgIH07CiAgICB2YXIgcHggPSBUcgogICAgICAgICwgdnggPSBxZQogICAgICAgICwgYnggPSAkbgogICAgICAgICwgZHggPSBOcgogICAgICAgICwga3ggPSBHcgogICAgICAgICwgeXggPSBvcAogICAgICAgICwgbXggPSBGcgogICAgICAgICwgd3ggPSBDbgogICAgICAgICwgX3ggPSBXcgogICAgICAgICwgeHggPSBIdwogICAgICAgICwgU3ggPSBCbigic3BsaWNlIikKICAgICAgICAsIEV4ID0gTWF0aC5tYXgKICAgICAgICAsIEF4ID0gTWF0aC5taW47CiAgICBweCh7CiAgICAgICAgdGFyZ2V0OiAiQXJyYXkiLAogICAgICAgIHByb3RvOiAhMCwKICAgICAgICBmb3JjZWQ6ICFTeAogICAgfSwgewogICAgICAgIHNwbGljZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgciwgbiwgYSwgbywgcywgYywgaSA9IHZ4KHRoaXMpLCB1ID0ga3goaSksIGwgPSBieChlLCB1KSwgaCA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgICAgICAgIGZvciAoMCA9PT0gaCA/IHIgPSBuID0gMCA6IDEgPT09IGggPyAociA9IDAsCiAgICAgICAgICAgICAgICBuID0gdSAtIGwpIDogKHIgPSBoIC0gMiwKICAgICAgICAgICAgICAgIG4gPSBBeChFeChkeCh0KSwgMCksIHUgLSBsKSksCiAgICAgICAgICAgICAgICAgICAgIG14KHUgKyByIC0gbiksCiAgICAgICAgICAgICAgICAgICAgIGEgPSB3eChpLCBuKSwKICAgICAgICAgICAgICAgICAgICAgbyA9IDA7IG8gPCBuOyBvKyspCiAgICAgICAgICAgICAgICAocyA9IGwgKyBvKWluIGkgJiYgX3goYSwgbywgaVtzXSk7CiAgICAgICAgICAgIGlmIChhLmxlbmd0aCA9IG4sCiAgICAgICAgICAgIHIgPCBuKSB7CiAgICAgICAgICAgICAgICBmb3IgKG8gPSBsOyBvIDwgdSAtIG47IG8rKykKICAgICAgICAgICAgICAgICAgICBjID0gbyArIHIsCiAgICAgICAgICAgICAgICAgICAgICAgIChzID0gbyArIG4paW4gaSA/IGlbY10gPSBpW3NdIDogeHgoaSwgYyk7CiAgICAgICAgICAgICAgICBmb3IgKG8gPSB1OyBvID4gdSAtIG4gKyByOyBvLS0pCiAgICAgICAgICAgICAgICAgICAgeHgoaSwgbyAtIDEpCiAgICAgICAgICAgIH0gZWxzZSBpZiAociA+IG4pCiAgICAgICAgICAgICAgICBmb3IgKG8gPSB1IC0gbjsgbyA+IGw7IG8tLSkKICAgICAgICAgICAgICAgICAgICBjID0gbyArIHIgLSAxLAogICAgICAgICAgICAgICAgICAgICAgICAocyA9IG8gKyBuIC0gMSlpbiBpID8gaVtjXSA9IGlbc10gOiB4eChpLCBjKTsKICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IHI7IG8rKykKICAgICAgICAgICAgICAgIGlbbyArIGxdID0gYXJndW1lbnRzW28gKyAyXTsKICAgICAgICAgICAgcmV0dXJuIHl4KGksIHUgLSBuICsgciksCiAgICAgICAgICAgICAgICBhCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgQ3ggPSBXZygiQXJyYXkiLCAic3BsaWNlIikKICAgICAgICAsIE94ID0gc2UKICAgICAgICAsIFR4ID0gQ3gKICAgICAgICAsIER4ID0gQXJyYXkucHJvdG90eXBlCiAgICAgICAgLCBCeCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuc3BsaWNlOwogICAgICAgIHJldHVybiBlID09PSBEeCB8fCBPeChEeCwgZSkgJiYgdCA9PT0gRHguc3BsaWNlID8gVHggOiB0CiAgICB9CiAgICAgICAgLCBqeCA9IERlCiAgICAgICAgLCBNeCA9IHFlCiAgICAgICAgLCBSeCA9IFkKICAgICAgICAsIE54ID0gR3IKICAgICAgICAsIFB4ID0gVHlwZUVycm9yCiAgICAgICAgLCBJeCA9ICJSZWR1Y2Ugb2YgZW1wdHkgYXJyYXkgd2l0aCBubyBpbml0aWFsIHZhbHVlIgogICAgICAgICwgTHggPSBmdW5jdGlvbihlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgdmFyIG8gPSBNeCh0KQogICAgICAgICAgICAgICAgLCBzID0gUngobykKICAgICAgICAgICAgICAgICwgYyA9IE54KG8pOwogICAgICAgICAgICBpZiAoangociksCiAgICAgICAgICAgIDAgPT09IGMgJiYgbiA8IDIpCiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHgoSXgpOwogICAgICAgICAgICB2YXIgaSA9IGUgPyBjIC0gMSA6IDAKICAgICAgICAgICAgICAgICwgdSA9IGUgPyAtMSA6IDE7CiAgICAgICAgICAgIGlmIChuIDwgMikKICAgICAgICAgICAgICAgIGZvciAoOyA7ICkgewogICAgICAgICAgICAgICAgICAgIGlmIChpIGluIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHNbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICs9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChpICs9IHUsCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPyBpIDwgMCA6IGMgPD0gaSkKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFB4KEl4KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKDsgZSA/IGkgPj0gMCA6IGMgPiBpOyBpICs9IHUpCiAgICAgICAgICAgICAgICBpIGluIHMgJiYgKGEgPSByKGEsIHNbaV0sIGksIG8pKTsKICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICB9CiAgICB9CiAgICAgICAgLCB6eCA9IHsKICAgICAgICBsZWZ0OiBMeCghMSksCiAgICAgICAgcmlnaHQ6IEx4KCEwKQogICAgfS5sZWZ0OwogICAgVHIoewogICAgICAgIHRhcmdldDogIkFycmF5IiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgZm9yY2VkOiAhY3YgJiYgcGUgPiA3OSAmJiBwZSA8IDgzIHx8ICFIZygicmVkdWNlIikKICAgIH0sIHsKICAgICAgICByZWR1Y2U6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgICAgICByZXR1cm4gengodGhpcywgZSwgdCwgdCA+IDEgPyBhcmd1bWVudHNbMV0gOiB2b2lkIDApCiAgICAgICAgfQogICAgfSk7CiAgICB2YXIgR3ggPSBXZygiQXJyYXkiLCAicmVkdWNlIikKICAgICAgICAsIEh4ID0gc2UKICAgICAgICAsIEZ4ID0gR3gKICAgICAgICAsIFV4ID0gQXJyYXkucHJvdG90eXBlCiAgICAgICAgLCBZeCA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUucmVkdWNlOwogICAgICAgIHJldHVybiBlID09PSBVeCB8fCBIeChVeCwgZSkgJiYgdCA9PT0gVXgucmVkdWNlID8gRnggOiB0CiAgICB9OwogICAgZnVuY3Rpb24gSngoZSkgewogICAgICAgIHJldHVybiAiW29iamVjdCBPYmplY3RdIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpCiAgICB9CiAgICB2YXIgV3ggPSBucgogICAgICAgICwgWHggPSBoaAogICAgICAgICwgS3ggPSBWdAogICAgICAgICwgcXggPSBqCiAgICAgICAgLCBaeCA9IHFlCiAgICAgICAgLCBWeCA9IGZ1bmN0aW9uKGUsIHQsIHIsIG4pIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gbiA/IHQoV3gocilbMF0sIHJbMV0pIDogdChyKQogICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgWHgoZSwgInRocm93IiwgdCkKICAgICAgICB9CiAgICB9CiAgICAgICAgLCBReCA9IEtsCiAgICAgICAgLCAkeCA9IG1uCiAgICAgICAgLCBlUyA9IEdyCiAgICAgICAgLCB0UyA9IFdyCiAgICAgICAgLCByUyA9IGNoCiAgICAgICAgLCBuUyA9IGVoCiAgICAgICAgLCBhUyA9IEFycmF5CiAgICAgICAgLCBvUyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IFp4KGUpCiAgICAgICAgICAgICwgciA9ICR4KHRoaXMpCiAgICAgICAgICAgICwgbiA9IGFyZ3VtZW50cy5sZW5ndGgKICAgICAgICAgICAgLCBhID0gbiA+IDEgPyBhcmd1bWVudHNbMV0gOiB2b2lkIDAKICAgICAgICAgICAgLCBvID0gdm9pZCAwICE9PSBhOwogICAgICAgIG8gJiYgKGEgPSBLeChhLCBuID4gMiA/IGFyZ3VtZW50c1syXSA6IHZvaWQgMCkpOwogICAgICAgIHZhciBzLCBjLCBpLCB1LCBsLCBoLCBmID0gblModCksIGcgPSAwOwogICAgICAgIGlmICghZiB8fCB0aGlzID09PSBhUyAmJiBReChmKSkKICAgICAgICAgICAgZm9yIChzID0gZVModCksCiAgICAgICAgICAgICAgICAgICAgIGMgPSByID8gbmV3IHRoaXMocykgOiBhUyhzKTsgcyA+IGc7IGcrKykKICAgICAgICAgICAgICAgIGggPSBvID8gYSh0W2ddLCBnKSA6IHRbZ10sCiAgICAgICAgICAgICAgICAgICAgdFMoYywgZywgaCk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBmb3IgKGMgPSByID8gbmV3IHRoaXMgOiBbXSwKICAgICAgICAgICAgICAgICAgICAgbCA9ICh1ID0gclModCwgZikpLm5leHQ7ICEoaSA9IHF4KGwsIHUpKS5kb25lOyBnKyspCiAgICAgICAgICAgICAgICBoID0gbyA/IFZ4KHUsIGEsIFtpLnZhbHVlLCBnXSwgITApIDogaS52YWx1ZSwKICAgICAgICAgICAgICAgICAgICB0UyhjLCBnLCBoKTsKICAgICAgICByZXR1cm4gYy5sZW5ndGggPSBnLAogICAgICAgICAgICBjCiAgICB9OwogICAgVHIoewogICAgICAgIHRhcmdldDogIkFycmF5IiwKICAgICAgICBzdGF0OiAhMCwKICAgICAgICBmb3JjZWQ6ICFKZCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlKQogICAgICAgICAgICB9CiAgICAgICAgKSkKICAgIH0sIHsKICAgICAgICBmcm9tOiBvUwogICAgfSk7CiAgICB2YXIgc1MgPSBlZS5BcnJheS5mcm9tCiAgICAgICAgLCBjUyA9ICR1CiAgICAgICAgLCBpUyA9IGVoOwogICAgZnVuY3Rpb24gdVMoZSwgdCkgewogICAgICAgIHZhciByID0gdm9pZCAwICE9PSBjUyAmJiBpUyhlKSB8fCBlWyJAQGl0ZXJhdG9yIl07CiAgICAgICAgaWYgKCFyKSB7CiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGUpIHx8IChyID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgICAgICBpZiAoIWUpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsUyhlLCB0KTsKICAgICAgICAgICAgICAgIHZhciBuID0gbm0ociA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSkuY2FsbChyLCA4LCAtMSk7CiAgICAgICAgICAgICAgICAiT2JqZWN0IiA9PT0gbiAmJiBlLmNvbnN0cnVjdG9yICYmIChuID0gZS5jb25zdHJ1Y3Rvci5uYW1lKTsKICAgICAgICAgICAgICAgIGlmICgiTWFwIiA9PT0gbiB8fCAiU2V0IiA9PT0gbikKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc1MoZSk7CiAgICAgICAgICAgICAgICBpZiAoIkFyZ3VtZW50cyIgPT09IG4gfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxTKGUsIHQpCiAgICAgICAgICAgIH0oZSkpIHx8IHQgJiYgZSAmJiAibnVtYmVyIiA9PSB0eXBlb2YgZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHIgJiYgKGUgPSByKTsKICAgICAgICAgICAgICAgIHZhciBuID0gMAogICAgICAgICAgICAgICAgICAgICwgYSA9IGZ1bmN0aW9uKCkge307CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIHM6IGEsCiAgICAgICAgICAgICAgICAgICAgbjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID49IGUubGVuZ3RoID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogITAKICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVbbisrXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGUKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGY6IGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIikKICAgICAgICB9CiAgICAgICAgdmFyIG8sIHMgPSAhMCwgYyA9ICExOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgciA9IHIuY2FsbChlKQogICAgICAgICAgICB9LAogICAgICAgICAgICBuOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gci5uZXh0KCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcyA9IGUuZG9uZSwKICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIGMgPSAhMCwKICAgICAgICAgICAgICAgICAgICBvID0gZQogICAgICAgICAgICB9LAogICAgICAgICAgICBmOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgcyB8fCBudWxsID09IHIucmV0dXJuIHx8IHIucmV0dXJuKCkKICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGMpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG8KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGxTKGUsIHQpIHsKICAgICAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICAgICAgZm9yICh2YXIgciA9IDAsIG4gPSBuZXcgQXJyYXkodCk7IHIgPCB0OyByKyspCiAgICAgICAgICAgIG5bcl0gPSBlW3JdOwogICAgICAgIHJldHVybiBuCiAgICB9CiAgICBmdW5jdGlvbiBoUyhlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBuZXcgQXJyYXkodCA+IDEgPyB0IC0gMSA6IDApLCBuID0gMTsgbiA8IHQ7IG4rKykKICAgICAgICAgICAgcltuIC0gMV0gPSBhcmd1bWVudHNbbl07CiAgICAgICAgdmFyIGEgPSAhMCA9PT0gbm0ocikuY2FsbChyLCAtMSlbMF07CiAgICAgICAgcmV0dXJuIEp4KGUpID8gZlMoZSwgciwgYSkgOiBlCiAgICB9CiAgICBmdW5jdGlvbiBmUyhlLCB0LCByKSB7CiAgICAgICAgaWYgKCF0Lmxlbmd0aCkKICAgICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgdmFyIG4sIGEgPSB1Uyh0KTsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgbyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHQsIGEgPSBuLnZhbHVlOwogICAgICAgICAgICAgICAgaWYgKCFKeChhKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICAgICAgICAgIFl4KHQgPSBFXyhhKSkuY2FsbCh0LCAoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSngoZVt0XSkgJiYgSngoYVt0XSkgJiYgciA/IGVbdF0gPSBmUyhlW3RdLCBbYVt0XV0sICEwKSA6IGVbdF0gPSBhW3RdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICksIGUgfHwge30pCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGZvciAoYS5zKCk7ICEobiA9IGEubigpKS5kb25lOyApCiAgICAgICAgICAgICAgICBvKCkKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGEuZShlKQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGEuZigpCiAgICAgICAgfQogICAgICAgIHJldHVybiBlIHx8IHt9CiAgICB9CiAgICB2YXIgZ1MgPSBhYS5pbmNsdWRlczsKICAgIFRyKHsKICAgICAgICB0YXJnZXQ6ICJBcnJheSIsCiAgICAgICAgcHJvdG86ICEwLAogICAgICAgIGZvcmNlZDogYygoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gIUFycmF5KDEpLmluY2x1ZGVzKCkKICAgICAgICAgICAgfQogICAgICAgICkpCiAgICB9LCB7CiAgICAgICAgaW5jbHVkZXM6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGdTKHRoaXMsIGUsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIHBTID0gV2coIkFycmF5IiwgImluY2x1ZGVzIikKICAgICAgICAsIHZTID0gJAogICAgICAgICwgYlMgPSBfCiAgICAgICAgLCBkUyA9IGZ0KCJtYXRjaCIpCiAgICAgICAgLCBrUyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdDsKICAgICAgICByZXR1cm4gdlMoZSkgJiYgKHZvaWQgMCAhPT0gKHQgPSBlW2RTXSkgPyAhIXQgOiAiUmVnRXhwIiA9PT0gYlMoZSkpCiAgICB9CiAgICAgICAgLCB5UyA9IFR5cGVFcnJvcgogICAgICAgICwgbVMgPSBmdCgibWF0Y2giKQogICAgICAgICwgd1MgPSBUcgogICAgICAgICwgX1MgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgaWYgKGtTKGUpKQogICAgICAgICAgICB0aHJvdyBuZXcgeVMoIlRoZSBtZXRob2QgZG9lc24ndCBhY2NlcHQgcmVndWxhciBleHByZXNzaW9ucyIpOwogICAgICAgIHJldHVybiBlCiAgICB9CiAgICAgICAgLCB4UyA9IEsKICAgICAgICAsIFNTID0gS24KICAgICAgICAsIEVTID0gZnVuY3Rpb24oZSkgewogICAgICAgIHZhciB0ID0gLy4vOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgICIvLi8iW2VdKHQpCiAgICAgICAgfSBjYXRjaCAocikgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRbbVNdID0gITEsCiAgICAgICAgICAgICAgICAgICAgIi8uLyJbZV0odCkKICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9CiAgICAgICAgcmV0dXJuICExCiAgICB9CiAgICAgICAgLCBBUyA9IGsoIiIuaW5kZXhPZik7CiAgICB3Uyh7CiAgICAgICAgdGFyZ2V0OiAiU3RyaW5nIiwKICAgICAgICBwcm90bzogITAsCiAgICAgICAgZm9yY2VkOiAhRVMoImluY2x1ZGVzIikKICAgIH0sIHsKICAgICAgICBpbmNsdWRlczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gISF+QVMoU1MoeFModGhpcykpLCBTUyhfUyhlKSksIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogdm9pZCAwKQogICAgICAgIH0KICAgIH0pOwogICAgdmFyIENTID0gV2coIlN0cmluZyIsICJpbmNsdWRlcyIpCiAgICAgICAgLCBPUyA9IHNlCiAgICAgICAgLCBUUyA9IHBTCiAgICAgICAgLCBEUyA9IENTCiAgICAgICAgLCBCUyA9IEFycmF5LnByb3RvdHlwZQogICAgICAgICwgalMgPSBTdHJpbmcucHJvdG90eXBlCiAgICAgICAgLCBNUyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgdCA9IGUuaW5jbHVkZXM7CiAgICAgICAgcmV0dXJuIGUgPT09IEJTIHx8IE9TKEJTLCBlKSAmJiB0ID09PSBCUy5pbmNsdWRlcyA/IFRTIDogInN0cmluZyIgPT0gdHlwZW9mIGUgfHwgZSA9PT0galMgfHwgT1MoalMsIGUpICYmIHQgPT09IGpTLmluY2x1ZGVzID8gRFMgOiB0CiAgICB9OwogICAgdmFyIFJTID0gT2JqZWN0LmZyZWV6ZSh7CiAgICAgICAgX19wcm90b19fOiBudWxsLAogICAgICAgIGdldHM6IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgdmFyIG47CiAgICAgICAgICAgIGlmIChudWxsID09IGUgfHwgbnVsbCA9PSBlIHx8ICJzdHJpbmciICE9IHR5cGVvZiB0KQogICAgICAgICAgICAgICAgcmV0dXJuIHI7CiAgICAgICAgICAgIHZhciBhID0gdC5zcGxpdCgiLiIpCiAgICAgICAgICAgICAgICAsIG8gPSBEXyhuID0gW10pLmNhbGwobiwgYSk7CiAgICAgICAgICAgIHJldHVybiBhLmZvckVhY2goKGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoL14oXHcrKVxbKFx3KylcXSQvLnRlc3QoZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlLm1hdGNoKC9eKFx3KylcWyhcdyspXF0kLykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IHJbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYSA9IHJbMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgcyA9IHJtKG8pLmNhbGwobywgZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIEJ4KG8pLmNhbGwobywgcywgMSwgbiwgYSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgWXgobykuY2FsbChvLCAoZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgYSwgbyA9IGUgPT09IG4gfHwgZVt0XSA9PT0gbiA/IHIgOiBlW3RdOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyBpbnN0YW5jZW9mIEFycmF5ID8gRF8oYSA9IFtdKS5jYWxsKGEsIG8pIDogbyBpbnN0YW5jZW9mIE9iamVjdCA/IGttKHt9LCBvKSA6IG8KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApLCBlKQogICAgICAgIH0sCiAgICAgICAgcGljazogZnVuY3Rpb24oZSkgewogICAgICAgICAgICBmb3IgKHZhciB0LCByLCBuID0gYXJndW1lbnRzLmxlbmd0aCwgYSA9IG5ldyBBcnJheShuID4gMSA/IG4gLSAxIDogMCksIG8gPSAxOyBvIDwgbjsgbysrKQogICAgICAgICAgICAgICAgYVtvIC0gMV0gPSBhcmd1bWVudHNbb107CiAgICAgICAgICAgIHJldHVybiBhLmxlbmd0aCAmJiBKeChlKSA/IFl4KHQgPSBCbShyID0gRV8oZSkpLmNhbGwociwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTVMoYSkuY2FsbChhLCBlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKSkuY2FsbCh0LCAoZnVuY3Rpb24odCwgcikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBrbSh0LCBmdW5jdGlvbihlLCB0LCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodCA9IGN4KHQpKWluIGUgPyBkZyhlLCB0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiAhMAogICAgICAgICAgICAgICAgICAgICAgICB9KSA6IGVbdF0gPSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgIH0oe30sIHIsIGVbcl0pKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApLCB7fSkgOiB7fQogICAgICAgIH0sCiAgICAgICAgY2hhaW5HZXQ6IGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICB2YXIgciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogW107CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJveHkoKGZ1bmN0aW9uKCkge30KICAgICAgICAgICAgKSx7CiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSh0LCBEXyhyKS5jYWxsKHIsIGEpKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGFwcGx5OiBmdW5jdGlvbihlLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgbyA9IHQsIHMgPSAwLCBjID0gci5sZW5ndGg7IHMgPCBjOyBzKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG8gfHwgbyA9PT0gYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhOwogICAgICAgICAgICAgICAgICAgICAgICBvID0gb1tyW3NdXQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgY2xvbmU6IGZ1bmN0aW9uIGUodCwgcikgewogICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICBpZiAoIm9iamVjdCIgIT09IERnKHQpKQogICAgICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgICAgIGlmICghcikKICAgICAgICAgICAgICAgIHJldHVybiBrbSh7fSwgdCk7CiAgICAgICAgICAgIGlmICh0LmNvbnN0cnVjdG9yID09PSBEYXRlKQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHQpOwogICAgICAgICAgICBpZiAodC5jb25zdHJ1Y3RvciA9PT0gUmVnRXhwKQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAodCk7CiAgICAgICAgICAgIHZhciBuID0gbmV3IHQuY29uc3RydWN0b3I7CiAgICAgICAgICAgIHJldHVybiBFXyh0KS5mb3JFYWNoKChmdW5jdGlvbihhKSB7CiAgICAgICAgICAgICAgICAgICAgblthXSA9IGUodFthXSwgcikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuCiAgICAgICAgfSwKICAgICAgICBpc0VtcHR5OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHJldHVybiAhIUp4KGUpICYmICFFXyhlKS5sZW5ndGgKICAgICAgICB9LAogICAgICAgIGlzT2JqZWN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0gRGcoZSk7CiAgICAgICAgICAgIHJldHVybiBudWxsICE9IGUgJiYgKCJvYmplY3QiID09PSB0IHx8ICJmdW5jdGlvbiIgPT09IHQpCiAgICAgICAgfSwKICAgICAgICBtZXJnZTogaFMsCiAgICAgICAgZXh0ZW5kOiBoUywKICAgICAgICBpc1BsYWluT2JqZWN0OiBKeCwKICAgICAgICBpc1dpbmRvdzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICByZXR1cm4gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiBlID09PSB3aW5kb3cKICAgICAgICB9LAogICAgICAgIHNldFJlYWRPbmx5UHJvcGVydHk6IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgSngoZSkgJiYga2coZSwgdCwgewogICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMCwKICAgICAgICAgICAgICAgIGVudW1lcmFibGU6ICEwLAogICAgICAgICAgICAgICAgd3JpdGFibGU6ICExLAogICAgICAgICAgICAgICAgdmFsdWU6IHIKICAgICAgICAgICAgfSkKICAgICAgICB9CiAgICB9KQogICAgICAgICwgTlMgPSByKFJTKTsKICAgIGZ1bmN0aW9uIFBTKCkgewogICAgICAgIHZhciBlLCB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiAwOwogICAgICAgIGlmICgibnVtYmVyIiA9PSB0eXBlb2YgdCkKICAgICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgaWYgKCJvYmplY3QiID09IERnKGUgPSB0KSAmJiAiRGF0ZSIgPT0gZS5jb25zdHJ1Y3Rvci5uYW1lKQogICAgICAgICAgICByZXR1cm4gdC5nZXRUaW1lKCk7CiAgICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7CiAgICAgICAgICAgIHZhciByID0gdC5tYXRjaCgvXihcZCsoPzpcLlxkKyk/KShbc21oZF0pJC8pOwogICAgICAgICAgICBpZiAocikgewogICAgICAgICAgICAgICAgdmFyIG4gPSAwOwogICAgICAgICAgICAgICAgc3dpdGNoIChyWzJdKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAibSI6CiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSA2MCAqIHJbMV0gKiAxZTM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImgiOgogICAgICAgICAgICAgICAgICAgICAgICBuID0gNjAgKiByWzFdICogNjAgKiAxZTM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgImQiOgogICAgICAgICAgICAgICAgICAgICAgICBuID0gMjQgKiByWzFdICogNjAgKiA2MCAqIDFlMzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgbiA9IDFlMyAqIHJbMV0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBEYXRlLm5vdygpICsgTWF0aC5yb3VuZChuKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHQgPSB0LnJlcGxhY2UoL1suLV0vZywgIi8iKTsKICAgICAgICAgICAgdmFyIGEgPSBuZXcgRGF0ZSh0KS5nZXRUaW1lKCk7CiAgICAgICAgICAgIGlmICghaXNOYU4oYSkpCiAgICAgICAgICAgICAgICByZXR1cm4gYQogICAgICAgIH0KICAgICAgICByZXR1cm4gLTEKICAgIH0KICAgIGZ1bmN0aW9uIElTKGUpIHsKICAgICAgICB2YXIgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogbmV3IERhdGU7CiAgICAgICAgaWYgKCFlKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImRpZmYgRXJyb3I6bWlzc2luZyBwYXJhbSByZWZlcmVuY2VUaW1lIik7CiAgICAgICAgdmFyIHIgPSBQUyhlKQogICAgICAgICAgICAsIG4gPSBQUyh0KTsKICAgICAgICBpZiAoLTEgPT0gciB8fCAtMSA9PSBuKQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoImRpZmYgRXJyb3I6SW52YWxpZCBwYXJhbSB2YWx1ZSIpOwogICAgICAgIHZhciBhID0gbiA+PSByID8gTWF0aC5mbG9vciA6IE1hdGguY2VpbAogICAgICAgICAgICAsIG8gPSB7CiAgICAgICAgICAgIGd0OiBuID49IHIKICAgICAgICB9CiAgICAgICAgICAgICwgcyA9IDM2ZTUKICAgICAgICAgICAgLCBjID0gMjQgKiBzCiAgICAgICAgICAgICwgaSA9IFszNjUgKiBjLCAzMCAqIGMsIDcgKiBjLCBjLCBzLCA2ZTQsIDFlMywgMV0KICAgICAgICAgICAgLCB1ID0gWyJ5IiwgIk0iLCAidyIsICJkIiwgImgiLCAibSIsICJzIiwgIm1zIl0KICAgICAgICAgICAgLCBsID0gbiAtIHI7CiAgICAgICAgcmV0dXJuIFl4KGkpLmNhbGwoaSwgKGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBvW3Vbcl1dID0gYShlIC8gdCksCiAgICAgICAgICAgICAgICBlICUgdAogICAgICAgICAgICB9CiAgICAgICAgKSwgbCksCiAgICAgICAgICAgIG8KICAgIH0KICAgIHZhciBMUyA9IE9iamVjdC5mcmVlemUoewogICAgICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICAgICBmb3JtYXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDogRGF0ZS5ub3coKQogICAgICAgICAgICAgICAgLCB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiAieXl5eS1NTS1kZCIKICAgICAgICAgICAgICAgICwgciA9IG5ldyBEYXRlKGUpCiAgICAgICAgICAgICAgICAsIG4gPSB0CiAgICAgICAgICAgICAgICAsIGEgPSB7CiAgICAgICAgICAgICAgICAiTSsiOiByLmdldE1vbnRoKCkgKyAxLAogICAgICAgICAgICAgICAgImQrIjogci5nZXREYXRlKCksCiAgICAgICAgICAgICAgICAiRCsiOiByLmdldERhdGUoKSwKICAgICAgICAgICAgICAgICJoKyI6IHIuZ2V0SG91cnMoKSwKICAgICAgICAgICAgICAgICJIKyI6IHIuZ2V0SG91cnMoKSwKICAgICAgICAgICAgICAgICJtKyI6IHIuZ2V0TWludXRlcygpLAogICAgICAgICAgICAgICAgInMrIjogci5nZXRTZWNvbmRzKCksCiAgICAgICAgICAgICAgICAidysiOiByLmdldERheSgpLAogICAgICAgICAgICAgICAgInErIjogTWF0aC5mbG9vcigoci5nZXRNb250aCgpICsgMykgLyAzKSwKICAgICAgICAgICAgICAgICJTKyI6IHIuZ2V0TWlsbGlzZWNvbmRzKCkKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcmV0dXJuIC8oeSspL2kudGVzdChuKSAmJiAobiA9IG4ucmVwbGFjZShSZWdFeHAuJDEsICIiLmNvbmNhdChyLmdldEZ1bGxZZWFyKCkpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpKSwKICAgICAgICAgICAgICAgIEVfKGEpLmZvckVhY2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBSZWdFeHAoIigiLmNvbmNhdChlLCAiKSIpKS50ZXN0KG4pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgciA9ICJTKyIgPT09IGUgPyAiMDAwIiA6ICIwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbi5yZXBsYWNlKFJlZ0V4cC4kMSwgMSA9PSBSZWdFeHAuJDEubGVuZ3RoID8gYVtlXSA6IERfKHQgPSAiIi5jb25jYXQocikpLmNhbGwodCwgYVtlXSkuc3Vic3RyKCIiLmNvbmNhdChhW2VdKS5sZW5ndGgpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuCiAgICAgICAgfSwKICAgICAgICBiZXR3ZWVuOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciByID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gPyBhcmd1bWVudHNbMl0gOiBuZXcgRGF0ZQogICAgICAgICAgICAgICAgLCBuID0gUFMoZSkKICAgICAgICAgICAgICAgICwgYSA9IFBTKHQpCiAgICAgICAgICAgICAgICAsIG8gPSBQUyhyKTsKICAgICAgICAgICAgaWYgKC0xID09IG4gfHwgLTEgPT0gYSB8fCAtMSA9PSBvKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJEYXRldGltZS5iZXR3ZWVuOkludmFsaWQgcGFyYW0hIik7CiAgICAgICAgICAgIHJldHVybiBuIDwgbyAmJiBvIDwgYQogICAgICAgIH0sCiAgICAgICAgZGlmZjogSVMsCiAgICAgICAgdGltZWFnbzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICB2YXIgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogRGF0ZS5ub3coKTsKICAgICAgICAgICAgaWYgKCFlKQogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICB2YXIgciA9IElTKGUsIHQpOwogICAgICAgICAgICByZXR1cm4gMCAhPSByLnkgPyByLmd0ID8gIiIuY29uY2F0KHIueSwgIuW5tOWQjiIpIDogIiIuY29uY2F0KC1yLnksICLlubTliY0iKSA6IDAgIT0gci5NID8gci5ndCA/ICIiLmNvbmNhdChyLk0sICLkuKrmnIjlkI4iKSA6ICIiLmNvbmNhdCgtci5NLCAi5Liq5pyI5YmNIikgOiAwICE9IHIudyA/IHIuZ3QgPyAiIi5jb25jYXQoci53LCAi5ZGo5ZCOIikgOiAiIi5jb25jYXQoLXIudywgIuWRqOWJjSIpIDogMCAhPSByLmQgPyByLmd0ID8gIiIuY29uY2F0KHIuZCwgIuWkqeWQjiIpIDogIiIuY29uY2F0KC1yLmQsICLlpKnliY0iKSA6IDAgIT0gci5oID8gci5ndCA/ICIiLmNvbmNhdChyLmgsICLlsI/ml7blkI4iKSA6ICIiLmNvbmNhdCgtci5oLCAi5bCP5pe25YmNIikgOiAwICE9IHIubSA/IHIuZ3QgPyAiIi5jb25jYXQoci5tLCAi5YiG6ZKf5ZCOIikgOiAiIi5jb25jYXQoLXIubSwgIuWIhumSn+WJjSIpIDogMCAhPSByLnMgPyByLmd0ID8gIiIuY29uY2F0KHIucywgIuenkuWQjiIpIDogIiIuY29uY2F0KC1yLnMsICLnp5LliY0iKSA6ICLliJrliJoiCiAgICAgICAgfSwKICAgICAgICB0b1RpbWVzdGFtcDogUFMsCiAgICAgICAgdW5peDogUFMsCiAgICAgICAgZ2V0UmFuZG9tVGltZXN0YW1wOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIERhdGUubm93KCkgKyAiLiIgKyBNYXRoLnJvdW5kKDIxNDc0ODM2NDcgKiBNYXRoLnJhbmRvbSgpKQogICAgICAgIH0KICAgIH0pCiAgICAgICAgLCB6UyA9IHIoTFMpCiAgICAgICAgLCBHUyA9IHIoT2JqZWN0LmZyZWV6ZSh7CiAgICAgICAgX19wcm90b19fOiBudWxsLAogICAgICAgIEVyckNvZGVzOiB7CiAgICAgICAgICAgIFVOU0lHTkFCTEVfUEFSQU1TOiAxLAogICAgICAgICAgICBBUFBJRF9BQlNFTlQ6IDIsCiAgICAgICAgICAgIFRPS0VOX0VNUFRZOiAzLAogICAgICAgICAgICBHRU5FUkFURV9TSUdOQVRVUkVfRkFJTEVEOiA0LAogICAgICAgICAgICBVTkhBTkRMRURfRVJST1I6IC0xCiAgICAgICAgfQogICAgfSkpCiAgICAgICAgLCBIUyA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgRlMgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH0KICAgICAgICAsIFVTID0gcihPYmplY3QuZnJlZXplKHsKICAgICAgICBfX3Byb3RvX186IG51bGwsCiAgICAgICAgZGVmYXVsdDoge30KICAgIH0pKTsKICAgICFmdW5jdGlvbih0LCByKSB7CiAgICAgICAgZnVuY3Rpb24gbihlKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAiIiwgciA9IDA7IHIgPCBlLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGUuY2hhckNvZGVBdChyKyspOwogICAgICAgICAgICAgICAgdCArPSBuID4gNjMgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKDM1IF4gbikgOiAzNSA9PSBuID8gZS5jaGFyQXQocisrKSA6IFN0cmluZy5mcm9tQ2hhckNvZGUobikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdAogICAgICAgIH0KICAgICAgICB2YXIgYSwgbywgcyA9IFtuKCJTQlFQRiIpLCBuKCJ8RmdCV0IiKSwgbigifEdCV0IiKSwgbigiQExNQEJXIiksIG4oInxNZ0JXQmFaV0ZQIiksIG4oIlBKRGFaV0ZQIiksIG4oIkBMTUBCVyIpXSwgYyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLCBpID0gWzk1LCA2LCA3MiwgNTcsIDY5LCA2NywgNjAsIDQ1LCAxMjQsIDkwLCA4MCwgNzMsIDExLCAyMSwgNzUsIDAsIDEzLCA3NSwgMSwgNTcsIDkwLCA5MCwgMzUsIDcyLCAxMywgNjYsIDIsIDc1LCAzLCA1NywgOTAsIDcyLCAxMywgMzIsIDY2LCA0LCA1NywgNjYsIDUsIDQ5LCAzNiwgNCwgNzIsIDQxLCA5MCwgNzksIDg0LCAxNiwgMjksIDAsIDMsIDMzLCA3NCwgMTIzLCAxLCAxLCA3LCA1OV07CiAgICAgICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgICAgICAgIHZhciByID0gbCgpOwogICAgICAgICAgICByZXR1cm4gdSA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgIHZhciBhID0gclt0IC09IDEyM107CiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSB1Lld3UU1iTikgewogICAgICAgICAgICAgICAgICAgIHUuS0VFa0JRID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCByLCBuID0gImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5Ky89IiwgYSA9ICIiLCBvID0gIiIsIHMgPSAwLCBjID0gMDsgciA9IGUuY2hhckF0KGMrKyk7IH5yICYmICh0ID0gcyAlIDQgPyA2NCAqIHQgKyByIDogciwKICAgICAgICAgICAgICAgICAgICAgICAgcysrICUgNCkgPyBhICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1ICYgdCA+PiAoLTIgKiBzICYgNikpIDogMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBybShuKS5jYWxsKG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgdSA9IGEubGVuZ3RoOyBpIDwgdTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gKz0gIiUiICsgbm0obCA9ICIwMCIgKyBhLmNoYXJDb2RlQXQoaSkudG9TdHJpbmcoMTYpKS5jYWxsKGwsIC0yKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQobykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgdS5Xd1FNYk4gPSAhMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG8gPSB0ICsgclswXS5zdWJzdHJpbmcoMCwgMikKICAgICAgICAgICAgICAgICAgICAsIHMgPSBlW29dOwogICAgICAgICAgICAgICAgcmV0dXJuIHMgPyBhID0gcyA6IChhID0gdS5LRUVrQlEoYSksCiAgICAgICAgICAgICAgICAgICAgZVtvXSA9IGEpLAogICAgICAgICAgICAgICAgICAgIGEKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgdShlLCB0KQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKCkgewogICAgICAgICAgICB2YXIgZSA9IFsibVptM25KdTJ2M2J3emhmSCIsICJuMjQxcGVDUSIsICJDM3JZQXc1TiIsICJBdzVQRGEiLCAiblpHMW9nZldzeHJud0ciLCAibXR5Wm50dVlvd3o2d0t2SEVhIiwgIm1KeVdtdENZc2huaXRNVFYiLCAiQjJqUXp3bjAiLCAibXRLWG10cVdxM2Y0dHh2MyIsICJtdGVXbnR1V21nMXNDdXo0dEciLCAiRGc5dERoalBCTUMiLCAibmRENXZOcnR2TU8iLCAidHdmU3pNOVlCd3ZLaWZ2dXJJMDRpZ3JIRGdlIiwgIm10S1duSnE0bWZQSnZLOVB5VyIsICJ0TWYwQXh6TGlnbllFeGIwQlliVEIycjFCZ3VHeTI5MUJncUdCTTkwaWdqTGlodlp6d3FHRGc4R3oydjBpaG5MeTN2WXpzYll5dzVLQjIwR0JOdlR5TXZZbEciLCAibUpyWndnSGt0aGEiLCAibUpiUUN4ZjZ5MFciXTsKICAgICAgICAgICAgcmV0dXJuIChsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSgpCiAgICAgICAgfQogICAgICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIHIgPSB1LCBuID0gZSgpOyA7ICkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDE4NzQ0MCA9PT0gLVd5KHIoMTMzKSkgLyAxICogKFd5KHIoMTI2KSkgLyAyKSArIC1XeShyKDEzOSkpIC8gMyArIFd5KHIoMTM3KSkgLyA0ICogKC1XeShyKDEzMCkpIC8gNSkgKyBXeShyKDEzMSkpIC8gNiArIFd5KHIoMTI3KSkgLyA3ICsgV3kocigxMzUpKSAvIDggKyBXeShyKDEyOCkpIC8gOSAqIChXeShyKDEzOCkpIC8gMTApKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBuLnB1c2gobi5zaGlmdCgpKQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgIG4ucHVzaChuLnNoaWZ0KCkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfShsKSwKICAgICAgICAgICAgYSA9IGUsCiAgICAgICAgICAgIG8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdCB8fCBmdW5jdGlvbihyLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGE7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93LmNyeXB0byAmJiAoYSA9IHdpbmRvdy5jcnlwdG8pLAogICAgICAgICAgICAgICAgICAgICFhICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93Lm1zQ3J5cHRvICYmIChhID0gd2luZG93Lm1zQ3J5cHRvKSwKICAgICAgICAgICAgICAgICAgICAhYSAmJiB2b2lkIDAgIT09IGUgJiYgZS5jcnlwdG8gJiYgKGEgPSBlLmNyeXB0byksCiAgICAgICAgICAgICAgICAgICAgICAgICFhKQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IFVTCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB1OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGEuZ2V0UmFuZG9tVmFsdWVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBhLnJhbmRvbUJ5dGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnJhbmRvbUJ5dGVzKDQpLnJlYWRJbnQzMkxFKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlKDEzNikpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAsIGwgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKCkge30KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUucHJvdG90eXBlID0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbmV3IGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcm90b3R5cGUgPSBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0oKQogICAgICAgICAgICAgICAgICAgICAgICAsIGggPSB7fQogICAgICAgICAgICAgICAgICAgICAgICAsIGYgPSBoLmxpYiA9IHt9CiAgICAgICAgICAgICAgICAgICAgICAgICwgZyA9IGYuQmFzZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBsKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiYgci5taXhJbihlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICghci5oYXNPd25Qcm9wZXJ0eSh0KDEyNSkpIHx8IHRoaXMuaW5pdCA9PT0gci5pbml0KSAmJiAoci5pbml0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuJHN1cGVyLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5pbml0LnByb3RvdHlwZSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci4kc3VwZXIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5leHRlbmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmluaXQuYXBwbHkoZSwgYXJndW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgICAgICAgICAgICAgIG1peEluOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByIGluIGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5oYXNPd25Qcm9wZXJ0eShyKSAmJiAodGhpc1tyXSA9IGVbcl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5oYXNPd25Qcm9wZXJ0eSh0KDEzMikpICYmICh0aGlzLnRvU3RyaW5nID0gZS50b1N0cmluZykKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdC5wcm90b3R5cGUuZXh0ZW5kKHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICwgcCA9IGYuV29yZEFycmF5ID0gZy5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gdGhpcy53b3JkcyA9IGUgfHwgW10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWdCeXRlcyA9IG51bGwgIT0gdCA/IHQgOiA0ICogZS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSB8fCBiKS5zdHJpbmdpZnkodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY29uY2F0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMud29yZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBlLndvcmRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gdGhpcy5zaWdCeXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYSA9IGUuc2lnQnl0ZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGFtcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAlIDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCBhOyBvKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSByW28gPj4+IDJdID4+PiAyNCAtIG8gJSA0ICogOCAmIDI1NTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFtuICsgbyA+Pj4gMl0gfD0gcyA8PCAyNCAtIChuICsgbykgJSA0ICogOAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgYTsgbyArPSA0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0W24gKyBvID4+PiAyXSA9IHJbbyA+Pj4gMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaWdCeXRlcyArPSBhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xhbXA6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLndvcmRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB0ID0gdGhpcy5zaWdCeXRlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbdCA+Pj4gMl0gJj0gNDI5NDk2NzI5NSA8PCAzMiAtIHQgJSA0ICogOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmxlbmd0aCA9IHIuY2VpbCh0IC8gNCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsIHQgPSBnLmNsb25lLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC53b3JkcyA9IG5tKGUgPSB0aGlzLndvcmRzKS5jYWxsKGUsIDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmFuZG9tOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gW10sIHIgPSAwOyByIDwgZTsgciArPSA0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaChvKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBwLmluaXQodCxlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLCB2ID0gaC5lbmMgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICAsIGIgPSB2LkhleCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZS53b3JkcywgciA9IGUuc2lnQnl0ZXMsIG4gPSBbXSwgYSA9IDA7IGEgPCByOyBhKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHRbYSA+Pj4gMl0gPj4+IDI0IC0gYSAlIDQgKiA4ICYgMjU1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCgobyA+Pj4gNCkudG9TdHJpbmcoMTYpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCgxNSAmIG8pLnRvU3RyaW5nKDE2KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmpvaW4oIiIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5sZW5ndGgsIHIgPSBbXSwgbiA9IDA7IG4gPCB0OyBuICs9IDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcltuID4+PiAzXSB8PSBXeShlLnN1YnN0cihuLCAyKSwgMTYpIDw8IDI0IC0gbiAlIDggKiA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBwLmluaXQocix0IC8gMikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdi5VdGlscyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdG9Xb3JkQXJyYXk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSBbXSwgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbbiA+Pj4gMl0gfD0gZVtuXSA8PCAyNCAtIG4gJSA0ICogODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmxpYi5Xb3JkQXJyYXkuY3JlYXRlKHIsIGUubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmcm9tV29yZEFycmF5OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gbmV3IFVpbnQ4QXJyYXkoZS5zaWdCeXRlcyksIHIgPSAwOyByIDwgZS5zaWdCeXRlczsgcisrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbcl0gPSBlLndvcmRzW3IgPj4+IDJdID4+PiAyNCAtIHIgJSA0ICogOCAmIDI1NTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHZhciBkID0gdi5MYXRpbjEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IGUud29yZHMsIHIgPSBlLnNpZ0J5dGVzLCBuID0gW10sIGEgPSAwOyBhIDwgcjsgYSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0W2EgPj4+IDJdID4+PiAyNCAtIGEgJSA0ICogOCAmIDI1NTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShvKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmpvaW4oIiIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gZS5sZW5ndGgsIHIgPSBbXSwgbiA9IDA7IG4gPCB0OyBuKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcltuID4+PiAyXSB8PSAoMjU1ICYgZS5jaGFyQ29kZUF0KG4pKSA8PCAyNCAtIG4gJSA0ICogODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgcC5pbml0KHIsdCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLCBrID0gdi5VdGY4ID0gewogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZC5zdHJpbmdpZnkoZSkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0KDEzNCkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wYXJzZSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAsIHkgPSBmLkJ1ZmZlcmVkQmxvY2tBbGdvcml0aG0gPSBnLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGEgPSBuZXcgcC5pbml0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX25EYXRhQnl0ZXMgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9hcHBlbmQ6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIHIsIG4gPSBjLCBhID0gaSwgbyA9IFtdLCBsID0gMDsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhW2wrK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG9bby5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChvW28ubGVuZ3RoIC0gMV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gb1tvLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvW28ubGVuZ3RoIC0gMl1bc1thW2wrK11dXSA9IG9bby5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvW28ubGVuZ3RoIC0gMl0gPSBvW28ubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKGFbbCsrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBvLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bby5sZW5ndGggLSAxXSArPSByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tvLmxlbmd0aCAtIDFdID0gb1tvLmxlbmd0aCAtIDFdW3NbYVtsKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tvLmxlbmd0aCAtIDFdID0gRGcob1tvLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tvLmxlbmd0aCAtIDFdID8gKCsrbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLW8ubGVuZ3RoKSA6IGwgKz0gYVtsXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG9bby5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tvLmxlbmd0aCAtIDJdID0gb1tvLmxlbmd0aCAtIDJdW3NbYVtsKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBvLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bby5sZW5ndGggLSAxXSA9IG9bby5sZW5ndGggLSAxXSA9PSByOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IG9bby5sZW5ndGggLSAyXSA/IChvW28ubGVuZ3RoIC0gM10gPSBuLmNhbGwob1tvLmxlbmd0aCAtIDNdLCBvW28ubGVuZ3RoIC0gMl0sIG9bby5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5sZW5ndGggLT0gMikgOiAociA9IG9bby5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvW28ubGVuZ3RoIC0gM10gPSByKG9bby5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaCh1KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX3Byb2Nlc3M6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCBuID0gdGhpcy5fZGF0YSwgYSA9IG4ud29yZHMsIG8gPSBuLnNpZ0J5dGVzLCBzID0gdGhpcy5ibG9ja1NpemUsIGMgPSBvIC8gKDQgKiBzKSwgaSA9IChjID0gZSA/IHIuY2VpbChjKSA6IHIubWF4KCgwIHwgYykgLSB0aGlzLl9taW5CdWZmZXJTaXplLCAwKSkgKiBzLCB1ID0gci5taW4oNCAqIGksIG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGk7IGwgKz0gcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9Qcm9jZXNzQmxvY2soYSwgbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IEJ4KGEpLmNhbGwoYSwgMCwgaSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2lnQnl0ZXMgLT0gdQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBwLmluaXQodCx1KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBfZURhdGE6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIHIsIG4gPSBjLCBhID0gaSwgbyA9IFtdLCBsID0gNDQ7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYVtsKytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gb1tvLmxlbmd0aCAtIDJdID8gKG9bby5sZW5ndGggLSAzXSA9IG4uY2FsbChvW28ubGVuZ3RoIC0gM10sIG9bby5sZW5ndGggLSAyXSwgb1tvLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmxlbmd0aCAtPSAyKSA6IChyID0gb1tvLmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bby5sZW5ndGggLSAzXSA9IHIob1tvLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChvW28ubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bby5sZW5ndGggLSAyXSA9IG9bby5sZW5ndGggLSAyXVtzWzYgKyBhW2wrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2goYVtsKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG9bby5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKHUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IGcuY2xvbmUuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLl9kYXRhID0gdGhpcy5fZGF0YS5jbG9uZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX21pbkJ1ZmZlclNpemU6IDAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmLkhhc2hlciA9IHkuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgY2ZnOiBnLmV4dGVuZCgpLAogICAgICAgICAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNmZyA9IHRoaXMuY2ZnLmV4dGVuZChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5yZXNldC5jYWxsKHRoaXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvUmVzZXQoKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcHBlbmQoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2VzcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmIHRoaXMuX2FwcGVuZChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb0ZpbmFsaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTaXplOiAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgX2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGUuaW5pdChyKS5maW5hbGl6ZSh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBfY3JlYXRlSG1hY0hlbHBlcjogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG0uSE1BQy5pbml0KGUscikuZmluYWxpemUodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciBtID0gaC5hbGdvID0ge307CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgKICAgICAgICAgICAgICAgIH0oTWF0aCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgIm9iamVjdCIgPT09IHUoMTI5KSA/IHQuZXhwb3J0cyA9IG8oKSA6IGEuQ3J5cHRvSlMgPSBvKCkKICAgIH0oRlMpLAogICAgICAgIGZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICAgICAgZnVuY3Rpb24gbihlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gIiIsIHIgPSAwOyByIDwgZS5sZW5ndGg7ICkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5jaGFyQ29kZUF0KHIrKyk7CiAgICAgICAgICAgICAgICAgICAgdCArPSBuID4gNjMgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKDQyIF4gbikgOiAzNSA9PSBuID8gZS5jaGFyQXQocisrKSA6IFN0cmluZy5mcm9tQ2hhckNvZGUobikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGEsIG8sIHMgPSBbImVuYyIsIG4oIiNVXkNGWSIpLCBuKCJMWEVHfUVYTmtYWEtTIiksIG4oIllGQ0lPIiksIG4oIklLRkYiKSwgbigiWlhFXkVeU1pPIiksIG4oIlpfWUIiKSwgbigiS1paRlMiKSwgbigiXkV9RVhOa1hYS1MiKSwgbigiXUVYTlkiKSwgbigiWUNNaFNeT1kiKSwgbigidUdLWjEiKSwgbigiSUZLR1oiKSwgbigiSUJLWGteIiksIC43NSwgbigiWE8jdk9YWU8iKSwgbigiQEVDRCIpLCAiIl0sIGMgPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbCwgaSA9IFsyNywgNzIsIDAsIDcyLCAxLCA2NSwgMiwgMTksIDY5LCA0MiwgMzQsIDk4LCAwLCA3MiwgMywgNjUsIDQsIDU4LCA2OSwgNzEsIDM0LCA5OCwgMCwgOCwgMzQsIDEsIDcyLCA1LCA3MiwgNiwgNjUsIDcsIDIxLCAyMCwgOSwgMzQsIDIyLCAtNjc3MSwgMjIsIC0zMjkzLCA1OSwgMjIsIDEwMDY3LCA1OSwgMjEsIDY2LCAyMiwgLTkyNTcsIDIyLCAxMTAsIDU5LCAyMiwgOTE1MCwgNTksIDY0LCA1MiwgNDcsIDM0LCAyMiwgLTE4NzksIDIyLCAtNTA2OCwgNTksIDIyLCA2OTQ3LCA1OSwgNTcsIDM0LCA4MywgOSwgMjEsIDY1LCA2LCAzOCwgNjksIDM0LCA4MCwgMzQsIDI2LCAzOCwgOTQsIDk3LCAtMTIsIDk4LCAwLCAzMywgMzQsIDIxLCA2NiwgMjIsIDk5OTcsIDIyLCAtNTA2MywgNTksIDIyLCAtNDkzMywgNTksIDUyLCAyOSwgMzQsIDgzLCA0NywgMSwgNzIsIDUsIDcyLCA2LCA2NSwgNywgNDMsIDIxLCA2NSwgMywgOTUsIDIyLCAtMzU5OSwgMjIsIC05MDQ5LCA1OSwgMjIsIDEyNjUwLCA1OSwgNTIsIDk1LCAyMiwgLTEyMDEsIDIyLCA1MjU1LCA1OSwgMjIsIC00MDUzLCA1OSwgNTksIDksIDksIDM0LCA5NSwgMjIsIC04MDgxLCAyMiwgNjM5NCwgNTksIDIyLCAxNjkwLCA1OSwgNTIsIDI5LCAzNCwgOTUsIDIyLCA2MjU1LCAyMiwgNzM0NCwgNTksIDIyLCAtMTM1OTksIDU5LCA1MSwgOTcsIC01NywgMjcsIDcyLCAwLCA3MiwgMSwgNjUsIDgsIDQzLCA2OSwgNzAsIDM0LCAxMCwgNzIsIDksIDI4LCAzNCwgMTAsIDcyLCAxMCwgNjIsIDM0LCA4OSwgMTEsIDE3LCAzNCwgMTAsIDY1LCAxMiwgNDYsIDM0LCA5OCwgMCwgODQsIDM0LCAyMiwgMTk5OCwgMjIsIC03OTMxLCA1OSwgMjIsIDU5MzMsIDU5LCA2LCAzNCwgODMsIDMwOCwgMjQsIDQ0LCAyMiwgLTM5NjgsIDIyLCA3NDUzLCA1OSwgMjIsIC0zNDgzLCA1OSwgNjgsIDM2LCAyMiwgOTc2MCwgMjIsIC04MDQ0LCA1OSwgMjIsIC0xNjkyLCA1OSwgNDQsIDIyLCAtOTI1NSwgMjIsIDI4NTIsIDU5LCAyMiwgNjQwNywgNTksIDY0LCAyMiwgOCwgNTMsIDUyLCA2OCwgMjIsIDU4NTIsIDIyLCAtMTg2OCwgNTksIDIyLCAtMzcyOSwgNTksIDc3LCA0OSwgMzQsIDI0LCA0NCwgMjIsIC0zNjQ2LCAyMiwgMjY2NSwgNTksIDIyLCA5ODIsIDU5LCA1OSwgMjIsIDQ2NjYsIDIyLCAtNTA3MywgNTksIDIyLCA0MDksIDU5LCA2OCwgMzYsIDIyLCAtODc0OSwgMjIsIDEzMSwgNTksIDIyLCA4NjQyLCA1OSwgNDQsIDIyLCAyMjI3LCAyMiwgLTMyOTUsIDU5LCAyMiwgMTA2OSwgNTksIDU5LCAyMiwgNDE1MCwgMjIsIDUzOTYsIDU5LCAyMiwgLTk1NDIsIDU5LCA2NCwgMjIsIC04NzQ2LCAyMiwgLTk4MDAsIDU5LCAyMiwgMTg1NTQsIDU5LCA1MywgNTIsIDY4LCAyMiwgMjc3NywgMjIsIC03NTU4LCA1OSwgMjIsIDUwMzYsIDU5LCA3NywgNCwgMzQsIDI0LCA0NCwgMjIsIC0zMTQ3LCAyMiwgODI5NSwgNTksIDIyLCAtNTE0NiwgNTksIDU5LCAyMiwgNTg4MiwgMjIsIC05MTMyLCA1OSwgMjIsIDMyNTIsIDU5LCA2OCwgMzYsIDIyLCA1MTc5LCAyMiwgODk5MCwgNTksIDIyLCAtMTQxNDUsIDU5LCA0NCwgMjIsIDY5NywgMjIsIC0yMTY1LCA1OSwgMjIsIDE0NzAsIDU5LCA1OSwgMjIsIDgxNDgsIDIyLCA2ODM3LCA1OSwgMjIsIC0xNDk4MSwgNTksIDY0LCAyMiwgMTY4NywgMjIsIC00OTkzLCA1OSwgMjIsIDMzMTQsIDU5LCA1MywgNTIsIDY4LCAyMiwgMTIzNywgMjIsIDQ3MDMsIDU5LCAyMiwgLTU2ODUsIDU5LCA3NywgNTUsIDM0LCA1LCAyMiwgMzY0NCwgMjIsIDM2NzEsIDU5LCAyMiwgLTcyOTksIDU5LCA3NSwgNzYsIDIyLCA5NTQxLCAyMiwgLTk4NCwgNTksIDIyLCAtODU0OSwgNTksIDc1LCA3NCwgMTMsIDc0LCA0MSwgMzQsIDIyLCAtOTI3NCwgMjIsIC0zODgzLCA1OSwgMjIsIDEzMTU3LCA1OSwgMTYsIDM0LCA4MywgNDIsIDMyLCA2NSwgNiwgMjUsIDY1LCAxMywgOTMsIDIyLCA3MjE5LCAyMiwgMzc4NSwgNTksIDIyLCAtMTA5OTgsIDU5LCAyMiwgNjY0OSwgMjIsIC02MzAzLCA1OSwgMjIsIC0zNDMsIDU5LCAxNSwgNTIsIDUzLCA2OCwgMjIsIDkwLCAyMiwgLTQ3NjksIDU5LCAyMiwgNDc0MiwgNTksIDc3LCA2OSwgNjksIDM0LCAyLCAzNCwgMTUsIDIyLCA4OTEyLCAyMiwgLTc2MDYsIDU5LCAyMiwgLTEzMDIsIDU5LCA5NCwgNTYsIDE4LCA0NCwgMTUsIDIyLCAtODIyMCwgMjIsIC05ODMyLCA1OSwgMjIsIDE4MDUyLCA1OSwgMzEsIDE0LCA1OSwgNTMsIDU5LCA2MywgOTQsIDk3LCAtNzEsIDQ0LCAyMiwgLTMxOCwgMjIsIDQ0ODgsIDU5LCAyMiwgLTQxNjcsIDU5LCA1OSwgNiwgMzQsIDQ0LCA2MywgOTQsIDk3LCAtMzExLCA5OCwgMCwgNDAsIDM0LCAyMiwgLTYwMTMsIDIyLCA2NTk5LCA1OSwgMjIsIC01ODYsIDU5LCA4OCwgMzQsIDgzLCA0MSwgMSwgNzIsIDUsIDcyLCA2LCA2NSwgNywgOTAsIDMyLCA2NSwgMywgOTEsIDkxLCAyMiwgLTYwNTYsIDIyLCAyODA1LCA1OSwgMjIsIDMyNTUsIDU5LCA1OSwgOSwgNjUsIDE1LCA0NiwgOSwgMzQsIDkxLCAyMiwgNDI3MSwgMjIsIC0zNjI0LCA1OSwgMjIsIC02NDMsIDU5LCA1OSwgODgsIDM0LCA5MSwgMzIsIDY2LCA5NCwgOTcsIC00NSwgOTAsIDY1LCAxNiwgMzEsIDE3LCA2OSwgMzksIDgyXTsKICAgICAgICAgICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgICAgICAgICAgICB2YXIgciA9IGwoKTsKICAgICAgICAgICAgICAgIHJldHVybiB1ID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgIHZhciBhID0gclt0IC09IDExMV07CiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdS5ldHl4aFcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdS5VdGRSRnggPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCByLCBuID0gImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVowMTIzNDU2Nzg5Ky89IiwgYSA9ICIiLCBvID0gIiIsIHMgPSAwLCBjID0gMDsgciA9IGUuY2hhckF0KGMrKyk7IH5yICYmICh0ID0gcyAlIDQgPyA2NCAqIHQgKyByIDogciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMrKyAlIDQpID8gYSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSAmIHQgPj4gKC0yICogcyAmIDYpKSA6IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHJtKG4pLmNhbGwobiwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgdSA9IGEubGVuZ3RoOyBpIDwgdTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyArPSAiJSIgKyBubShsID0gIjAwIiArIGEuY2hhckNvZGVBdChpKS50b1N0cmluZygxNikpLmNhbGwobCwgLTIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KG8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LmV0eXhoVyA9ICEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHZhciBvID0gdCArIHJbMF0uc3Vic3RyaW5nKDAsIDIpCiAgICAgICAgICAgICAgICAgICAgICAgICwgcyA9IGVbb107CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgPyBhID0gcyA6IChhID0gdS5VdGRSRngoYSksCiAgICAgICAgICAgICAgICAgICAgICAgIGVbb10gPSBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgYQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICwKICAgICAgICAgICAgICAgICAgICB1KGUsIHQpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gWyJuSmEybVpHMm9mZnZxMDlYdXEiLCAibXRyUXJmYnZBTTgiLCAiQjJqUXp3bjAiLCAiblplWW10dVltZXJMemh2MEFhIiwgInYxenZ2Zm5zdXZicHRLMW1zMFBqc2VEZ3J1cmRxS2VUeFpLNG5aeTFuZG1ZbXRiNkV4SDNETnYwQzNqWENnOVVCd1hSQU1MT3oyekx6Z25JeXZQendhIiwgIm5kSzJtWktYbXZiV3YzTHhCcSIsICJudVBzQ2U5dENHIiwgImxJOUpCM2pMIiwgInF1amRyZXZncjBIanNLVG10dTVwdWZmc3UxcnZ2TER5d3ZQSHlNbkt6d3pOQWdMUUEyWFRCTTlXQ3hqWkRodjJEM0g1RUphWG1KbTBudHkzb2RLUmxaMCIsICJtdEdYbWVIeHUzamhxcSIsICJtdG1YbWRxMXZoSFJEZ1hNIiwgIm10SzJvZGlYcUtMd0R1emYiLCAibnRpMW10aVptZVhnQmZMdXphIiwgIm5KdTNuWnEwendEUHYzUG0iXTsKICAgICAgICAgICAgICAgIHJldHVybiAobCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkoKQogICAgICAgICAgICB9CiAgICAgICAgICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gdSwgbiA9IGUoKTsgOyApCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDkyNzUyMSA9PT0gV3kocigxMTgpKSAvIDEgKiAoLVd5KHIoMTIzKSkgLyAyKSArIC1XeShyKDExMykpIC8gMyArIFd5KHIoMTIyKSkgLyA0ICogKFd5KHIoMTE0KSkgLyA1KSArIC1XeShyKDEyMCkpIC8gNiArIC1XeShyKDExMSkpIC8gNyArIC1XeShyKDEyMSkpIC8gOCArIC1XeShyKDExOSkpIC8gOSAqICgtV3kocigxMTcpKSAvIDEwKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2gobi5zaGlmdCgpKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0obCksCiAgICAgICAgICAgICAgICBhID0gZSwKICAgICAgICAgICAgICAgIG8gPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSB1LAogICAgICAgICAgICAgICAgICAgICAgICBuID0gKHIgPSBlKS5saWIuV29yZEFycmF5LAogICAgICAgICAgICAgICAgICAgICAgICByLmVuYy5CYXNlNjQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUud29yZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCByID0gZS5zaWdCeXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG4gPSB0aGlzLl9tYXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGFtcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgPSBbXSwgbyA9IDA7IG8gPCByOyBvICs9IDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAodFtvID4+PiAyXSA+Pj4gMjQgLSBvICUgNCAqIDggJiAyNTUpIDw8IDE2IHwgKHRbbyArIDEgPj4+IDJdID4+PiAyNCAtIChvICsgMSkgJSA0ICogOCAmIDI1NSkgPDwgOCB8IHRbbyArIDIgPj4+IDJdID4+PiAyNCAtIChvICsgMikgJSA0ICogOCAmIDI1NSwgYyA9IDA7IGMgPCA0ICYmIG8gKyAuNzUgKiBjIDwgcjsgYysrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXNoKG4uY2hhckF0KHMgPj4+IDYgKiAoMyAtIGMpICYgNjMpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG4uY2hhckF0KDY0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IGEubGVuZ3RoICUgNDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmpvaW4oIiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgciA9IHRoaXMuX21hcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSB0aGlzLl9yZXZlcnNlTWFwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy5fcmV2ZXJzZU1hcCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhW3IuY2hhckNvZGVBdChvKV0gPSBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gci5jaGFyQXQoNjQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gcm0oZSkuY2FsbChlLCBzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09IGMgJiYgKHQgPSBjKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhID0gW10sIG8gPSAwLCBzID0gMDsgcyA8IHQ7IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzICUgNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gcltlLmNoYXJDb2RlQXQocyAtIDEpXSA8PCBzICUgNCAqIDIgfCByW2UuY2hhckNvZGVBdChzKV0gPj4+IDYgLSBzICUgNCAqIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVtvID4+PiAyXSB8PSBjIDw8IDI0IC0gbyAlIDQgKiA4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uY3JlYXRlKGEsIG8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfShlLCB0LCBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIG4sIGEsIG8sIHUsIGwsIGgsIGYsIGcsIHAsIHYsIGIsIGQsIGssIHksIG0sIHcsIF8sIHgsIFMsIEUsIEEgPSBjLCBDID0gaSwgTyA9IFtdLCBUID0gMDsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoQ1tUKytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKEFycmF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goXysrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gT1tPLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkID0gT1tPLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDRdID0gQS5jYWxsKE9bTy5sZW5ndGggLSA0XSwgT1tPLmxlbmd0aCAtIDNdLCBPW08ubGVuZ3RoIC0gMl0sIE9bTy5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ubGVuZ3RoIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKG0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goXyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8gPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChDW1QrK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaCh2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChzW0NbVCsrXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9bTy5sZW5ndGggLSAyXSA9IE9bTy5sZW5ndGggLSAyXVtPW08ubGVuZ3RoIC0gMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gT1tPLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ID0gT1tPLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gT1tPLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2gobCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBPW08ubGVuZ3RoIC0gMV0gPyBPW08ubGVuZ3RoIC0gMl0gPSBBLmNhbGwoT1tPLmxlbmd0aCAtIDJdLCBPW08ubGVuZ3RoIC0gMV0pIDogKEUgPSBPW08ubGVuZ3RoIC0gMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9bTy5sZW5ndGggLSAyXSA9IEUoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBPLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPW08ubGVuZ3RoIC0gMV0gPSBPW08ubGVuZ3RoIC0gMV0gPj0gRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSA9IE8ucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9bTy5sZW5ndGggLSAxXSAtPSBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gTy5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDFdICo9IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBPW08ubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9bTy5sZW5ndGggLSAxXSA/ICgrK1QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tTy5sZW5ndGgpIDogVCArPSBDW1RdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gT1tPLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2gocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBPLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPW08ubGVuZ3RoIC0gMV0gKz0gRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IE9bTy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gTy5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDFdICU9IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChPW08ubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPW08ubGVuZ3RoIC0gMl0gPSBPW08ubGVuZ3RoIC0gMl1bc1tDW1QrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDFdID0gT1tPLmxlbmd0aCAtIDFdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSA9IE8ucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9bTy5sZW5ndGggLSAxXSA+Pj49IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gT1tPLmxlbmd0aCAtIDJdID8gKE9bTy5sZW5ndGggLSAzXSA9IEEuY2FsbChPW08ubGVuZ3RoIC0gM10sIE9bTy5sZW5ndGggLSAyXSwgT1tPLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5sZW5ndGggLT0gMikgOiAoRSA9IE9bTy5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDNdID0gRShPW08ubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IE9bTy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IE9bTy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDFdID0gT1tPLmxlbmd0aCAtIDFdW3NbQ1tUKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBPLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPW08ubGVuZ3RoIC0gMV0gfD0gRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRSA9IE8ucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9bTy5sZW5ndGggLSAxXSA8PD0gRTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFID0gTy5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT1tPLmxlbmd0aCAtIDFdICY9IEU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaCh1KyspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgKz0gQ1tUXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IE9bTy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUyA9IE9bTy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKHRoaXNbc1tDW1QrK11dXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaCh4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTy5wdXNoKFMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2godyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUgPSBPLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPW08ubGVuZ3RoIC0gMV0gPSBPW08ubGVuZ3RoIC0gMV0gPCBFOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnB1c2goaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucG9wKCkgPyBUICs9IENbVF0gOiArK1Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8ucHVzaChuZXcgQXJyYXkoQ1tUKytdKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tYXAxOiB0KDExMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWFwOiB0KDExNikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZS5lbmMuQmFzZTY0OwogICAgICAgICAgICAgICAgICAgIHZhciB0LCByLCBuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAib2JqZWN0IiA9PT0gdSgxMjQpID8gdC5leHBvcnRzID0gbyhGUy5leHBvcnRzKSA6IG8oYS5DcnlwdG9KUykKICAgICAgICB9KEhTKTsKICAgIHZhciBZUyA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgZS5leHBvcnRzID0gRlMuZXhwb3J0cy5lbmMuSGV4CiAgICB9KFlTKTsKICAgIHZhciBKUyA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgZS5leHBvcnRzID0gRlMuZXhwb3J0cy5lbmMuVXRmOAogICAgfShKUyk7CiAgICB2YXIgV1MgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH0KICAgICAgICAsIFhTID0gewogICAgICAgIGV4cG9ydHM6IHt9CiAgICB9OwogICAgIWZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9ICIiLCByID0gMDsgciA8IGUubGVuZ3RoOyApIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZS5jaGFyQ29kZUF0KHIrKyk7CiAgICAgICAgICAgICAgICB0ICs9IG4gPiA2MyA/IFN0cmluZy5mcm9tQ2hhckNvZGUoMjYgXiBuKSA6IDM1ID09IG4gPyBlLmNoYXJBdChyKyspIDogU3RyaW5nLmZyb21DaGFyQ29kZShuKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgfQogICAgICAgIHZhciBhLCBvLCBzID0gW24oInZ7aW5TdH4jZWJVfCIpLCBuKCJpb3hpbmgiKSwgbigieXV0eXtuIildLCBjID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsIGkgPSBbNjgsIDUyLCA3NSwgOTYsIDczLCAwLCA2NywgODYsIDk3LCA0MzcsIDU1LCA1NSwgNDEsIDc1LCAyLCA5NywgODYxMiwgOTcsIDgyMzIsIDU4LCA5NywgLTE2ODQ0LCA1OCwgMjgsIDY2LCAxMiwgOTYsIDczLCAxLCA2NywgODYsIDk3LCA0MzcsIDU1LCAxMCwgNTUsIDQ4LCA5NiwgNzMsIDIsIDY3LCA4NiwgOTcsIDQyOSwgNTUsIDU1LCA0OCwgODddOwogICAgICAgIGZ1bmN0aW9uIHUoZSwgdCkgewogICAgICAgICAgICB2YXIgciA9IGwoKTsKICAgICAgICAgICAgcmV0dXJuIHUgPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHJbdCAtPSA0MjhdOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdS5SSHJuaHYpIHsKICAgICAgICAgICAgICAgICAgICB1LkFjSVNzdSA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgciwgbiA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSsvPSIsIGEgPSAiIiwgbyA9ICIiLCBzID0gMCwgYyA9IDA7IHIgPSBlLmNoYXJBdChjKyspOyB+ciAmJiAodCA9IHMgJSA0ID8gNjQgKiB0ICsgciA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgIHMrKyAlIDQpID8gYSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSAmIHQgPj4gKC0yICogcyAmIDYpKSA6IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gcm0obikuY2FsbChuLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHUgPSBhLmxlbmd0aDsgaSA8IHU7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICs9ICIlIiArIG5tKGwgPSAiMDAiICsgYS5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KSkuY2FsbChsLCAtMikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KG8pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBhcmd1bWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgIHUuUkhybmh2ID0gITAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBvID0gdCArIHJbMF0uc3Vic3RyaW5nKDAsIDIpCiAgICAgICAgICAgICAgICAgICAgLCBzID0gZVtvXTsKICAgICAgICAgICAgICAgIHJldHVybiBzID8gYSA9IHMgOiAoYSA9IHUuQWNJU3N1KGEpLAogICAgICAgICAgICAgICAgICAgIGVbb10gPSBhKSwKICAgICAgICAgICAgICAgICAgICBhCiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICwKICAgICAgICAgICAgICAgIHUoZSwgdCkKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gbCgpIHsKICAgICAgICAgICAgdmFyIGUgPSBbIm4wamp5MjU0d3EiLCAibmRhNG1adVhtZVhxQkxMc3pxIiwgInp3NTJxMjlTQmd2SkRhIiwgIm50amJCZkxocjNpIiwgIkIyalF6d24wIiwgIm50YTVtdEcwbWdITERLUGd6cSIsICJuWkcxb3RLNW1OektyMFBleXEiLCAibVp5MW10dTJtZzEzczJqZHdHIiwgIm4yNDFwZUNRIiwgIm9kRzVvdEtXckxqc0IxdnYiLCAibEk5SkIzakwiLCAib3U1d3NoTGNBVyIsICJuZGEybUptMXUxblhDdzFmIiwgIm10bTRvdGU0RGU1aHl3VFIiXTsKICAgICAgICAgICAgcmV0dXJuIChsID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKSgpCiAgICAgICAgfQogICAgICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIHIgPSB1LCBuID0gZSgpOyA7ICkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDcwNTg3NCA9PT0gLVd5KHIoNDMzKSkgLyAxICsgLVd5KHIoNDMwKSkgLyAyICsgLVd5KHIoNDM0KSkgLyAzICogKC1XeShyKDQzOCkpIC8gNCkgKyBXeShyKDQ0MCkpIC8gNSArIC1XeShyKDQzNikpIC8gNiArIC1XeShyKDQzNSkpIC8gNyAqICgtV3kocig0NDEpKSAvIDgpICsgLVd5KHIoNDMyKSkgLyA5ICogKFd5KHIoNDI4KSkgLyAxMCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIG4ucHVzaChuLnNoaWZ0KCkpCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICB9KGwpLAogICAgICAgICAgICBhID0gZSwKICAgICAgICAgICAgbyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBlCiAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IHIubGliCiAgICAgICAgICAgICAgICAgICAgICAgICwgYSA9IG4uV29yZEFycmF5CiAgICAgICAgICAgICAgICAgICAgICAgICwgbyA9IG4uSGFzaGVyCiAgICAgICAgICAgICAgICAgICAgICAgICwgbCA9IHIuYWxnbwogICAgICAgICAgICAgICAgICAgICAgICAsIGggPSBbXTsKICAgICAgICAgICAgICAgICAgICAhZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSAwOyBlIDwgNjQ7IGUrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhbZV0gPSA0Mjk0OTY3Mjk2ICogdC5hYnModC5zaW4oZSArIDEpKSB8IDAKICAgICAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBsLk1ENSA9IG8uZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFzaCA9IG5ldyBhLmluaXQoWzE3MzI1ODQxOTMsIDQwMjMyMzM0MTcsIDI1NjIzODMxMDIsIDI3MTczMzg3OF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDA7IHIgPCAxNjsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0ICsgcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSBlW25dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbbl0gPSAxNjcxMTkzNSAmIChhIDw8IDggfCBhID4+PiAyNCkgfCA0Mjc4MjU1MzYwICYgKGEgPDwgMjQgfCBhID4+PiA4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0aGlzLl9oYXNoLndvcmRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzID0gZVt0ICsgMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGMgPSBlW3QgKyAxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaSA9IGVbdCArIDJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB1ID0gZVt0ICsgM10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGwgPSBlW3QgKyA0XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZiA9IGVbdCArIDVdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBkID0gZVt0ICsgNl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGsgPSBlW3QgKyA3XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgeSA9IGVbdCArIDhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBtID0gZVt0ICsgOV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHcgPSBlW3QgKyAxMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIF8gPSBlW3QgKyAxMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHggPSBlW3QgKyAxMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIFMgPSBlW3QgKyAxM10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIEUgPSBlW3QgKyAxNF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIEEgPSBlW3QgKyAxNV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIEMgPSBvWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBPID0gb1sxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgVCA9IG9bMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIEQgPSBvWzNdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGcoQywgTywgVCwgRCwgcywgNywgaFswXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IGcoRCwgQywgTywgVCwgYywgMTIsIGhbMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBnKFQsIEQsIEMsIE8sIGksIDE3LCBoWzJdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gZyhPLCBULCBELCBDLCB1LCAyMiwgaFszXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGcoQywgTywgVCwgRCwgbCwgNywgaFs0XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IGcoRCwgQywgTywgVCwgZiwgMTIsIGhbNV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBnKFQsIEQsIEMsIE8sIGQsIDE3LCBoWzZdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gZyhPLCBULCBELCBDLCBrLCAyMiwgaFs3XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGcoQywgTywgVCwgRCwgeSwgNywgaFs4XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IGcoRCwgQywgTywgVCwgbSwgMTIsIGhbOV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBnKFQsIEQsIEMsIE8sIHcsIDE3LCBoWzEwXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyA9IGcoTywgVCwgRCwgQywgXywgMjIsIGhbMTFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gZyhDLCBPLCBULCBELCB4LCA3LCBoWzEyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IGcoRCwgQywgTywgVCwgUywgMTIsIGhbMTNdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUID0gZyhULCBELCBDLCBPLCBFLCAxNywgaFsxNF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBwKEMsIE8gPSBnKE8sIFQsIEQsIEMsIEEsIDIyLCBoWzE1XSksIFQsIEQsIGMsIDUsIGhbMTZdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gcChELCBDLCBPLCBULCBkLCA5LCBoWzE3XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IHAoVCwgRCwgQywgTywgXywgMTQsIGhbMThdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gcChPLCBULCBELCBDLCBzLCAyMCwgaFsxOV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBwKEMsIE8sIFQsIEQsIGYsIDUsIGhbMjBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gcChELCBDLCBPLCBULCB3LCA5LCBoWzIxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IHAoVCwgRCwgQywgTywgQSwgMTQsIGhbMjJdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gcChPLCBULCBELCBDLCBsLCAyMCwgaFsyM10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBwKEMsIE8sIFQsIEQsIG0sIDUsIGhbMjRdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gcChELCBDLCBPLCBULCBFLCA5LCBoWzI1XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IHAoVCwgRCwgQywgTywgdSwgMTQsIGhbMjZdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gcChPLCBULCBELCBDLCB5LCAyMCwgaFsyN10pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBwKEMsIE8sIFQsIEQsIFMsIDUsIGhbMjhdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gcChELCBDLCBPLCBULCBpLCA5LCBoWzI5XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IHAoVCwgRCwgQywgTywgaywgMTQsIGhbMzBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gdihDLCBPID0gcChPLCBULCBELCBDLCB4LCAyMCwgaFszMV0pLCBULCBELCBmLCA0LCBoWzMyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IHYoRCwgQywgTywgVCwgeSwgMTEsIGhbMzNdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUID0gdihULCBELCBDLCBPLCBfLCAxNiwgaFszNF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8gPSB2KE8sIFQsIEQsIEMsIEUsIDIzLCBoWzM1XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IHYoQywgTywgVCwgRCwgYywgNCwgaFszNl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgPSB2KEQsIEMsIE8sIFQsIGwsIDExLCBoWzM3XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IHYoVCwgRCwgQywgTywgaywgMTYsIGhbMzhdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gdihPLCBULCBELCBDLCB3LCAyMywgaFszOV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSB2KEMsIE8sIFQsIEQsIFMsIDQsIGhbNDBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gdihELCBDLCBPLCBULCBzLCAxMSwgaFs0MV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSB2KFQsIEQsIEMsIE8sIHUsIDE2LCBoWzQyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyA9IHYoTywgVCwgRCwgQywgZCwgMjMsIGhbNDNdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gdihDLCBPLCBULCBELCBtLCA0LCBoWzQ0XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IHYoRCwgQywgTywgVCwgeCwgMTEsIGhbNDVdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUID0gdihULCBELCBDLCBPLCBBLCAxNiwgaFs0Nl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBiKEMsIE8gPSB2KE8sIFQsIEQsIEMsIGksIDIzLCBoWzQ3XSksIFQsIEQsIHMsIDYsIGhbNDhdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gYihELCBDLCBPLCBULCBrLCAxMCwgaFs0OV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBiKFQsIEQsIEMsIE8sIEUsIDE1LCBoWzUwXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyA9IGIoTywgVCwgRCwgQywgZiwgMjEsIGhbNTFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gYihDLCBPLCBULCBELCB4LCA2LCBoWzUyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRCA9IGIoRCwgQywgTywgVCwgdSwgMTAsIGhbNTNdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUID0gYihULCBELCBDLCBPLCB3LCAxNSwgaFs1NF0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8gPSBiKE8sIFQsIEQsIEMsIGMsIDIxLCBoWzU1XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IGIoQywgTywgVCwgRCwgeSwgNiwgaFs1Nl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQgPSBiKEQsIEMsIE8sIFQsIEEsIDEwLCBoWzU3XSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IGIoVCwgRCwgQywgTywgZCwgMTUsIGhbNThdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPID0gYihPLCBULCBELCBDLCBTLCAyMSwgaFs1OV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEMgPSBiKEMsIE8sIFQsIEQsIGwsIDYsIGhbNjBdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEID0gYihELCBDLCBPLCBULCBfLCAxMCwgaFs2MV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBiKFQsIEQsIEMsIE8sIGksIDE1LCBoWzYyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyA9IGIoTywgVCwgRCwgQywgbSwgMjEsIGhbNjNdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzBdID0gb1swXSArIEMgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9bMV0gPSBvWzFdICsgTyB8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1syXSA9IG9bMl0gKyBUIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvWzNdID0gb1szXSArIEQgfCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgciA9IGUud29yZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG4gPSA4ICogdGhpcy5fbkRhdGFCeXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYSA9IDggKiBlLnNpZ0J5dGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgclthID4+PiA1XSB8PSAxMjggPDwgMjQgLSBhICUgMzI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHQuZmxvb3IobiAvIDQyOTQ5NjcyOTYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzID0gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMTUgKyAoYSArIDY0ID4+PiA5IDw8IDQpXSA9IDE2NzExOTM1ICYgKG8gPDwgOCB8IG8gPj4+IDI0KSB8IDQyNzgyNTUzNjAgJiAobyA8PCAyNCB8IG8gPj4+IDgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMTQgKyAoYSArIDY0ID4+PiA5IDw8IDQpXSA9IDE2NzExOTM1ICYgKHMgPDwgOCB8IHMgPj4+IDI0KSB8IDQyNzgyNTUzNjAgJiAocyA8PCAyNCB8IHMgPj4+IDgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2lnQnl0ZXMgPSA0ICogKHIubGVuZ3RoICsgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2VzcygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IHRoaXMuX2hhc2gsIGkgPSBjLndvcmRzLCB1ID0gMDsgdSA8IDQ7IHUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gaVt1XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW3VdID0gMTY3MTE5MzUgJiAobCA8PCA4IHwgbCA+Pj4gMjQpIHwgNDI3ODI1NTM2MCAmIChsIDw8IDI0IHwgbCA+Pj4gOCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9lRGF0YTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgciwgbiwgYSA9IGMsIG8gPSBpLCBsID0gW10sIGggPSAwOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9baCsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSA9IGxbbC5sZW5ndGggLSAxXS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBsLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSA9IGxbbC5sZW5ndGggLSAxXSA9PT0gbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGxbbC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbFtsLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGxbbC5sZW5ndGggLSAyXSA/IChsW2wubGVuZ3RoIC0gM10gPSBhLmNhbGwobFtsLmxlbmd0aCAtIDNdLCBsW2wubGVuZ3RoIC0gMl0sIGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggLT0gMikgOiAobiA9IGxbbC5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM10gPSBuKGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBsLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSArPSBuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnBvcCgpID8gKytoIDogaCArPSBvW2hdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDJdID0gbFtsLmxlbmd0aCAtIDJdW3Nbb1toKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gob1toKytdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBvLmNsb25lLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5faGFzaCA9IHRoaXMuX2hhc2guY2xvbmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnKGUsIHQsIHIsIG4sIGEsIG8sIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBlICsgKHQgJiByIHwgfnQgJiBuKSArIGEgKyBzOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGMgPDwgbyB8IGMgPj4+IDMyIC0gbykgKyB0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHAoZSwgdCwgciwgbiwgYSwgbywgcykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGUgKyAodCAmIG4gfCByICYgfm4pICsgYSArIHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoYyA8PCBvIHwgYyA+Pj4gMzIgLSBvKSArIHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdihlLCB0LCByLCBuLCBhLCBvLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZSArICh0IF4gciBeIG4pICsgYSArIHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoYyA8PCBvIHwgYyA+Pj4gMzIgLSBvKSArIHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYihlLCB0LCByLCBuLCBhLCBvLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZSArIChyIF4gKHQgfCB+bikpICsgYSArIHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoYyA8PCBvIHwgYyA+Pj4gMzIgLSBvKSArIHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgci5NRDUgPSBvLl9jcmVhdGVIZWxwZXIoZiksCiAgICAgICAgICAgICAgICAgICAgICAgIHIuSG1hY01ENSA9IG8uX2NyZWF0ZUhtYWNIZWxwZXIoZikKICAgICAgICAgICAgICAgIH0oTWF0aCksCiAgICAgICAgICAgICAgICAgICAgZS5NRDUKICAgICAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgICJvYmplY3QiID09PSB1KDQzOSkgPyB0LmV4cG9ydHMgPSBvKEZTLmV4cG9ydHMpIDogbyhhLkNyeXB0b0pTKQogICAgfShYUyk7CiAgICB2YXIgS1MgPSBYUy5leHBvcnRzCiAgICAgICAgLCBxUyA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgWlMgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICAhZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByLCBuLCBhLCBvLCBzLCBjLCBpLCB1OwogICAgICAgIGUuZXhwb3J0cyA9IChuID0gKHIgPSB1ID0gRlMuZXhwb3J0cykubGliLAogICAgICAgICAgICBhID0gbi5Xb3JkQXJyYXksCiAgICAgICAgICAgIG8gPSBuLkhhc2hlciwKICAgICAgICAgICAgcyA9IHIuYWxnbywKICAgICAgICAgICAgYyA9IFtdLAogICAgICAgICAgICBpID0gcy5TSEExID0gby5leHRlbmQoewogICAgICAgICAgICAgICAgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc2ggPSBuZXcgYS5pbml0KFsxNzMyNTg0MTkzLCA0MDIzMjMzNDE3LCAyNTYyMzgzMTAyLCAyNzE3MzM4NzgsIDMyODUzNzc1MjBdKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSB0aGlzLl9oYXNoLndvcmRzLCBuID0gclswXSwgYSA9IHJbMV0sIG8gPSByWzJdLCBzID0gclszXSwgaSA9IHJbNF0sIHUgPSAwOyB1IDwgODA7IHUrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodSA8IDE2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY1t1XSA9IDAgfCBlW3QgKyB1XTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGNbdSAtIDNdIF4gY1t1IC0gOF0gXiBjW3UgLSAxNF0gXiBjW3UgLSAxNl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW3VdID0gbCA8PCAxIHwgbCA+Pj4gMzEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IChuIDw8IDUgfCBuID4+PiAyNykgKyBpICsgY1t1XTsKICAgICAgICAgICAgICAgICAgICAgICAgaCArPSB1IDwgMjAgPyAxNTE4NTAwMjQ5ICsgKGEgJiBvIHwgfmEgJiBzKSA6IHUgPCA0MCA/IDE4NTk3NzUzOTMgKyAoYSBeIG8gXiBzKSA6IHUgPCA2MCA/IChhICYgbyB8IGEgJiBzIHwgbyAmIHMpIC0gMTg5NDAwNzU4OCA6IChhIF4gbyBeIHMpIC0gODk5NDk3NTE0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBhIDw8IDMwIHwgYSA+Pj4gMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGgKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgclswXSA9IHJbMF0gKyBuIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgclsxXSA9IHJbMV0gKyBhIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgclsyXSA9IHJbMl0gKyBvIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgclszXSA9IHJbM10gKyBzIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgcls0XSA9IHJbNF0gKyBpIHwgMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMuX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgLCB0ID0gZS53b3JkcwogICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSA4ICogdGhpcy5fbkRhdGFCeXRlcwogICAgICAgICAgICAgICAgICAgICAgICAsIG4gPSA4ICogZS5zaWdCeXRlczsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdFtuID4+PiA1XSB8PSAxMjggPDwgMjQgLSBuICUgMzIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRbMTQgKyAobiArIDY0ID4+PiA5IDw8IDQpXSA9IE1hdGguZmxvb3IociAvIDQyOTQ5NjcyOTYpLAogICAgICAgICAgICAgICAgICAgICAgICB0WzE1ICsgKG4gKyA2NCA+Pj4gOSA8PCA0KV0gPSByLAogICAgICAgICAgICAgICAgICAgICAgICBlLnNpZ0J5dGVzID0gNCAqIHQubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc2gKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBvLmNsb25lLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuX2hhc2ggPSB0aGlzLl9oYXNoLmNsb25lKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHIuU0hBMSA9IG8uX2NyZWF0ZUhlbHBlcihpKSwKICAgICAgICAgICAgci5IbWFjU0hBMSA9IG8uX2NyZWF0ZUhtYWNIZWxwZXIoaSksCiAgICAgICAgICAgIHUuU0hBMSkKICAgIH0oWlMpOwogICAgdmFyIFZTID0gewogICAgICAgIGV4cG9ydHM6IHt9CiAgICB9OwogICAgIWZ1bmN0aW9uKHQsIHIpIHsKICAgICAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9ICIiLCByID0gMDsgciA8IGUubGVuZ3RoOyApIHsKICAgICAgICAgICAgICAgIHZhciBuID0gZS5jaGFyQ29kZUF0KHIrKyk7CiAgICAgICAgICAgICAgICB0ICs9IG4gPiA2MyA/IFN0cmluZy5mcm9tQ2hhckNvZGUoMTMgXiBuKSA6IDM1ID09IG4gPyBlLmNoYXJBdChyKyspIDogU3RyaW5nLmZyb21DaGFyQ29kZShuKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0CiAgICAgICAgfQogICAgICAgIHZhciBhLCBvLCBzID0gW24oImRjZHkiKSwgbigiUmVsfmVoI3IiKSwgbigifWwjcn5oIiksIG4oImhGaHQiKSwgbigib2FibmZeZHdoIiksIG4oIn5kak90eWh+IiksIG4oImtkY2xhZHdoIiksIG4oIm5hbGB9IiksIG4oIm5hYmNoIiksIG4oIlJiRmh0IiksIG4oIlJkRmh0IiksIG4oInpiI3JpfiIpLCAtMjc3MzE0ODc3MCwgMjQ5Njc3NTk4OSwgMzEwOTM1OTc2NSwgbigiI3Jofmh5IiksIG4oIn59YWR5IiksICIiLCBuKCJ+YWRuaCIpLCAicG9wIiwgbigibmVsI3JOYmloTHkiKSwgbigiayNyYmBOZWwjck5iaWgiKSwgbigifXh+ZSIpLCBuKCJuYmNubHkiKSwgbigiZ2JkYyIpXSwgYyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLCBpID0gWzQ1LCA1MCwgNzUsIDcsIDYwLCA2OSwgMCwgNzEsIDEyLCA5OCwgMSwgNzQsIDc1LCA2LCA0NCwgODksIDM3LCAxMCwgMTUzLCAzMywgNTUsIDIwLCAxMSwgNDIsIDQzLCAyLCA3LCA0MywgMywgNiwgMzMsIDMzLCAxNiwgNzUsIDYwLCA2OSwgNCwgOTksIDc1LCAyMywgMTAsIDk4ODYsIDEwLCAtNTM5NywgNDEsIDEwLCAtNDQ4NSwgNDEsIDE4LCA4NCwgNzUsIDYsIDY5LCA1LCA5MCwgODAsIDIwLCA3LCA2MCwgNDMsIDYsIDYsIDMzLCAxNiwgNzUsIDYsIDQzLCA3LCA1NywgNzUsIDcsIDYsIDQzLCA4LCA1NywgOTgsIDksIDE0LCA3NSwgNywgNiwgNDMsIDgsIDU3LCA5OCwgMTAsIDI0LCA3NSwgNTMsIDY5LCAxMSwgNDcsIDc1LCAzOSwgNjksIDExLCA5MiwgNzUsIDEwLCAzMTE5LCAxMCwgLTk2MzIsIDQxLCAxMCwgNjUxMywgNDEsIDgxLCA3NSwgODIsIDMzLCA2MywgMzgsIDMwLCAzLCA1NCwgMTIsIDU0LCAxMywgNDEsIDEwLCAxODI1OTI5NjA5LCA0MSwgMTksIDIyLCA3NSwgNzksIDM4LCAzMCwgMywgMTAsIC0xNDcwODgwMzM2LCAxMCwgLTcyODk1Njk0MywgNDEsIDU0LCAxNCwgNDEsIDE5LCAyMiwgNzUsIDcyLCA3NSwgMzgsIDIzLCA2NCwgMzYsIC0zNiwgNTMsIDM5LCA5MCwgOTgsIDUsIDk4LCA1LCA3NSwgNywgNDMsIDE1LCA1NywgNzUsIDExLCA2LCA5NywgMCwgMTUsIDEsIDYyLCA0MiwgMiwgNTIsIDk3LCAyLCA1OSwgLTYzMDksIDU5LCA3NjQwLCA4MSwgNTksIC0xMzMxLCA4MSwgNTksIC0zNzEyLCA1OSwgNDk4NywgODEsIDU5LCAtMTI3MCwgODEsIDkzLCAyNSwgMiwgNTIsIDk3LCAyLCA1OSwgNSwgNjIsIDUxLCAyLCA3NCwgMCwgMjksIDIsIDE3LCA0MCwgMzYsIDk3LCAzLCA0LCA5NywgNCwgNTksIC0yNDM3LCA1OSwgMTY2NiwgODEsIDU5LCA3NzEsIDgxLCA2MiwgODUsIDIsIDE2LCA5NywgNSwgNTksIDUxMzgsIDU5LCAtMjEyLCA4MSwgNTksIC00NzY4LCA4MSwgMzAsIDc5LCA2MiwgNzIsIDIsIDY2LCA5NywgNiwgMjEsIDYyLCAyLCAzNiwgNDYsIDU5LCAtOTg2MywgNTksIC0xNDM2LCA4MSwgNTksIDExMjk5LCA4MSwgNDEsIDc2LCAtNTEsIDY2LCA5NywgNywgNSwgNjIsIDI5LCAyLCA2NiwgOTcsIDgsIDE1LCAxLCA2MiwgODQsIDQ1XTsKICAgICAgICBmdW5jdGlvbiB1KCkgewogICAgICAgICAgICB2YXIgZSA9IFsibXR1WW54dlVxTVBvQlciLCAiQzNyWUF3NU4iLCAibUptWm1aclZzTVhIckxPIiwgIm10ZTVtSnJ3QU5QT0FOaSIsICJtSmkwb2R5WG5obmJ1Z25IQUciLCAibXRlMW50cVltaER1RUtUbUVxIiwgIm1acTBuWkcxdXVEWkJNVHciLCAibEk5SkIzakwiLCAiQjJqUXp3bjAiLCAibXRxMW1KbVltaFB5dXduSkFXIiwgIm10S1luSkMzdjNIVnNMZlMiLCAibXRtWXlMRFlxMDltIl07CiAgICAgICAgICAgIHJldHVybiAodSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkoKQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBsKGUsIHQpIHsKICAgICAgICAgICAgdmFyIHIgPSB1KCk7CiAgICAgICAgICAgIHJldHVybiBsID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgdmFyIGEgPSByW3QgLT0gMTQyXTsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGwucWFNR3NGKSB7CiAgICAgICAgICAgICAgICAgICAgbC51akREQnMgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIHIsIG4gPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODkrLz0iLCBhID0gIiIsIG8gPSAiIiwgcyA9IDAsIGMgPSAwOyByID0gZS5jaGFyQXQoYysrKTsgfnIgJiYgKHQgPSBzICUgNCA/IDY0ICogdCArIHIgOiByLAogICAgICAgICAgICAgICAgICAgICAgICBzKysgJSA0KSA/IGEgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgyNTUgJiB0ID4+ICgtMiAqIHMgJiA2KSkgOiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHJtKG4pLmNhbGwobiwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCB1ID0gYS5sZW5ndGg7IGkgPCB1OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyArPSAiJSIgKyBubShsID0gIjAwIiArIGEuY2hhckNvZGVBdChpKS50b1N0cmluZygxNikpLmNhbGwobCwgLTIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChvKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICBsLnFhTUdzRiA9ICEwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbyA9IHQgKyByWzBdLnN1YnN0cmluZygwLCAyKQogICAgICAgICAgICAgICAgICAgICwgcyA9IGVbb107CiAgICAgICAgICAgICAgICByZXR1cm4gcyA/IGEgPSBzIDogKGEgPSBsLnVqRERCcyhhKSwKICAgICAgICAgICAgICAgICAgICBlW29dID0gYSksCiAgICAgICAgICAgICAgICAgICAgYQogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICBsKGUsIHQpCiAgICAgICAgfQogICAgICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIHIgPSBsLCBuID0gZSgpOyA7ICkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDYxNDg5MyA9PT0gLVd5KHIoMTUwKSkgLyAxICsgLVd5KHIoMTQ0KSkgLyAyICsgLVd5KHIoMTQyKSkgLyAzICsgLVd5KHIoMTQzKSkgLyA0ICogKC1XeShyKDE1MikpIC8gNSkgKyBXeShyKDE1MSkpIC8gNiAqIChXeShyKDE0NikpIC8gNykgKyAtV3kocigxNDkpKSAvIDggKyBXeShyKDE0NSkpIC8gOSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBuLnB1c2gobi5zaGlmdCgpKQogICAgICAgICAgICAgICAgfQogICAgICAgIH0odSksCiAgICAgICAgICAgIGEgPSBlLAogICAgICAgICAgICBvID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdmFyIHQsIHIsIG47CiAgICAgICAgICAgICAgICByID0gKHQgPSBlKS5saWIuQmFzZSwKICAgICAgICAgICAgICAgICAgICBuID0gdC5lbmMuVXRmOCwKICAgICAgICAgICAgICAgICAgICB0LmFsZ28uSE1BQyA9IHIuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciwgYSwgbywgdSwgaCwgZiwgZywgcCwgdiwgYiA9IGMsIGQgPSBpLCBrID0gW10sIHkgPSAwOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRbeSsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrW2subGVuZ3RoIC0gMl0gPSBrW2subGVuZ3RoIC0gMl1ba1trLmxlbmd0aCAtIDFdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnB1c2godGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChkW3krK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrW2subGVuZ3RoIC0gMl0gPSBuZXcga1trLmxlbmd0aCAtIDJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsubGVuZ3RoIC09IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBrW2subGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBrW2subGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBrLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtbay5sZW5ndGggLSAxXSAqPSB2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gay5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrW2subGVuZ3RoIC0gMV0gXj0gdjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDFdID8gKCsreSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWsubGVuZ3RoKSA6IHkgKz0gZFt5XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDNdW2tbay5sZW5ndGggLSAyXV0gPSBrW2subGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDNdID0ga1trLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsubGVuZ3RoIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGtbay5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKGtbay5sZW5ndGggLSAyXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKGtbay5sZW5ndGggLSAyXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0ga1trLmxlbmd0aCAtIDJdID8gKGtbay5sZW5ndGggLSAzXSA9IGIuY2FsbChrW2subGVuZ3RoIC0gM10sIGtbay5sZW5ndGggLSAyXSwga1trLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLmxlbmd0aCAtPSAyKSA6ICh2ID0ga1trLmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtbay5sZW5ndGggLSAzXSA9IHYoa1trLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wb3AoKSA/IHkgKz0gZFt5XSA6ICsreTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnB1c2gocCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGsucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDFdICs9IHY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKGtbay5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDJdID0ga1trLmxlbmd0aCAtIDJdW3NbZFt5KytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtbay5sZW5ndGggLSAxXSA9IERnKGtbay5sZW5ndGggLSAxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGtbay5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGtbay5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnB1c2goc1tkW3krK11dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGsucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDFdID0ga1trLmxlbmd0aCAtIDFdID09IHY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0ga1trLmxlbmd0aCAtIDFdID8ga1trLmxlbmd0aCAtIDJdID0gYi5jYWxsKGtbay5sZW5ndGggLSAyXSwga1trLmxlbmd0aCAtIDFdKSA6ICh2ID0ga1trLmxlbmd0aCAtIDJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtbay5sZW5ndGggLSAyXSA9IHYoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnB1c2goZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBrLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtbay5sZW5ndGggLSAxXSA9IGtbay5sZW5ndGggLSAxXSA8IHY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtbay5sZW5ndGggLSAxXSA9IGtbay5sZW5ndGggLSAxXVtzW2RbeSsrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnB1c2godm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay5wdXNoKHArKyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBrW2subGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IGsucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDFdID0ga1trLmxlbmd0aCAtIDFdID4gdjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IGtbay5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeSArPSBkW3ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0ga1trLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLnB1c2gocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsucHVzaChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGtbay5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDJdW3NbZFt5KytdXV0gPSBrW2subGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga1trLmxlbmd0aCAtIDJdID0ga1trLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBrW2subGVuZ3RoIC0gMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5faGFzaGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNldCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudXBkYXRlKHRoaXMuX2lLZXkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2hhc2hlci51cGRhdGUoZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlS2V5OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCByLCBuLCBhLCBvLCB1LCBsLCBoID0gYywgZiA9IGksIGcgPSBbXSwgcCA9IDE2MTsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChmW3ArK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGdbZy5sZW5ndGggLSAxXSA/IGdbZy5sZW5ndGggLSAyXSA9IGguY2FsbChnW2cubGVuZ3RoIC0gMl0sIGdbZy5sZW5ndGggLSAxXSkgOiAobCA9IGdbZy5sZW5ndGggLSAyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2cubGVuZ3RoIC0gMl0gPSBsKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHNbMTYgKyBmW3ArK11dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKFN0cmluZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgKz0gZltwXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZ1tnLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZ1tnLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGcucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1tnLmxlbmd0aCAtIDFdID0gZ1tnLmxlbmd0aCAtIDFdID4gbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGdbZy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1tnLmxlbmd0aCAtIDFdID0gZ1tnLmxlbmd0aCAtIDFdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGdbZy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goZltwKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBnW2cubGVuZ3RoIC0gMl0gPyAoZ1tnLmxlbmd0aCAtIDNdID0gaC5jYWxsKGdbZy5sZW5ndGggLSAzXSwgZ1tnLmxlbmd0aCAtIDJdLCBnW2cubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcubGVuZ3RoIC09IDIpIDogKGwgPSBnW2cubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1tnLmxlbmd0aCAtIDNdID0gbChnW2cubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBnW2cubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChuZXcgQXJyYXkoZltwKytdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucG9wKCkgPyBwICs9IGZbcF0gOiArK3A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBnLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSAxXSAtPSBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gZy5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2cubGVuZ3RoIC0gMV0gKz0gbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGcucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZ1tnLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2cubGVuZ3RoIC0gNF0gPSBoLmNhbGwoZ1tnLmxlbmd0aCAtIDRdLCBnW2cubGVuZ3RoIC0gM10sIGdbZy5sZW5ndGggLSAyXSwgZ1tnLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLmxlbmd0aCAtPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goZ1tnLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2cubGVuZ3RoIC0gMl0gPSBnW2cubGVuZ3RoIC0gMl1bc1sxNiArIGZbcCsrXV1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbGl6ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQsIHIgPSB0aGlzLl9oYXNoZXIsIG4gPSByLmZpbmFsaXplKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIucmVzZXQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmZpbmFsaXplKERfKHQgPSB0aGlzLl9vS2V5LmNsb25lKCkpLmNhbGwodCwgbikpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgICwKICAgICAgICAgICAgIm9iamVjdCIgPT09IGwoMTQ4KSA/IHQuZXhwb3J0cyA9IG8oRlMuZXhwb3J0cykgOiBvKGEuQ3J5cHRvSlMpCiAgICB9KFZTKSwKICAgICAgICBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIHZhciByLCBuLCBhLCBvLCBzLCBjLCBpLCB1OwogICAgICAgICAgICBlLmV4cG9ydHMgPSAobiA9IChyID0gdSA9IEZTLmV4cG9ydHMpLmxpYiwKICAgICAgICAgICAgICAgIGEgPSBuLkJhc2UsCiAgICAgICAgICAgICAgICBvID0gbi5Xb3JkQXJyYXksCiAgICAgICAgICAgICAgICBzID0gci5hbGdvLAogICAgICAgICAgICAgICAgYyA9IHMuTUQ1LAogICAgICAgICAgICAgICAgaSA9IHMuRXZwS0RGID0gYS5leHRlbmQoewogICAgICAgICAgICAgICAgICAgIGNmZzogYS5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICBrZXlTaXplOiA0LAogICAgICAgICAgICAgICAgICAgICAgICBoYXNoZXI6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2ZnID0gdGhpcy5jZmcuZXh0ZW5kKGUpCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjb21wdXRlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIsIG4gPSB0aGlzLmNmZywgYSA9IG4uaGFzaGVyLmNyZWF0ZSgpLCBzID0gby5jcmVhdGUoKSwgYyA9IHMud29yZHMsIGkgPSBuLmtleVNpemUsIHUgPSBuLml0ZXJhdGlvbnM7IGMubGVuZ3RoIDwgaTsgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmIGEudXBkYXRlKHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhLnVwZGF0ZShlKS5maW5hbGl6ZSh0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnJlc2V0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMTsgbCA8IHU7IGwrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gYS5maW5hbGl6ZShyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5yZXNldCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgRF8ocykuY2FsbChzLCByKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLnNpZ0J5dGVzID0gNCAqIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICByLkV2cEtERiA9IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5jcmVhdGUocikuY29tcHV0ZShlLCB0KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgdS5FdnBLREYpCiAgICAgICAgfShxUyk7CiAgICB2YXIgUVMgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICAhZnVuY3Rpb24odCwgcikgewogICAgICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gIiIsIHIgPSAwOyByIDwgZS5sZW5ndGg7ICkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNoYXJDb2RlQXQocisrKTsKICAgICAgICAgICAgICAgIHQgKz0gbiA+IDYzID8gU3RyaW5nLmZyb21DaGFyQ29kZSgxMiBeIG4pIDogMzUgPT0gbiA/IGUuY2hhckF0KHIrKykgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICB9CiAgICAgICAgdmFyIGEsIG8sIHMgPSBbImNmZyIsIG4oIml0eGliaCIpLCBuKCJTdGpjfmFBY2hpIiksIG4oImlHaXUiKSwgbigiU2dpdSIpLCBuKCJ+aSNzaXgiKSwgImVuYyIsIG4oIll4ZWAjcyIpLCBuKCJqfmNhW2N+aE1+fm11IiksIG4oIiNzYGVvaSIpLCBuKCJvbWBgIiksIG4oIn5peml+I3NpIiksIG4oInx+Y3hjeHV8aSIpLCBuKCJ8eSNzZCIpLCBuKCJtfHxgdSIpLCBuKCJ4Y1tjfmhNfn5tdSIpXSwgYyA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLCBpID0gWzU4LCA1OCwgNCwgMCwgOSwgMSwgODIsIDg4LCA5NywgMCwgNDksIDU4LCAxOSwgOTcsIDIsIDQ5LCA1OCwgNTgsIDksIDMsIDMyLCA4OCwgOTcsIDQsIDQ5LCA1OCwgOSwgNSwgNTIsIDQ5LCA2NSwgOTYsIDE4LCAwLCAxOCwgMSwgNTQsIDIsIDk0LCA0NywgMjUsIDI5LCA4OCwgMCwgMTgsIDMsIDU0LCA0LCA4MywgNDcsIDYwLCAyOSwgODgsIDAsIDQ2LCAyOSwgNTUsIDY3LCA3NiwgNjYyMiwgNzYsIC04NjMwLCAzLCA3NiwgMjAwOSwgMywgMTQsIDI2LCAyOSwgMTUsIDY1LCA1NSwgNTQsIDMsIDE5LCA3NiwgOTE4OSwgNzYsIC01NTgzLCAzLCA3NiwgLTM1OTAsIDMsIDE0LCA3NiwgLTk3OTgsIDc2LCAtNTE0OCwgMywgNzYsIDE0OTQ3LCAzLCAzLCAxOSwgNzYsIC0yMTM0LCA3NiwgMTU0NCwgMywgNzYsIDU5MSwgMywgMywgNDEsIDk1LCAyOSwgMTAsIDU0LCA1LCA1NywgNjksIDI5LCA2LCAxOCwgNiwgMTgsIDcsIDU0LCA4LCA1MywgNzUsIDQxLCAyOSwgMTksIDc2LCA5OTMzLCA3NiwgLTM3NjYsIDMsIDc2LCAtNjE1MSwgMywgMTQsIDI2LCAyOSwgMTksIDc2LCAtOTIwMSwgNzYsIDExMDgsIDMsIDc2LCA4MDkzLCAzLCAxMiwgNzEsIC03NSwgOTYsIDE4LCAwLCAxOCwgMSwgNTQsIDksIDUzLCA0NywgNjYsIDEzXTsKICAgICAgICBmdW5jdGlvbiB1KGUsIHQpIHsKICAgICAgICAgICAgdmFyIHIgPSBsKCk7CiAgICAgICAgICAgIHJldHVybiB1ID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgdmFyIGEgPSByW3QgLT0gMTc2XTsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHUuTHRPR2tCKSB7CiAgICAgICAgICAgICAgICAgICAgdS5GZE9Cc0UgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIHIsIG4gPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODkrLz0iLCBhID0gIiIsIG8gPSAiIiwgcyA9IDAsIGMgPSAwOyByID0gZS5jaGFyQXQoYysrKTsgfnIgJiYgKHQgPSBzICUgNCA/IDY0ICogdCArIHIgOiByLAogICAgICAgICAgICAgICAgICAgICAgICBzKysgJSA0KSA/IGEgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgyNTUgJiB0ID4+ICgtMiAqIHMgJiA2KSkgOiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHJtKG4pLmNhbGwobiwgcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCB1ID0gYS5sZW5ndGg7IGkgPCB1OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyArPSAiJSIgKyBubShsID0gIjAwIiArIGEuY2hhckNvZGVBdChpKS50b1N0cmluZygxNikpLmNhbGwobCwgLTIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChvKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICB1Lkx0T0drQiA9ICEwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbyA9IHQgKyByWzBdLnN1YnN0cmluZygwLCAyKQogICAgICAgICAgICAgICAgICAgICwgcyA9IGVbb107CiAgICAgICAgICAgICAgICByZXR1cm4gcyA/IGEgPSBzIDogKGEgPSB1LkZkT0JzRShhKSwKICAgICAgICAgICAgICAgICAgICBlW29dID0gYSksCiAgICAgICAgICAgICAgICAgICAgYQogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICB1KGUsIHQpCiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGwoKSB7CiAgICAgICAgICAgIHZhciBlID0gWyJtWnkwbXR1WUJlOWlyZXZWIiwgIm1acTBtZHZPck5yckFNRyIsICJtdEsybXRtWXZNVDNEeGpOIiwgIm10eTRtM0RodTBySHVXIiwgImxJOUpCM2pMIiwgIkIyalF6d24wIiwgIm10SFl1Z2pSdktLIiwgIm53MTF6Mlhtd3EiLCAiQzNyWUF3NU4iLCAiek1YMUMyRyIsICJtWmkzbWhIZnIzSHVFYSIsICJtdGkybVpHV25lRHp1dkRNdGEiLCAib2dQNHpMYlZxVyIsICJuSktabk5IdkNMcldDVyIsICJsSTlMRE5iUnpneSIsICJtSmlab2REeHNOUEpyZzAiLCAibmRtWXplNXlEZlBuIl07CiAgICAgICAgICAgIHJldHVybiAobCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkoKQogICAgICAgIH0KICAgICAgICAhZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICBmb3IgKHZhciByID0gdSwgbiA9IGUoKTsgOyApCiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGlmICgxNTkxNTUgPT09IC1XeShyKDE4NCkpIC8gMSAqIChXeShyKDE5MikpIC8gMikgKyBXeShyKDE4NikpIC8gMyArIFd5KHIoMTg4KSkgLyA0ICogKC1XeShyKDE3NikpIC8gNSkgKyBXeShyKDE4MCkpIC8gNiArIC1XeShyKDE4NykpIC8gNyAqICgtV3kocigxODEpKSAvIDgpICsgLVd5KHIoMTg1KSkgLyA5ICogKFd5KHIoMTc5KSkgLyAxMCkgKyBXeShyKDE4OSkpIC8gMTEgKiAoV3kocigxODIpKSAvIDEyKSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBuLnB1c2gobi5zaGlmdCgpKQogICAgICAgICAgICAgICAgfQogICAgICAgIH0obCksCiAgICAgICAgICAgIGEgPSBlLAogICAgICAgICAgICBvID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgZS5saWIuQ2lwaGVyIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUKICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gci5saWIKICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gbi5CYXNlCiAgICAgICAgICAgICAgICAgICAgICAgICwgbyA9IG4uV29yZEFycmF5CiAgICAgICAgICAgICAgICAgICAgICAgICwgbCA9IG4uQnVmZmVyZWRCbG9ja0FsZ29yaXRobQogICAgICAgICAgICAgICAgICAgICAgICAsIGggPSByLmVuYzsKICAgICAgICAgICAgICAgICAgICBoLlV0Zjg7CiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBoLkJhc2U2NAogICAgICAgICAgICAgICAgICAgICAgICAsIGcgPSByLmFsZ28uRXZwS0RGCiAgICAgICAgICAgICAgICAgICAgICAgICwgcCA9IG4uQ2lwaGVyID0gbC5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICBjZmc6IGEuZXh0ZW5kKCksCiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVuY3J5cHRvcjogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlKHRoaXMuX0VOQ19YRk9STV9NT0RFLCBlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVEZWNyeXB0b3I6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZSh0aGlzLl9ERUNfWEZPUk1fTU9ERSwgZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiwgYSA9IGMsIG8gPSBpLCB1ID0gW10sIGwgPSAwOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9bbCsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1W3UubGVuZ3RoIC0gMV0gPSB1W3UubGVuZ3RoIC0gMV1bc1tvW2wrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2godVt1Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1W3UubGVuZ3RoIC0gMl0gPSB1W3UubGVuZ3RoIC0gMl1bc1tvW2wrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gdVt1Lmxlbmd0aCAtIDFdID8gdVt1Lmxlbmd0aCAtIDJdID0gYS5jYWxsKHVbdS5sZW5ndGggLSAyXSwgdVt1Lmxlbmd0aCAtIDFdKSA6IChuID0gdVt1Lmxlbmd0aCAtIDJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVbdS5sZW5ndGggLSAyXSA9IG4oKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5wdXNoKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2gocik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gdVt1Lmxlbmd0aCAtIDJdID8gKHVbdS5sZW5ndGggLSAzXSA9IGEuY2FsbCh1W3UubGVuZ3RoIC0gM10sIHVbdS5sZW5ndGggLSAyXSwgdVt1Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lmxlbmd0aCAtPSAyKSA6IChuID0gdVt1Lmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVbdS5sZW5ndGggLSAzXSA9IG4odVt1Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdVt1Lmxlbmd0aCAtIDJdW3Nbb1tsKytdXV0gPSB1W3UubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdVt1Lmxlbmd0aCAtIDJdID0gdVt1Lmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUubGVuZ3RoLS0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9lRGF0YTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5yZXNldC5jYWxsKHRoaXMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvUmVzZXQoKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlS2V5OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciByLCBuLCBhLCBvLCB1LCBsLCBoLCBmID0gYywgZyA9IGksIHAgPSBbXSwgdiA9IDMxOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGdbdisrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gcC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMV0gKz0gaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goQXJyYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2godSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBwLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAxXSA9IHBbcC5sZW5ndGggLSAxXSA+PSBoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gcC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMV0gLT0gaDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiArPSBnW3ZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMV0gPSBwW3AubGVuZ3RoIC0gMV1bc1s2ICsgZ1t2KytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDRdID0gZi5jYWxsKHBbcC5sZW5ndGggLSA0XSwgcFtwLmxlbmd0aCAtIDNdLCBwW3AubGVuZ3RoIC0gMl0sIHBbcC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5sZW5ndGggLT0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBwW3AubGVuZ3RoIC0gMl0gPyAocFtwLmxlbmd0aCAtIDNdID0gZi5jYWxsKHBbcC5sZW5ndGggLSAzXSwgcFtwLmxlbmd0aCAtIDJdLCBwW3AubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAubGVuZ3RoIC09IDIpIDogKGggPSBwW3AubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDNdID0gaChwW3AubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChwW3AubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAyXSA9IHBbcC5sZW5ndGggLSAyXVtzWzYgKyBnW3YrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHBbcC5sZW5ndGggLSAxXSA/IHBbcC5sZW5ndGggLSAyXSA9IGYuY2FsbChwW3AubGVuZ3RoIC0gMl0sIHBbcC5sZW5ndGggLSAxXSkgOiAoaCA9IHBbcC5sZW5ndGggLSAyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMl0gPSBoKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBwW3AubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDFdID0gcFtwLmxlbmd0aCAtIDFdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wb3AoKSA/IHYgKz0gZ1t2XSA6ICsrdjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goZ1t2KytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gobmV3IEFycmF5KGdbdisrXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBwW3AubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VzczogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGVuZChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemU6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlICYmIHRoaXMuX2FwcGVuZChlKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb0ZpbmFsaXplKCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAga2V5U2l6ZTogNCwKICAgICAgICAgICAgICAgICAgICAgICAgaXZTaXplOiA0LAogICAgICAgICAgICAgICAgICAgICAgICBfRU5DX1hGT1JNX01PREU6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIF9ERUNfWEZPUk1fTU9ERTogMiwKICAgICAgICAgICAgICAgICAgICAgICAgX2NyZWF0ZUhlbHBlcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBlKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERnKGUpID09IHQoMTc3KSA/IHggOiB3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY3J5cHQ6IGZ1bmN0aW9uKHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKG4pLmVuY3J5cHQodCwgciwgbiwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjcnlwdDogZnVuY3Rpb24ociwgbiwgYSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUobikuZGVjcnlwdCh0LCByLCBuLCBhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KCkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBuLlN0cmVhbUNpcGhlciA9IHAuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3MoISFlKDE3OCkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogMQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHZhciB2ID0gci5tb2RlID0ge30KICAgICAgICAgICAgICAgICAgICAgICAgLCBiID0gbi5CbG9ja0NpcGhlck1vZGUgPSBhLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUVuY3J5cHRvcjogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuRW5jcnlwdG9yLmNyZWF0ZShlLCB0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVEZWNyeXB0b3I6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLkRlY3J5cHRvci5jcmVhdGUoZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2lwaGVyID0gZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pdiA9IHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICwgZCA9IHYuQ0JDID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gYi5leHRlbmQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gdChlLCB0LCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiwgYSA9IHRoaXMuX2l2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA/IChuID0gYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pdiA9IHZvaWQgMCkgOiBuID0gdGhpcy5fcHJldkJsb2NrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbyA9IDA7IG8gPCByOyBvKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0ICsgb10gXj0gbltvXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLkVuY3J5cHRvciA9IGUuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NCbG9jazogZnVuY3Rpb24oZSwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5fY2lwaGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgYSA9IG4uYmxvY2tTaXplOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY2FsbCh0aGlzLCBlLCByLCBhKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5lbmNyeXB0QmxvY2soZSwgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZCbG9jayA9IG5tKGUpLmNhbGwoZSwgciwgciArIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5EZWNyeXB0b3IgPSBlLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbihlLCByKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5fY2lwaGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSBuLmJsb2NrU2l6ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBvID0gbm0oZSkuY2FsbChlLCByLCByICsgYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZGVjcnlwdEJsb2NrKGUsIHIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jYWxsKHRoaXMsIGUsIHIsIGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldkJsb2NrID0gbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZQogICAgICAgICAgICAgICAgICAgIH0oKQogICAgICAgICAgICAgICAgICAgICAgICAsIGsgPSAoci5wYWQgPSB7fSkuUGtjczcgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IDQgKiB0LCBuID0gciAtIGUuc2lnQnl0ZXMgJSByLCBhID0gbiA8PCAyNCB8IG4gPDwgMTYgfCBuIDw8IDggfCBuLCBzID0gW10sIGMgPSAwOyBjIDwgbjsgYyArPSA0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gby5jcmVhdGUocywgbik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEXyhlKS5jYWxsKGUsIGkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHVucGFkOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IDI1NSAmIGUud29yZHNbZS5zaWdCeXRlcyAtIDEgPj4+IDJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zaWdCeXRlcyAtPSB0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIG4uQmxvY2tDaXBoZXIgPSBwLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNmZzogcC5jZmcuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBrCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucmVzZXQuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jZmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSB0Lml2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gdC5tb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5feGZvcm1Nb2RlID09IHRoaXMuX0VOQ19YRk9STV9NT0RFID8gZSA9IG4uY3JlYXRlRW5jcnlwdG9yIDogKGUgPSBuLmNyZWF0ZURlY3J5cHRvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9taW5CdWZmZXJTaXplID0gMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kZSAmJiB0aGlzLl9tb2RlLl9fY3JlYXRvciA9PSBlID8gdGhpcy5fbW9kZS5pbml0KHRoaXMsIHIgJiYgci53b3JkcykgOiAodGhpcy5fbW9kZSA9IGUuY2FsbChuLCB0aGlzLCByICYmIHIud29yZHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb2RlLl9fY3JlYXRvciA9IGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9kZS5wcm9jZXNzQmxvY2soZSwgdCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUsIHQgPSB1LCByID0gdGhpcy5jZmcucGFkZGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl94Zm9ybU1vZGUgPT0gdGhpcy5fRU5DX1hGT1JNX01PREUgPyAoci5wYWQodGhpcy5fZGF0YSwgdGhpcy5ibG9ja1NpemUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLl9wcm9jZXNzKCEhdCgxNzgpKSkgOiAoZSA9IHRoaXMuX3Byb2Nlc3MoISF0KDE3OCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIudW5wYWQoZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTaXplOiA0CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBuLkNpcGhlclBhcmFtcyA9IGEuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taXhJbihlKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlIHx8IHRoaXMuZm9ybWF0dGVyKS5zdHJpbmdpZnkodGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICwgbSA9IChyLmZvcm1hdCA9IHt9KS5PcGVuU1NMID0gewogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCByLCBuID0gZS5jaXBoZXJ0ZXh0LCBhID0gZS5zYWx0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhID8gRF8odCA9IERfKHIgPSBvLmNyZWF0ZShbMTM5ODg5MzY4NCwgMTcwMTA3NjgzMV0pKS5jYWxsKHIsIGEpKS5jYWxsKHQsIG4pIDogbikudG9TdHJpbmcoZikKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCByID0gZi5wYXJzZShlKSwgbiA9IHIud29yZHM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTM5ODg5MzY4NCA9PSBuWzBdICYmIDE3MDEwNzY4MzEgPT0gblsxXSAmJiAodCA9IG8uY3JlYXRlKG5tKG4pLmNhbGwobiwgMiwgNCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ4KG4pLmNhbGwobiwgMCwgNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5zaWdCeXRlcyAtPSAxNiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5jcmVhdGUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXBoZXJ0ZXh0OiByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYWx0OiB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLCB3ID0gbi5TZXJpYWxpemFibGVDaXBoZXIgPSBhLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNmZzogYS5leHRlbmQoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBtCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0OiBmdW5jdGlvbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5jZmcuZXh0ZW5kKG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBlLmNyZWF0ZUVuY3J5cHRvcihyLCBuKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbyA9IGEuZmluYWxpemUodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHMgPSBhLmNmZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5LmNyZWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2lwaGVydGV4dDogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXY6IHMuaXYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxnb3JpdGhtOiBlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6IHMubW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBzLnBhZGRpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTaXplOiBlLmJsb2NrU2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZXI6IG4uZm9ybWF0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkZWNyeXB0OiBmdW5jdGlvbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA9IHRoaXMuY2ZnLmV4dGVuZChuKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy5fcGFyc2UodCwgbi5mb3JtYXQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY3JlYXRlRGVjcnlwdG9yKHIsIG4pLmZpbmFsaXplKHQuY2lwaGVydGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX3BhcnNlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGcoZSkgPT0gcigxNzcpID8gdC5wYXJzZShlLCB0aGlzKSA6IGUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICwgXyA9IChyLmtkZiA9IHt9KS5PcGVuU1NMID0gewogICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRlOiBmdW5jdGlvbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICFuICYmIChuID0gby5yYW5kb20oOCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBnLmNyZWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5U2l6ZTogdCArIHIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNvbXB1dGUoZSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGMgPSBvLmNyZWF0ZShubShhID0gcy53b3JkcykuY2FsbChhLCB0KSwgNCAqIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuc2lnQnl0ZXMgPSA0ICogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LmNyZWF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXY6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNhbHQ6IG4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAsIHggPSBuLlBhc3N3b3JkQmFzZWRDaXBoZXIgPSB3LmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNmZzogdy5jZmcuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtkZjogXwogICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgZW5jcnlwdDogZnVuY3Rpb24oZSwgdCwgciwgbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAobiA9IHRoaXMuY2ZnLmV4dGVuZChuKSkua2RmLmV4ZWN1dGUociwgZS5rZXlTaXplLCBlLml2U2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLml2ID0gYS5pdjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gdy5lbmNyeXB0LmNhbGwodGhpcywgZSwgdCwgYS5rZXksIG4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ubWl4SW4oYSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkZWNyeXB0OiBmdW5jdGlvbihlLCB0LCByLCBuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gdGhpcy5jZmcuZXh0ZW5kKG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLl9wYXJzZSh0LCBuLmZvcm1hdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG4ua2RmLmV4ZWN1dGUociwgZS5rZXlTaXplLCBlLml2U2l6ZSwgdC5zYWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLml2ID0gYS5pdiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmRlY3J5cHQuY2FsbCh0aGlzLCBlLCB0LCBhLmtleSwgbikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KCkKICAgICAgICAgICAgfQogICAgICAgICAgICAsCiAgICAgICAgICAgICJvYmplY3QiID09PSB1KDE5MSkgPyB0LmV4cG9ydHMgPSBvKEZTLmV4cG9ydHMpIDogbyhhLkNyeXB0b0pTKQogICAgfShRUyksCiAgICAgICAgZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICB2YXIgcjsKICAgICAgICAgICAgZS5leHBvcnRzID0gKHIgPSBGUy5leHBvcnRzLAogICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSByCiAgICAgICAgICAgICAgICAgICAgICAgICwgdCA9IGUubGliLkJsb2NrQ2lwaGVyCiAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IGUuYWxnbwogICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIG8gPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIHMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGMgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGkgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIHUgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGwgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGggPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGYgPSBbXQogICAgICAgICAgICAgICAgICAgICAgICAsIGcgPSBbXTsKICAgICAgICAgICAgICAgICAgICAhZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSBbXSwgdCA9IDA7IHQgPCAyNTY7IHQrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbdF0gPSB0IDwgMTI4ID8gdCA8PCAxIDogdCA8PCAxIF4gMjgzOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodCA9IDA7IHQgPCAyNTY7IHQrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSBuIF4gbiA8PCAxIF4gbiA8PCAyIF4gbiA8PCAzIF4gbiA8PCA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHAgPj4+IDggXiAyNTUgJiBwIF4gOTksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVtyXSA9IHAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1twXSA9IHI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGVbcl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGIgPSBlW3ZdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBkID0gZVtiXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgayA9IDI1NyAqIGVbcF0gXiAxNjg0MzAwOCAqIHA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzW3JdID0gayA8PCAyNCB8IGsgPj4+IDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1tyXSA9IGsgPDwgMTYgfCBrID4+PiAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW3JdID0gayA8PCA4IHwgayA+Pj4gMjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdVtyXSA9IGssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IDE2ODQzMDA5ICogZCBeIDY1NTM3ICogYiBeIDI1NyAqIHYgXiAxNjg0MzAwOCAqIHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtwXSA9IGsgPDwgMjQgfCBrID4+PiA4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhbcF0gPSBrIDw8IDE2IHwgayA+Pj4gMTYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZltwXSA9IGsgPDwgOCB8IGsgPj4+IDI0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbcF0gPSBrLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPyAociA9IHYgXiBlW2VbZVtkIF4gdl1dXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiBePSBlW2Vbbl1dKSA6IHIgPSBuID0gMQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBwID0gWzAsIDEsIDIsIDQsIDgsIDE2LCAzMiwgNjQsIDEyOCwgMjcsIDU0XQogICAgICAgICAgICAgICAgICAgICAgICAsIHYgPSBuLkFFUyA9IHQuZXh0ZW5kKHsKICAgICAgICAgICAgICAgICAgICAgICAgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9uUm91bmRzIHx8IHRoaXMuX2tleVByaW9yUmVzZXQgIT09IHRoaXMuX2tleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0aGlzLl9rZXlQcmlvclJlc2V0ID0gdGhpcy5fa2V5LCB0ID0gZS53b3JkcywgciA9IGUuc2lnQnl0ZXMgLyA0LCBuID0gNCAqICgodGhpcy5fblJvdW5kcyA9IHIgKyA2KSArIDEpLCBvID0gdGhpcy5fa2V5U2NoZWR1bGUgPSBbXSwgcyA9IDA7IHMgPCBuOyBzKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPCByID8gb1tzXSA9IHRbc10gOiAodSA9IG9bcyAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyAlIHIgPyByID4gNiAmJiBzICUgciA9PSA0ICYmICh1ID0gYVt1ID4+PiAyNF0gPDwgMjQgfCBhW3UgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IGFbdSA+Pj4gOCAmIDI1NV0gPDwgOCB8IGFbMjU1ICYgdV0pIDogKHUgPSBhWyh1ID0gdSA8PCA4IHwgdSA+Pj4gMjQpID4+PiAyNF0gPDwgMjQgfCBhW3UgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IGFbdSA+Pj4gOCAmIDI1NV0gPDwgOCB8IGFbMjU1ICYgdV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSBePSBwW3MgLyByIHwgMF0gPDwgMjQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb1tzXSA9IG9bcyAtIHJdIF4gdSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYyA9IHRoaXMuX2ludktleVNjaGVkdWxlID0gW10sIGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzID0gbiAtIGksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJSA0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBvW3NdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gb1tzIC0gNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNbaV0gPSBpIDwgNCB8fCBzIDw9IDQgPyB1IDogbFthW3UgPj4+IDI0XV0gXiBoW2FbdSA+Pj4gMTYgJiAyNTVdXSBeIGZbYVt1ID4+PiA4ICYgMjU1XV0gXiBnW2FbMjU1ICYgdV1dCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0QmxvY2s6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvQ3J5cHRCbG9jayhlLCB0LCB0aGlzLl9rZXlTY2hlZHVsZSwgcywgYywgaSwgdSwgYSkKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVjcnlwdEJsb2NrOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGVbdCArIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0ICsgMV0gPSBlW3QgKyAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlW3QgKyAzXSA9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9DcnlwdEJsb2NrKGUsIHQsIHRoaXMuX2ludktleVNjaGVkdWxlLCBsLCBoLCBmLCBnLCBvKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gZVt0ICsgMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0ICsgMV0gPSBlW3QgKyAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlW3QgKyAzXSA9IHIKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgX2RvQ3J5cHRCbG9jazogZnVuY3Rpb24oZSwgdCwgciwgbiwgYSwgbywgcywgYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX25Sb3VuZHMsIHUgPSBlW3RdIF4gclswXSwgbCA9IGVbdCArIDFdIF4gclsxXSwgaCA9IGVbdCArIDJdIF4gclsyXSwgZiA9IGVbdCArIDNdIF4gclszXSwgZyA9IDQsIHAgPSAxOyBwIDwgaTsgcCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBuW3UgPj4+IDI0XSBeIGFbbCA+Pj4gMTYgJiAyNTVdIF4gb1toID4+PiA4ICYgMjU1XSBeIHNbMjU1ICYgZl0gXiByW2crK10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBiID0gbltsID4+PiAyNF0gXiBhW2ggPj4+IDE2ICYgMjU1XSBeIG9bZiA+Pj4gOCAmIDI1NV0gXiBzWzI1NSAmIHVdIF4gcltnKytdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZCA9IG5baCA+Pj4gMjRdIF4gYVtmID4+PiAxNiAmIDI1NV0gXiBvW3UgPj4+IDggJiAyNTVdIF4gc1syNTUgJiBsXSBeIHJbZysrXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGsgPSBuW2YgPj4+IDI0XSBeIGFbdSA+Pj4gMTYgJiAyNTVdIF4gb1tsID4+PiA4ICYgMjU1XSBeIHNbMjU1ICYgaF0gXiByW2crK107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAoY1t1ID4+PiAyNF0gPDwgMjQgfCBjW2wgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IGNbaCA+Pj4gOCAmIDI1NV0gPDwgOCB8IGNbMjU1ICYgZl0pIF4gcltnKytdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSAoY1tsID4+PiAyNF0gPDwgMjQgfCBjW2ggPj4+IDE2ICYgMjU1XSA8PCAxNiB8IGNbZiA+Pj4gOCAmIDI1NV0gPDwgOCB8IGNbMjU1ICYgdV0pIF4gcltnKytdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSAoY1toID4+PiAyNF0gPDwgMjQgfCBjW2YgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IGNbdSA+Pj4gOCAmIDI1NV0gPDwgOCB8IGNbMjU1ICYgbF0pIF4gcltnKytdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSAoY1tmID4+PiAyNF0gPDwgMjQgfCBjW3UgPj4+IDE2ICYgMjU1XSA8PCAxNiB8IGNbbCA+Pj4gOCAmIDI1NV0gPDwgOCB8IGNbMjU1ICYgaF0pIF4gcltnKytdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbdF0gPSB2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVbdCArIDFdID0gYiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlW3QgKyAyXSA9IGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZVt0ICsgM10gPSBrCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGtleVNpemU6IDgKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICBlLkFFUyA9IHQuX2NyZWF0ZUhlbHBlcih2KQogICAgICAgICAgICAgICAgfSgpLAogICAgICAgICAgICAgICAgci5BRVMpCiAgICAgICAgfShXUyk7CiAgICB2YXIgJFMgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICAhZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByOwogICAgICAgIGUuZXhwb3J0cyA9IChyID0gRlMuZXhwb3J0cywKICAgICAgICAgICAgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSByCiAgICAgICAgICAgICAgICAgICAgLCBuID0gdC5saWIKICAgICAgICAgICAgICAgICAgICAsIGEgPSBuLldvcmRBcnJheQogICAgICAgICAgICAgICAgICAgICwgbyA9IG4uSGFzaGVyCiAgICAgICAgICAgICAgICAgICAgLCBzID0gdC5hbGdvCiAgICAgICAgICAgICAgICAgICAgLCBjID0gW10KICAgICAgICAgICAgICAgICAgICAsIGkgPSBbXTsKICAgICAgICAgICAgICAgICFmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB0KHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IGUuc3FydCh0KSwgbiA9IDI7IG4gPD0gcjsgbisrKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodCAlIG4pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDI5NDk2NzI5NiAqIChlIC0gKDAgfCBlKSkgfCAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAyLCBhID0gMDsgYSA8IDY0OyApCiAgICAgICAgICAgICAgICAgICAgICAgIHQobikgJiYgKGEgPCA4ICYmIChjW2FdID0gcihlLnBvdyhuLCAuNSkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbYV0gPSByKGUucG93KG4sIDEgLyAzKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKyspLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbisrCiAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICB2YXIgdSA9IFtdCiAgICAgICAgICAgICAgICAgICAgLCBsID0gcy5TSEEyNTYgPSBvLmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgX2RvUmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNoID0gbmV3IGEuaW5pdChubShjKS5jYWxsKGMsIDApKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgX2RvUHJvY2Vzc0Jsb2NrOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSB0aGlzLl9oYXNoLndvcmRzLCBuID0gclswXSwgYSA9IHJbMV0sIG8gPSByWzJdLCBzID0gclszXSwgYyA9IHJbNF0sIGwgPSByWzVdLCBoID0gcls2XSwgZiA9IHJbN10sIGcgPSAwOyBnIDwgNjQ7IGcrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGcgPCAxNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1W2ddID0gMCB8IGVbdCArIGddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB1W2cgLSAxNV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB2ID0gKHAgPDwgMjUgfCBwID4+PiA3KSBeIChwIDw8IDE0IHwgcCA+Pj4gMTgpIF4gcCA+Pj4gMwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGIgPSB1W2cgLSAyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGQgPSAoYiA8PCAxNSB8IGIgPj4+IDE3KSBeIChiIDw8IDEzIHwgYiA+Pj4gMTkpIF4gYiA+Pj4gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdVtnXSA9IHYgKyB1W2cgLSA3XSArIGQgKyB1W2cgLSAxNl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrID0gbiAmIGEgXiBuICYgbyBeIGEgJiBvCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB5ID0gKG4gPDwgMzAgfCBuID4+PiAyKSBeIChuIDw8IDE5IHwgbiA+Pj4gMTMpIF4gKG4gPDwgMTAgfCBuID4+PiAyMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG0gPSBmICsgKChjIDw8IDI2IHwgYyA+Pj4gNikgXiAoYyA8PCAyMSB8IGMgPj4+IDExKSBeIChjIDw8IDcgfCBjID4+PiAyNSkpICsgKGMgJiBsIF4gfmMgJiBoKSArIGlbZ10gKyB1W2ddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHMgKyBtIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbSArICh5ICsgaykgfCAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgclswXSA9IHJbMF0gKyBuIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMV0gPSByWzFdICsgYSB8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzJdID0gclsyXSArIG8gfCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgclszXSA9IHJbM10gKyBzIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbNF0gPSByWzRdICsgYyB8IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByWzVdID0gcls1XSArIGwgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcls2XSA9IHJbNl0gKyBoIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbN10gPSByWzddICsgZiB8IDAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSB0LndvcmRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG4gPSA4ICogdGhpcy5fbkRhdGFCeXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gOCAqIHQuc2lnQnl0ZXM7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByW2EgPj4+IDVdIHw9IDEyOCA8PCAyNCAtIGEgJSAzMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbMTQgKyAoYSArIDY0ID4+PiA5IDw8IDQpXSA9IGUuZmxvb3IobiAvIDQyOTQ5NjcyOTYpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgclsxNSArIChhICsgNjQgPj4+IDkgPDwgNCldID0gbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2lnQnl0ZXMgPSA0ICogci5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNoCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gby5jbG9uZS5jYWxsKHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5faGFzaCA9IHRoaXMuX2hhc2guY2xvbmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHQuU0hBMjU2ID0gby5fY3JlYXRlSGVscGVyKGwpLAogICAgICAgICAgICAgICAgICAgIHQuSG1hY1NIQTI1NiA9IG8uX2NyZWF0ZUhtYWNIZWxwZXIobCkKICAgICAgICAgICAgfShNYXRoKSwKICAgICAgICAgICAgci5TSEEyNTYpCiAgICB9KCRTKTsKICAgIHZhciBlRSA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgZS5leHBvcnRzID0gRlMuZXhwb3J0cy5IbWFjU0hBMjU2CiAgICB9KGVFKTsKICAgIHZhciB0RSA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfQogICAgICAgICwgckUgPSB7CiAgICAgICAgZXhwb3J0czoge30KICAgIH07CiAgICAhZnVuY3Rpb24oZSwgdCkgewogICAgICAgIHZhciByLCBuLCBhLCBvLCBzLCBjLCBpOwogICAgICAgIGUuZXhwb3J0cyA9IChhID0gKG4gPSBpID0gRlMuZXhwb3J0cykubGliLAogICAgICAgICAgICBvID0gYS5CYXNlLAogICAgICAgICAgICBzID0gYS5Xb3JkQXJyYXksCiAgICAgICAgICAgIChjID0gbi54NjQgPSB7fSkuV29yZCA9IG8uZXh0ZW5kKHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2ggPSBlLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvdyA9IHQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGMuV29yZEFycmF5ID0gby5leHRlbmQoewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIGUgPSB0aGlzLndvcmRzID0gZSB8fCBbXSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWdCeXRlcyA9IHQgIT0gciA/IHQgOiA4ICogZS5sZW5ndGgKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB0b1gzMjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IHRoaXMud29yZHMsIHQgPSBlLmxlbmd0aCwgciA9IFtdLCBuID0gMDsgbiA8IHQ7IG4rKykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGVbbl07CiAgICAgICAgICAgICAgICAgICAgICAgIHIucHVzaChhLmhpZ2gpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5wdXNoKGEubG93KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5jcmVhdGUociwgdGhpcy5zaWdCeXRlcykKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgdCA9IG8uY2xvbmUuY2FsbCh0aGlzKSwgciA9IHQud29yZHMgPSBubShlID0gdGhpcy53b3JkcykuY2FsbChlLCAwKSwgbiA9IHIubGVuZ3RoLCBhID0gMDsgYSA8IG47IGErKykKICAgICAgICAgICAgICAgICAgICAgICAgclthXSA9IHJbYV0uY2xvbmUoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KSwKICAgICAgICAgICAgaSkKICAgIH0ockUpLAogICAgICAgIGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgdmFyIHI7CiAgICAgICAgICAgIGUuZXhwb3J0cyA9IChyID0gRlMuZXhwb3J0cywKICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gcgogICAgICAgICAgICAgICAgICAgICAgICAsIHQgPSBlLmxpYi5IYXNoZXIKICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gZS54NjQKICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gbi5Xb3JkCiAgICAgICAgICAgICAgICAgICAgICAgICwgbyA9IG4uV29yZEFycmF5CiAgICAgICAgICAgICAgICAgICAgICAgICwgcyA9IGUuYWxnbzsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBjKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5jcmVhdGUuYXBwbHkoYSwgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IFtjKDExMTYzNTI0MDgsIDM2MDk3Njc0NTgpLCBjKDE4OTk0NDc0NDEsIDYwMjg5MTcyNSksIGMoMzA0OTMyMzQ3MSwgMzk2NDQ4NDM5OSksIGMoMzkyMTAwOTU3MywgMjE3MzI5NTU0OCksIGMoOTYxOTg3MTYzLCA0MDgxNjI4NDcyKSwgYygxNTA4OTcwOTkzLCAzMDUzODM0MjY1KSwgYygyNDUzNjM1NzQ4LCAyOTM3NjcxNTc5KSwgYygyODcwNzYzMjIxLCAzNjY0NjA5NTYwKSwgYygzNjI0MzgxMDgwLCAyNzM0ODgzMzk0KSwgYygzMTA1OTg0MDEsIDExNjQ5OTY1NDIpLCBjKDYwNzIyNTI3OCwgMTMyMzYxMDc2NCksIGMoMTQyNjg4MTk4NywgMzU5MDMwNDk5NCksIGMoMTkyNTA3ODM4OCwgNDA2ODE4MjM4MyksIGMoMjE2MjA3ODIwNiwgOTkxMzM2MTEzKSwgYygyNjE0ODg4MTAzLCA2MzM4MDMzMTcpLCBjKDMyNDgyMjI1ODAsIDM0Nzk3NzQ4NjgpLCBjKDM4MzUzOTA0MDEsIDI2NjY2MTM0NTgpLCBjKDQwMjIyMjQ3NzQsIDk0NDcxMTEzOSksIGMoMjY0MzQ3MDc4LCAyMzQxMjYyNzczKSwgYyg2MDQ4MDc2MjgsIDIwMDc4MDA5MzMpLCBjKDc3MDI1NTk4MywgMTQ5NTk5MDkwMSksIGMoMTI0OTE1MDEyMiwgMTg1NjQzMTIzNSksIGMoMTU1NTA4MTY5MiwgMzE3NTIxODEzMiksIGMoMTk5NjA2NDk4NiwgMjE5ODk1MDgzNyksIGMoMjU1NDIyMDg4MiwgMzk5OTcxOTMzOSksIGMoMjgyMTgzNDM0OSwgNzY2Nzg0MDE2KSwgYygyOTUyOTk2ODA4LCAyNTY2NTk0ODc5KSwgYygzMjEwMzEzNjcxLCAzMjAzMzM3OTU2KSwgYygzMzM2NTcxODkxLCAxMDM0NDU3MDI2KSwgYygzNTg0NTI4NzExLCAyNDY2OTQ4OTAxKSwgYygxMTM5MjY5OTMsIDM3NTgzMjYzODMpLCBjKDMzODI0MTg5NSwgMTY4NzE3OTM2KSwgYyg2NjYzMDcyMDUsIDExODgxNzk5NjQpLCBjKDc3MzUyOTkxMiwgMTU0NjA0NTczNCksIGMoMTI5NDc1NzM3MiwgMTUyMjgwNTQ4NSksIGMoMTM5NjE4MjI5MSwgMjY0MzgzMzgyMyksIGMoMTY5NTE4MzcwMCwgMjM0MzUyNzM5MCksIGMoMTk4NjY2MTA1MSwgMTAxNDQ3NzQ4MCksIGMoMjE3NzAyNjM1MCwgMTIwNjc1OTE0MiksIGMoMjQ1Njk1NjAzNywgMzQ0MDc3NjI3KSwgYygyNzMwNDg1OTIxLCAxMjkwODYzNDYwKSwgYygyODIwMzAyNDExLCAzMTU4NDU0MjczKSwgYygzMjU5NzMwODAwLCAzNTA1OTUyNjU3KSwgYygzMzQ1NzY0NzcxLCAxMDYyMTcwMDgpLCBjKDM1MTYwNjU4MTcsIDM2MDYwMDgzNDQpLCBjKDM2MDAzNTI4MDQsIDE0MzI3MjU3NzYpLCBjKDQwOTQ1NzE5MDksIDE0NjcwMzE1OTQpLCBjKDI3NTQyMzM0NCwgODUxMTY5NzIwKSwgYyg0MzAyMjc3MzQsIDMxMDA4MjM3NTIpLCBjKDUwNjk0ODYxNiwgMTM2MzI1ODE5NSksIGMoNjU5MDYwNTU2LCAzNzUwNjg1NTkzKSwgYyg4ODM5OTc4NzcsIDM3ODUwNTAyODApLCBjKDk1ODEzOTU3MSwgMzMxODMwNzQyNyksIGMoMTMyMjgyMjIxOCwgMzgxMjcyMzQwMyksIGMoMTUzNzAwMjA2MywgMjAwMzAzNDk5NSksIGMoMTc0Nzg3Mzc3OSwgMzYwMjAzNjg5OSksIGMoMTk1NTU2MjIyMiwgMTU3NTk5MDAxMiksIGMoMjAyNDEwNDgxNSwgMTEyNTU5MjkyOCksIGMoMjIyNzczMDQ1MiwgMjcxNjkwNDMwNiksIGMoMjM2MTg1MjQyNCwgNDQyNzc2MDQ0KSwgYygyNDI4NDM2NDc0LCA1OTM2OTgzNDQpLCBjKDI3NTY3MzQxODcsIDM3MzMxMTAyNDkpLCBjKDMyMDQwMzE0NzksIDI5OTkzNTE1NzMpLCBjKDMzMjkzMjUyOTgsIDM4MTU5MjA0MjcpLCBjKDMzOTE1Njk2MTQsIDM5MjgzODM5MDApLCBjKDM1MTUyNjcyNzEsIDU2NjI4MDcxMSksIGMoMzk0MDE4NzYwNiwgMzQ1NDA2OTUzNCksIGMoNDExODYzMDI3MSwgNDAwMDIzOTk5MiksIGMoMTE2NDE4NDc0LCAxOTE0MTM4NTU0KSwgYygxNzQyOTI0MjEsIDI3MzEwNTUyNzApLCBjKDI4OTM4MDM1NiwgMzIwMzk5MzAwNiksIGMoNDYwMzkzMjY5LCAzMjA2MjAzMTUpLCBjKDY4NTQ3MTczMywgNTg3NDk2ODM2KSwgYyg4NTIxNDI5NzEsIDEwODY3OTI4NTEpLCBjKDEwMTcwMzYyOTgsIDM2NTU0MzEwMCksIGMoMTEyNjAwMDU4MCwgMjYxODI5NzY3NiksIGMoMTI4ODAzMzQ3MCwgMzQwOTg1NTE1OCksIGMoMTUwMTUwNTk0OCwgNDIzNDUwOTg2NiksIGMoMTYwNzE2NzkxNSwgOTg3MTY3NDY4KSwgYygxODE2NDAyMzE2LCAxMjQ2MTg5NTkxKV0KICAgICAgICAgICAgICAgICAgICAgICAgLCB1ID0gW107CiAgICAgICAgICAgICAgICAgICAgIWZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IDgwOyBlKyspCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1W2VdID0gYygpCiAgICAgICAgICAgICAgICAgICAgfSgpOwogICAgICAgICAgICAgICAgICAgIHZhciBsID0gcy5TSEE1MTIgPSB0LmV4dGVuZCh7CiAgICAgICAgICAgICAgICAgICAgICAgIF9kb1Jlc2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc2ggPSBuZXcgby5pbml0KFtuZXcgYS5pbml0KDE3NzkwMzM3MDMsNDA4OTIzNTcyMCksIG5ldyBhLmluaXQoMzE0NDEzNDI3NywyMjI3ODczNTk1KSwgbmV3IGEuaW5pdCgxMDEzOTA0MjQyLDQyNzExNzU3MjMpLCBuZXcgYS5pbml0KDI3NzM0ODA3NjIsMTU5NTc1MDEyOSksIG5ldyBhLmluaXQoMTM1OTg5MzExOSwyOTE3NTY1MTM3KSwgbmV3IGEuaW5pdCgyNjAwODIyOTI0LDcyNTUxMTE5OSksIG5ldyBhLmluaXQoNTI4NzM0NjM1LDQyMTUzODk1NDcpLCBuZXcgYS5pbml0KDE1NDE0NTkyMjUsMzI3MDMzMjA5KV0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgciA9IHRoaXMuX2hhc2gud29yZHMsIG4gPSByWzBdLCBhID0gclsxXSwgbyA9IHJbMl0sIHMgPSByWzNdLCBjID0gcls0XSwgbCA9IHJbNV0sIGggPSByWzZdLCBmID0gcls3XSwgZyA9IG4uaGlnaCwgcCA9IG4ubG93LCB2ID0gYS5oaWdoLCBiID0gYS5sb3csIGQgPSBvLmhpZ2gsIGsgPSBvLmxvdywgeSA9IHMuaGlnaCwgbSA9IHMubG93LCB3ID0gYy5oaWdoLCBfID0gYy5sb3csIHggPSBsLmhpZ2gsIFMgPSBsLmxvdywgRSA9IGguaGlnaCwgQSA9IGgubG93LCBDID0gZi5oaWdoLCBPID0gZi5sb3csIFQgPSBnLCBEID0gcCwgQiA9IHYsIGogPSBiLCBNID0gZCwgUiA9IGssIE4gPSB5LCBQID0gbSwgSSA9IHcsIEwgPSBfLCB6ID0geCwgRyA9IFMsIEggPSBFLCBGID0gQSwgVSA9IEMsIFkgPSBPLCBKID0gMDsgSiA8IDgwOyBKKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgVywgWCwgSyA9IHVbSl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEogPCAxNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWCA9IEsuaGlnaCA9IDAgfCBlW3QgKyAyICogSl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXID0gSy5sb3cgPSAwIHwgZVt0ICsgMiAqIEogKyAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHEgPSB1W0ogLSAxNV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgWiA9IHEuaGlnaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBWID0gcS5sb3cKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgUSA9IChaID4+PiAxIHwgViA8PCAzMSkgXiAoWiA+Pj4gOCB8IFYgPDwgMjQpIF4gWiA+Pj4gNwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCAkID0gKFYgPj4+IDEgfCBaIDw8IDMxKSBeIChWID4+PiA4IHwgWiA8PCAyNCkgXiAoViA+Pj4gNyB8IFogPDwgMjUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGVlID0gdVtKIC0gMl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgdGUgPSBlZS5oaWdoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHJlID0gZWUubG93CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG5lID0gKHRlID4+PiAxOSB8IHJlIDw8IDEzKSBeICh0ZSA8PCAzIHwgcmUgPj4+IDI5KSBeIHRlID4+PiA2CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGFlID0gKHJlID4+PiAxOSB8IHRlIDw8IDEzKSBeIChyZSA8PCAzIHwgdGUgPj4+IDI5KSBeIChyZSA+Pj4gNiB8IHRlIDw8IDI2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBvZSA9IHVbSiAtIDddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHNlID0gb2UuaGlnaAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjZSA9IG9lLmxvdwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBpZSA9IHVbSiAtIDE2XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCB1ZSA9IGllLmhpZ2gKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbGUgPSBpZS5sb3c7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFggPSAoWCA9IChYID0gUSArIHNlICsgKChXID0gJCArIGNlKSA+Pj4gMCA8ICQgPj4+IDAgPyAxIDogMCkpICsgbmUgKyAoKFcgKz0gYWUpID4+PiAwIDwgYWUgPj4+IDAgPyAxIDogMCkpICsgdWUgKyAoKFcgKz0gbGUpID4+PiAwIDwgbGUgPj4+IDAgPyAxIDogMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLLmhpZ2ggPSBYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSy5sb3cgPSBXCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZSwgZmUgPSBJICYgeiBeIH5JICYgSCwgZ2UgPSBMICYgRyBeIH5MICYgRiwgcGUgPSBUICYgQiBeIFQgJiBNIF4gQiAmIE0sIHZlID0gRCAmIGogXiBEICYgUiBeIGogJiBSLCBiZSA9IChUID4+PiAyOCB8IEQgPDwgNCkgXiAoVCA8PCAzMCB8IEQgPj4+IDIpIF4gKFQgPDwgMjUgfCBEID4+PiA3KSwgZGUgPSAoRCA+Pj4gMjggfCBUIDw8IDQpIF4gKEQgPDwgMzAgfCBUID4+PiAyKSBeIChEIDw8IDI1IHwgVCA+Pj4gNyksIGtlID0gKEkgPj4+IDE0IHwgTCA8PCAxOCkgXiAoSSA+Pj4gMTggfCBMIDw8IDE0KSBeIChJIDw8IDIzIHwgTCA+Pj4gOSksIHllID0gKEwgPj4+IDE0IHwgSSA8PCAxOCkgXiAoTCA+Pj4gMTggfCBJIDw8IDE0KSBeIChMIDw8IDIzIHwgSSA+Pj4gOSksIG1lID0gaVtKXSwgd2UgPSBtZS5oaWdoLCBfZSA9IG1lLmxvdywgeGUgPSBVICsga2UgKyAoKGhlID0gWSArIHllKSA+Pj4gMCA8IFkgPj4+IDAgPyAxIDogMCksIFNlID0gZGUgKyB2ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVID0gSCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWSA9IEYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEggPSB6LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGID0gRywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeiA9IEksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEcgPSBMLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJID0gTiArICh4ZSA9ICh4ZSA9ICh4ZSA9IHhlICsgZmUgKyAoKGhlICs9IGdlKSA+Pj4gMCA8IGdlID4+PiAwID8gMSA6IDApKSArIHdlICsgKChoZSArPSBfZSkgPj4+IDAgPCBfZSA+Pj4gMCA/IDEgOiAwKSkgKyBYICsgKChoZSArPSBXKSA+Pj4gMCA8IFcgPj4+IDAgPyAxIDogMCkpICsgKChMID0gUCArIGhlIHwgMCkgPj4+IDAgPCBQID4+PiAwID8gMSA6IDApIHwgMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTiA9IE0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAgPSBSLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNID0gQiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUiA9IGosCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEIgPSBULAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqID0gRCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCA9IHhlICsgKGJlICsgcGUgKyAoU2UgPj4+IDAgPCBkZSA+Pj4gMCA/IDEgOiAwKSkgKyAoKEQgPSBoZSArIFNlIHwgMCkgPj4+IDAgPCBoZSA+Pj4gMCA/IDEgOiAwKSB8IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBuLmxvdyA9IHAgKyBELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaGlnaCA9IGcgKyBUICsgKHAgPj4+IDAgPCBEID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBhLmxvdyA9IGIgKyBqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEuaGlnaCA9IHYgKyBCICsgKGIgPj4+IDAgPCBqID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBvLmxvdyA9IGsgKyBSLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uaGlnaCA9IGQgKyBNICsgKGsgPj4+IDAgPCBSID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBzLmxvdyA9IG0gKyBQLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuaGlnaCA9IHkgKyBOICsgKG0gPj4+IDAgPCBQID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8gPSBjLmxvdyA9IF8gKyBMLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMuaGlnaCA9IHcgKyBJICsgKF8gPj4+IDAgPCBMID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPSBsLmxvdyA9IFMgKyBHLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwuaGlnaCA9IHggKyB6ICsgKFMgPj4+IDAgPCBHID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgPSBoLmxvdyA9IEEgKyBGLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGguaGlnaCA9IEUgKyBIICsgKEEgPj4+IDAgPCBGID4+PiAwID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8gPSBmLmxvdyA9IE8gKyBZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYuaGlnaCA9IEMgKyBVICsgKE8gPj4+IDAgPCBZID4+PiAwID8gMSA6IDApCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIF9kb0ZpbmFsaXplOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgdCA9IGUud29yZHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSA4ICogdGhpcy5fbkRhdGFCeXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IDggKiBlLnNpZ0J5dGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRbbiA+Pj4gNV0gfD0gMTI4IDw8IDI0IC0gbiAlIDMyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRbMzAgKyAobiArIDEyOCA+Pj4gMTAgPDwgNSldID0gTWF0aC5mbG9vcihyIC8gNDI5NDk2NzI5NiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdFszMSArIChuICsgMTI4ID4+PiAxMCA8PCA1KV0gPSByLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2lnQnl0ZXMgPSA0ICogdC5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvY2VzcygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhc2gudG9YMzIoKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHQuY2xvbmUuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLl9oYXNoID0gdGhpcy5faGFzaC5jbG9uZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tTaXplOiAzMgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGUuU0hBNTEyID0gdC5fY3JlYXRlSGVscGVyKGwpLAogICAgICAgICAgICAgICAgICAgICAgICBlLkhtYWNTSEE1MTIgPSB0Ll9jcmVhdGVIbWFjSGVscGVyKGwpCiAgICAgICAgICAgICAgICB9KCksCiAgICAgICAgICAgICAgICByLlNIQTUxMikKICAgICAgICB9KHRFKTsKICAgIHZhciBuRSA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgZS5leHBvcnRzID0gRlMuZXhwb3J0cy5IbWFjU0hBNTEyCiAgICB9KG5FKTsKICAgIHZhciBhRSA9IHsKICAgICAgICBleHBvcnRzOiB7fQogICAgfTsKICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgZS5leHBvcnRzID0gRlMuZXhwb3J0cy5IbWFjTUQ1CiAgICB9KGFFKTsKICAgIHZhciBvRSA9IHt9OwogICAgVHIoewogICAgICAgIHRhcmdldDogIkFycmF5IiwKICAgICAgICBzdGF0OiAhMAogICAgfSwgewogICAgICAgIGlzQXJyYXk6IEJyCiAgICB9KTsKICAgIHZhciBzRSA9IGVlLkFycmF5LmlzQXJyYXk7CiAgICAhZnVuY3Rpb24oZSkgewogICAgICAgIGZ1bmN0aW9uIHQoZSkgewogICAgICAgICAgICBmb3IgKHZhciB0ID0gIiIsIHIgPSAwOyByIDwgZS5sZW5ndGg7ICkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNoYXJDb2RlQXQocisrKTsKICAgICAgICAgICAgICAgIHQgKz0gbiA+IDYzID8gU3RyaW5nLmZyb21DaGFyQ29kZSg1NSBeIG4pIDogMzUgPT0gbiA/IGUuY2hhckF0KHIrKykgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKG4pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICB9CiAgICAgICAgdmFyIHIgPSBbdCgiRF5NUiIpLCAibnVtIiwgdCgiREdbXkMiKSwgIiIsIHQoIlNSUVZCW0MiKSwgdCgiVFZbWyIpLCB0KCJHQkRfIiksICJwb3AiLCB0KCJDWGRDRV5ZUCIpLCB0KCJdWF5ZIiksIHQoIlNSUVZCW0MiKSwgdCgiVFZbWyIpLCB0KCJFUkdbVlRSIiksICIiXQogICAgICAgICAgICAsIG4gPSBGdW5jdGlvbi5wcm90b3R5cGUuY2FsbAogICAgICAgICAgICAsIGEgPSBbNDcsIDYsIDk0LCA4MywgOCwgNTUsIDMwNiwgNzgsIDY1LCA5NCwgMTYsIDgsIDY3LCA1NSwgLTgyNDIsIDU1LCA3OTMzLCA0OCwgNTUsIDMxNCwgNDgsIDY0LCAxNSwgOTQsIDkwLCA4LCAyNywgMTEsIDk0LCAzMywgOCwgNjcsIDUwLCA2NCwgMTcsIDk0LCAzLCA4LCA4MSwgOTMsIDY5LCAwLCAyMywgNjksIDEsIDc4LCA1MCwgNDgsIDMsIDgsIDgxLCA1NSwgNzYsIDU1LCA5ODIxLCA0OCwgNTUsIC05ODgxLCA0OCwgNTUsIDI1MDcsIDU1LCAtMzg4NSwgNDgsIDU1LCAxMzgzLCA0OCwgNjMsIDkzLCA2MywgNTUsIDYzNTcsIDU1LCAtODYxMCwgNDgsIDU1LCAyMjU0LCA0OCwgNjMsIDY5LCAwLCAyMywgNjksIDEsIDc4LCA0OCwgOTMsIDQ4LCA3MywgOTQsIDYxLCA0MSwgMiwgNywgMywgNzgsIDUyLCA5NCwgNTksIDk0LCA4NCwgNDYsIDQsIDUxLCA5OSwgNzgsIDQxLCA1LCA5OSwgNTUsIC0zMTg5LCA1NSwgOTUxNSwgNDgsIDU1LCAtNjMyNiwgNDgsIDU1LCAtMTI1NSwgNTUsIDkzMzYsIDQ4LCA1NSwgLTgwNjYsIDQ4LCA4NiwgNTQsIDk0LCA1OSwgOTQsIDg0LCA0NiwgNCwgNTEsIDk5LCA3OCwgNDEsIDUsIDk5LCA1NSwgLTYzNTksIDU1LCAyMjc2LCA0OCwgNTUsIDQwOTgsIDQ4LCA2NCwgNDMsIDk0LCA4MiwgMCwgMTQsIDk0LCA5NiwgNDUsIDM4LCA0MSwgNiwgNTUsIC02NTAzLCA1NSwgMjIwNywgNDgsIDU1LCA0MzMxLCA0OCwgNTksIDk0LCA5MSwgNDYsIDQsIDUxLCAxOSwgNDEsIDcsIDI3LCA1NSwgNTIxMSwgNTUsIC04NDg4LCA0OCwgNTUsIDMzMTMsIDQ4LCA2NCwgNjMsIDQxLCA4LCA1NSwgLTgwMzAsIDU1LCAtMzY0NSwgNDgsIDU1LCAxMTcxMSwgNDgsIDc4LCA3OCwgOTQsIDE5LCAyMSwgNTUsIDI4MTIsIDU1LCA3MjA0LCA0OCwgNTUsIC0xMDAxNiwgNDgsIDc5LCA3NiwgLTU2LCA1OSwgOTQsIDIwLCA0NiwgNCwgNTEsIDM4LCA3OCwgNDEsIDUsIDM4LCAyNiwgNjQsIDE0LCA5NCwgMzgsIDQxLCA5LCA3LCAzLCA3OCwgNzEsIDk0LCAzNSwgODcsIDY4LCA5MywgNTE4OSwgOTMsIC04MDY5LCA0LCA5MywgMjg4MCwgNCwgOTgsIDUxLCAxNiwgNDQsIDk2LCA1MSwgNDgsIDMxLCAwLCA2NywgMjksIDM2LCA1NSwgMSwgMjksIDY4LCA4MiwgODcsIDY0LCA3OSwgNTEsIDg2LCA5MywgMjUxMiwgOTMsIC01NzEyLCA0LCA5MywgMzIwMSwgNCwgNzUsIDYyLCA0NywgMTEsIDI5LCA1NSwgMiwgNjgsIDgyLCA4NywgNzgsIDMsIDY0LCA4OCwgNTEsIDk3LCA1MSwgODIsIDY4LCAxMSwgMzIsIDQ1LCAtNDgsIDI5LCAxMiwgNDRdCiAgICAgICAgICAgICwgbyA9IG5tCiAgICAgICAgICAgICwgcyA9IHNTCiAgICAgICAgICAgICwgYyA9IGNTCiAgICAgICAgICAgICwgaSA9IGlTCiAgICAgICAgICAgICwgdSA9IHNFCiAgICAgICAgICAgICwgbCA9IFRnLmV4cG9ydHM7CiAgICAgICAga2coZSwgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgICAgIHZhbHVlOiAhMAogICAgICAgIH0pLAogICAgICAgICAgICBlLmdlbmVyYXRlVmlzaXRLZXkgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIGUsIHQsIG8sIHMsIGMsIGksIHUsIGwsIHAsIHYsIGIsIHksIHggPSBuLCBTID0gYSwgRSA9IFtdLCBBID0gMDsgOyApCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChTW0ErK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKHcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBFW0UubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKHJbU1tBKytdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gRVtFLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gRVtFLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gRVtFLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBFW0UubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKGcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFW0UubGVuZ3RoIC0gMV0gPSBFW0UubGVuZ3RoIC0gMV0ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBFW0UubGVuZ3RoIC0gMV0gPyBFW0UubGVuZ3RoIC0gMl0gPSB4LmNhbGwoRVtFLmxlbmd0aCAtIDJdLCBFW0UubGVuZ3RoIC0gMV0pIDogKHkgPSBFW0UubGVuZ3RoIC0gMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDJdID0geSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goXyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKHYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goRVtFLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFW0UubGVuZ3RoIC0gMl0gPSBFW0UubGVuZ3RoIC0gMl1bcltTW0ErK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IEVbRS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDFdID0gRVtFLmxlbmd0aCAtIDFdW3JbU1tBKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChtKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IEUucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDFdICs9IHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBFW0UubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBFW0UubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChTW0ErK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeSA9IEUucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDFdIC09IHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVbRS5sZW5ndGggLSA0XSA9IHguY2FsbChFW0UubGVuZ3RoIC0gNF0sIEVbRS5sZW5ndGggLSAzXSwgRVtFLmxlbmd0aCAtIDJdLCBFW0UubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUubGVuZ3RoIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBFW0UubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDJdW3JbU1tBKytdXV0gPSBFW0UubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYiA9IEVbRS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IEVbRS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wb3AoKSA/IEEgKz0gU1tBXSA6ICsrQTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBFW0UubGVuZ3RoIC0gMl0gPyAoRVtFLmxlbmd0aCAtIDNdID0geC5jYWxsKEVbRS5sZW5ndGggLSAzXSwgRVtFLmxlbmd0aCAtIDJdLCBFW0UubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUubGVuZ3RoIC09IDIpIDogKHkgPSBFW0UubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDNdID0geShFW0UubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5ID0gRS5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFW0UubGVuZ3RoIC0gMV0gPSBFW0UubGVuZ3RoIC0gMV0gPiB5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goe30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2gobmV3IEFycmF5KFNbQSsrXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRVtFLmxlbmd0aCAtIDVdID0geC5jYWxsKEVbRS5sZW5ndGggLSA1XSwgRVtFLmxlbmd0aCAtIDRdLCBFW0UubGVuZ3RoIC0gM10sIEVbRS5sZW5ndGggLSAyXSwgRVtFLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLmxlbmd0aCAtPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRS5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucHVzaChkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBFLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEgKz0gU1tBXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgRS5wdXNoKHUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgOwogICAgICAgIHZhciBoID0gbChXeSkKICAgICAgICAgICAgLCBmID0gbChubSkKICAgICAgICAgICAgLCBnID0gbChEXykKICAgICAgICAgICAgLCBwID0gbChybSk7CiAgICAgICAgZnVuY3Rpb24gdihlLCB0KSB7CiAgICAgICAgICAgIHZhciByID0gdm9pZCAwICE9PSBjICYmIGkoZSkgfHwgZVsiQEBpdGVyYXRvciJdOwogICAgICAgICAgICBpZiAoIXIpIHsKICAgICAgICAgICAgICAgIGlmICh1KGUpIHx8IChyID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHZhciByOwogICAgICAgICAgICAgICAgICAgIGlmICghZSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGIoZSwgdCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBvKHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpLmNhbGwociwgOCwgLTEpOwogICAgICAgICAgICAgICAgICAgICJPYmplY3QiID09PSBuICYmIGUuY29uc3RydWN0b3IgJiYgKG4gPSBlLmNvbnN0cnVjdG9yLm5hbWUpOwogICAgICAgICAgICAgICAgICAgIGlmICgiTWFwIiA9PT0gbiB8fCAiU2V0IiA9PT0gbikKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMoZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJBcmd1bWVudHMiID09PSBuIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYihlLCB0KQogICAgICAgICAgICAgICAgfShlKSkgfHwgdCAmJiBlICYmICJudW1iZXIiID09IHR5cGVvZiBlLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHIgJiYgKGUgPSByKTsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gZnVuY3Rpb24oKSB7fTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICBzOiBhLAogICAgICAgICAgICAgICAgICAgICAgICBuOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuID49IGUubGVuZ3RoID8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICEwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvbmU6ICExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBlW24rK10KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBmOiBhCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGwsIGggPSAhMCwgZiA9ICExOwogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgciA9IHIuY2FsbChlKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG46IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBlID0gci5uZXh0KCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGggPSBlLmRvbmUsCiAgICAgICAgICAgICAgICAgICAgICAgIGUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBlOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgZiA9ICEwLAogICAgICAgICAgICAgICAgICAgICAgICBsID0gZQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGY6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGggfHwgbnVsbCA9PSByLnJldHVybiB8fCByLnJldHVybigpCiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGIoZSwgdCkgewogICAgICAgICAgICAobnVsbCA9PSB0IHx8IHQgPiBlLmxlbmd0aCkgJiYgKHQgPSBlLmxlbmd0aCk7CiAgICAgICAgICAgIGZvciAodmFyIHIgPSAwLCBuID0gbmV3IEFycmF5KHQpOyByIDwgdDsgcisrKQogICAgICAgICAgICAgICAgbltyXSA9IGVbcl07CiAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGQoKSB7CiAgICAgICAgICAgIHJldHVybiAxMCAqIE1hdGgucmFuZG9tKCkgfCAwCiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGsoZSwgdCkgewogICAgICAgICAgICB2YXIgciwgbiA9IFtdLCBhID0gZS5sZW5ndGgsIG8gPSB2KGUpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgZm9yIChvLnMoKTsgIShyID0gby5uKCkpLmRvbmU7ICkgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gci52YWx1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSAqIGEgPCB0ICYmIChuLnB1c2gocyksCiAgICAgICAgICAgICAgICAgICAgMCA9PSAtLXQpKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBhLS0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgby5lKGUpCiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICBvLmYoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAodmFyIGMgPSAiIiwgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgdSA9IE1hdGgucmFuZG9tKCkgKiAobi5sZW5ndGggLSBpKSB8IDA7CiAgICAgICAgICAgICAgICBjICs9IG5bdV0sCiAgICAgICAgICAgICAgICAgICAgblt1XSA9IG5bbi5sZW5ndGggLSBpIC0gMV0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB5KCkgewogICAgICAgICAgICB2YXIgZSA9IFsibXRHMG50QzBudTFBRExQT3RXIiwgIm1KcTBtZkhRejIxS0VHIiwgIm1KcjFFZ3ZTcjJtIiwgIm10aVlDMW4yejNmNiIsICJtSnVYbUptMm5nRG1ETFBBQnEiLCAibXRLMm9kZnd0S1QwQU00IiwgIm10bTFtZENZbjFuc3Qwakl1RyIsICJuZEtXbnRlNG1lUFV2THJzdXEiLCAibXRiS0FNMTJ2d3UiLCAibXh2SkRkekttZ1BPQ3EiLCAibUp5WG5KRzRtTHJidHd2MkVHIiwgIm10bTJvZXIyd3dUdnpHIl07CiAgICAgICAgICAgIHJldHVybiAoeSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkoKQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBtKGUsIHQpIHsKICAgICAgICAgICAgdmFyIHIgPSB5KCk7CiAgICAgICAgICAgIHJldHVybiBtID0gZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgdmFyIGEgPSByW3QgLT0gMzAzXTsKICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG0uSnJmblBNKSB7CiAgICAgICAgICAgICAgICAgICAgbS5WcnpsQVAgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIHIsIG4gPSAiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjAxMjM0NTY3ODkrLz0iLCBhID0gIiIsIG8gPSAiIiwgcyA9IDAsIGMgPSAwOyByID0gZS5jaGFyQXQoYysrKTsgfnIgJiYgKHQgPSBzICUgNCA/IDY0ICogdCArIHIgOiByLAogICAgICAgICAgICAgICAgICAgICAgICBzKysgJSA0KSA/IGEgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgyNTUgJiB0ID4+ICgtMiAqIHMgJiA2KSkgOiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZGVmYXVsdCkobikuY2FsbChuLCByKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHUgPSBhLmxlbmd0aDsgaSA8IHU7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICs9ICIlIiArICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYuZGVmYXVsdCkobCA9ICIwMCIgKyBhLmNoYXJDb2RlQXQoaSkudG9TdHJpbmcoMTYpKS5jYWxsKGwsIC0yKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQobykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICwKICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGFyZ3VtZW50cywKICAgICAgICAgICAgICAgICAgICAgICAgbS5KcmZuUE0gPSAhMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIG8gPSB0ICsgclswXS5zdWJzdHJpbmcoMCwgMikKICAgICAgICAgICAgICAgICAgICAsIHMgPSBlW29dOwogICAgICAgICAgICAgICAgcmV0dXJuIHMgPyBhID0gcyA6IChhID0gbS5WcnpsQVAoYSksCiAgICAgICAgICAgICAgICAgICAgZVtvXSA9IGEpLAogICAgICAgICAgICAgICAgICAgIGEKICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgbShlLCB0KQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiB3KGUpIHsKICAgICAgICAgICAgZm9yICh2YXIgdCA9IGUuc2l6ZSwgciA9IGUubnVtLCBuID0gIiI7IHQtLTsgKQogICAgICAgICAgICAgICAgbiArPSByW01hdGgucmFuZG9tKCkgKiByLmxlbmd0aCB8IDBdOwogICAgICAgICAgICByZXR1cm4gbgogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBfKGUsIHQpIHsKICAgICAgICAgICAgZm9yICh2YXIgbywgcywgYywgaSA9IG4sIHUgPSBhLCBsID0gW10sIGggPSAyMzk7IDsgKQogICAgICAgICAgICAgICAgc3dpdGNoICh1W2grK10pIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBsLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDFdICs9IGM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSA9IGxbbC5sZW5ndGggLSAxXS5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsLnBvcCgpOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgIGggKz0gdVtoXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gMV0gPSBsW2wubGVuZ3RoIC0gMV1bclsxMCArIHVbaCsrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgICAgICBjID0gbC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSA9IGxbbC5sZW5ndGggLSAxXSA8IGM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gbFtsLmxlbmd0aCAtIDJdID8gKGxbbC5sZW5ndGggLSAzXSA9IGkuY2FsbChsW2wubGVuZ3RoIC0gM10sIGxbbC5sZW5ndGggLSAyXSwgbFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDIpIDogKGMgPSBsW2wubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM10gPSBjKGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNDU6CiAgICAgICAgICAgICAgICAgICAgICAgIGwucG9wKCkgPyBoICs9IHVbaF0gOiArK2g7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSA/ICgrK2gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLWwubGVuZ3RoKSA6IGggKz0gdVtoXTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHApOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICBsLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gobFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAyXSA9IGxbbC5sZW5ndGggLSAyXVtyWzEwICsgdVtoKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBsLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDFdID0gbFtsLmxlbmd0aCAtIDFdICE9PSBjOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gNF0gPSBpLmNhbGwobFtsLmxlbmd0aCAtIDRdLCBsW2wubGVuZ3RoIC0gM10sIGxbbC5sZW5ndGggLSAyXSwgbFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh2b2lkIDApOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDY4OgogICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNzU6CiAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSA9IC1sW2wubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNzg6CiAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChyWzEwICsgdVtoKytdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBsW2wubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChvKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSA4NjoKICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDg3OgogICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gMl0gPSBsW2wubGVuZ3RoIC0gMl1bbFtsLmxlbmd0aCAtIDFdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBsW2wubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgOTM6CiAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh1W2grK10pOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDk2OgogICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChvKyspOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICAgICAgICAgICAgICBvID0gbFtsLmxlbmd0aCAtIDFdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIHIgPSBtLCBuID0gZSgpOyA7ICkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDY3MzM2MSA9PT0gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkocigzMTQpKSAvIDEgKiAoKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkocigzMTIpKSAvIDIpICsgLSgwLAogICAgICAgICAgICAgICAgICAgICAgICBoLmRlZmF1bHQpKHIoMzA3KSkgLyAzICsgLSgwLAogICAgICAgICAgICAgICAgICAgICAgICBoLmRlZmF1bHQpKHIoMzEzKSkgLyA0ICogKCgwLAogICAgICAgICAgICAgICAgICAgICAgICBoLmRlZmF1bHQpKHIoMzA1KSkgLyA1KSArICgwLAogICAgICAgICAgICAgICAgICAgICAgICBoLmRlZmF1bHQpKHIoMzA0KSkgLyA2ICsgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkocigzMDMpKSAvIDcgKiAoKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkocigzMTEpKSAvIDgpICsgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkocigzMDgpKSAvIDkgKiAoKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkocigzMTApKSAvIDEwKSArICgwLAogICAgICAgICAgICAgICAgICAgICAgICBoLmRlZmF1bHQpKHIoMzA5KSkgLyAxMSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICBuLnB1c2gobi5zaGlmdCgpKQogICAgICAgICAgICAgICAgfQogICAgICAgIH0oeSkKICAgIH0ob0UpOwogICAgdmFyIGNFLCBpRSwgdUUgPSB7fSwgbEUgPSB7fTsKICAgIGZ1bmN0aW9uIGhFKGUpIHsKICAgICAgICB2YXIgdCA9IG5ldyBSZWdFeHAoIihefCApIiArIGUgKyAiKD86PShbXjtdKikpPyg7fCQpIikKICAgICAgICAgICAgLCByID0gZG9jdW1lbnQuY29va2llLm1hdGNoKHQpOwogICAgICAgIGlmICghciB8fCAhclsyXSkKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIHZhciBuID0gclsyXTsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gLyglWzAtOUEtRl17Mn0pezIsfS8udGVzdChuKSA/IGRlY29kZVVSSUNvbXBvbmVudChuKSA6IHVuZXNjYXBlKG4pCiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gdW5lc2NhcGUobikKICAgICAgICB9CiAgICB9CiAgICBjRSA9IGxFLAogICAgICAgIGlFID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICBlLnZlcnNpb24gPSAiMS4zLjEiLAogICAgICAgICAgICAgICAgZS5ic3RyID0gZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gMQogICAgICAgICAgICAgICAgICAgICAgICAsIG4gPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICwgYSA9IGUubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICwgbyA9IDA7CiAgICAgICAgICAgICAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgKHIgPSA2NTUzNSAmIHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0ID4+PiAxNik7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBhOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gTWF0aC5taW4oYSAtIHMsIDI2NTQpICsgczsgcyA8IG87IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gKz0gciArPSAyNTUgJiBlLmNoYXJDb2RlQXQocyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAxNSAqIChyID4+PiAxNikgKyAoNjU1MzUgJiByKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAxNSAqIChuID4+PiAxNikgKyAoNjU1MzUgJiBuKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiAlIDY1NTIxIDw8IDE2IHwgciAlIDY1NTIxCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICBlLmJ1ZiA9IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gMAogICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSBlLmxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAsIG8gPSAwOwogICAgICAgICAgICAgICAgICAgICJudW1iZXIiID09IHR5cGVvZiB0ICYmIChyID0gNjU1MzUgJiB0LAogICAgICAgICAgICAgICAgICAgICAgICBuID0gdCA+Pj4gMTYgJiA2NTUzNSk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBhOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gTWF0aC5taW4oYSAtIHMsIDI2NTQpICsgczsgcyA8IG87IHMrKykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gKz0gciArPSAyNTUgJiBlW3NdOwogICAgICAgICAgICAgICAgICAgICAgICByID0gMTUgKiAociA+Pj4gMTYpICsgKDY1NTM1ICYgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMTUgKiAobiA+Pj4gMTYpICsgKDY1NTM1ICYgbikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJSA2NTUyMSA8PCAxNiB8IHIgJSA2NTUyMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgZS5zdHIgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gZS5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgLCBvID0gMAogICAgICAgICAgICAgICAgICAgICAgICAsIHMgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICwgYyA9IDA7CiAgICAgICAgICAgICAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIHQgJiYgKHIgPSA2NTUzNSAmIHQsCiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0ID4+PiAxNik7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhOyApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChvID0gTWF0aC5taW4oYSAtIGksIDI5MTgpOyBvID4gMDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSBlLmNoYXJDb2RlQXQoaSsrKSkgPCAxMjggPyByICs9IHMgOiBzIDwgMjA0OCA/IChuICs9IHIgKz0gMTkyIHwgcyA+PiA2ICYgMzEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gMTI4IHwgNjMgJiBzKSA6IHMgPj0gNTUyOTYgJiYgcyA8IDU3MzQ0ID8gKG4gKz0gciArPSAyNDAgfCAocyA9IDY0ICsgKDEwMjMgJiBzKSkgPj4gOCAmIDcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gKz0gciArPSAxMjggfCBzID4+IDIgJiA2MywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLW8sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiArPSByICs9IDEyOCB8IChjID0gMTAyMyAmIGUuY2hhckNvZGVBdChpKyspKSA+PiA2ICYgMTUgfCAoMyAmIHMpIDw8IDQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gMTI4IHwgNjMgJiBjKSA6IChuICs9IHIgKz0gMjI0IHwgcyA+PiAxMiAmIDE1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICs9IHIgKz0gMTI4IHwgcyA+PiA2ICYgNjMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgKz0gMTI4IHwgNjMgJiBzKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICs9IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS1vOwogICAgICAgICAgICAgICAgICAgICAgICByID0gMTUgKiAociA+Pj4gMTYpICsgKDY1NTM1ICYgciksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gMTUgKiAobiA+Pj4gMTYpICsgKDY1NTM1ICYgbikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4gJSA2NTUyMSA8PCAxNiB8IHIgJSA2NTUyMQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAsCiAgICAgICAgInVuZGVmaW5lZCIgPT0gdHlwZW9mIERPX05PVF9FWFBPUlRfQURMRVIgPyBpRShjRSkgOiBpRSh7fSksCiAgICAgICAgZnVuY3Rpb24oZSkgewogICAgICAgICAgICBmdW5jdGlvbiB0KGUpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAiIiwgciA9IDA7IHIgPCBlLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBlLmNoYXJDb2RlQXQocisrKTsKICAgICAgICAgICAgICAgICAgICB0ICs9IG4gPiA2MyA/IFN0cmluZy5mcm9tQ2hhckNvZGUoMzggXiBuKSA6IDM1ID09IG4gPyBlLmNoYXJBdChyKyspIDogU3RyaW5nLmZyb21DaGFyQ29kZShuKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHQKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgciA9IFsidGsiLCB0KCJLR0FPRSIpLCAiMDMiLCB0KCJQQ1RVT0lIIiksICJ3IiwgdCgiVkpHUkBJVEsiKSwgIjQxIiwgdCgiQ15WT1RDVSIpLCAibCIsIHQoIlZUSUJTRUNUIiksIHQoIkNeVlQiKSwgdCgiRU9WTkNUIiksIHQoIkdCSkNUMzIiKSwgdCgiQUNSdEdIQklLb2J2VEkiKSwgdCgiVU8jekMiKSwgdCgiQk9FUnJfVkMiKSwgdCgiRVNVUklLYk9FUiIpLCAiIiwgdCgiQkNAR1NKUiIpLCAiRlgiLCB0KCJWR1RVQyIpLCB0KCJDSEVUX1ZSIiksIHQoIkxJT0giKSwgIml2IiwgdCgiQFRJS2RHVUM2NCIpLCB0KCJVUlRPSEFPQF8iKSwgdCgiRU9WTkNUUkNeUiIpLCB0KCJCQ0BHU0pSIiksIHQoIlZUSVJJUl9WQyIpLCB0KCJFR0pKIiksICJzZXQiLCAiYnVmIiwgdCgiUkl1UlRPSEEiKSwgdCgiVVNEVVJUIiksIHQoIkVOR1RlSUJDZ1IiKSwgdCgiRU5HVGVJQkNnUiIpLCB0KCJFTkdUZUlCQ2dSIiksIHQoIkBKSUlUIiksICJwb3ciLCB0KCJVQ1JzT0hSMzIiKSwgdCgiVUNSb0hSMTYiKSwgdCgiQUNSdEdIQklLb2J2VEkiKSwgdCgiVU8jekMiKSwgdCgiQk9FUnJfVkMiKSwgdCgiRVNVUklLYk9FUiIpLCAiMSIsICIyIiwgIjMiLCAiKyIsICJ4IiwgdCgiQEpJSVQiKSwgdCgiVEdIQklLIiksICIiLCB0KCJVU0RVUlQiKSwgdCgiQkNAR1NKUiIpLCB0KCJWR1RVQyIpLCB0KCJVUlRPSEFPQF8iKSwgdCgiQFRJS2RHVUM2NCIpXQogICAgICAgICAgICAgICAgLCBuID0gRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwKICAgICAgICAgICAgICAgICwgYSA9IFs2NywgNjgsIDQ3LCAyMiwgNjQsIDAsIDExLCAxLCA0NywgMjIsIDY0LCAyLCAxMSwgMywgNDcsIDIyLCA2NCwgNCwgMTEsIDUsIDQ3LCAyMiwgNjQsIDYsIDExLCA3LCA0NywgMjIsIDY0LCA4LCAxMSwgOSwgNDcsIDIyLCA5MCwgMTcsIDg1LCAxMSwgMTAsIDQ3LCAyMiwgODQsIDE3LCA4OCwgMzEsIDExLCAxMSwgNDcsIDIyLCA5NywgMTcsIDIyLCAyNywgMSwgMjIsIDI3LCAzLCAyLCAyMiwgMjcsIDUsIDIsIDIyLCAyNywgNywgMiwgMjIsIDI3LCA5LCAyLCAyMiwgMjcsIDEwLCAyLCAyMiwgMjcsIDExLCAyLCAzMSwgMTEsIDEyLCA0NywgMjIsIDI3LCAxLCAyMiwgMjcsIDMsIDIsIDIyLCAyNywgNSwgMiwgMjIsIDI3LCAxMiwgMiwgMjIsIDI3LCA3LCAyLCAyMiwgMjcsIDksIDIsIDIyLCAyNywgMTAsIDIsIDIyLCAyNywgMTEsIDIsIDY2LCA4MiwgNDksIDIxLCAxOCwgMjcsIDE4LCAxMCwgMzgsIDAsIDgwLCA4MywgMjMsIDMyLCA3OSwgMSwgOTQsIDM0LCAyMywgNTAxLCA1NCwgNzksIDIsIDM0LCA3OSwgMywgNTQsIDcsIDE4LCA3MywgNCwgNDEsIDE4LCAyNywgMTgsIDQ0LCAzOCwgNSwgODAsIDExLCA4OSwgMTgsIDczLCA2LCA5MiwgMTgsIDk0LCAzNCwgMjMsIDQ5OSwgNTQsIDk2LCAxOCwgMjQsIDM0LCA1NiwgNjYsIDc0LCA4NCwgNjcsIDI1LCAxOCwgODIsIDMzLCAzNCwgMiwgNTQsIDk1LCA0MSwgMTgsIDgyLCAzMywgMzQsIDc0LCA1NCwgOTUsIDQxLCAxOCwgODIsIDMzLCAzNCwgODQsIDU0LCA5NSwgNDEsIDE4LCA4MiwgNTAsIDM0LCA2NiwgNTQsIDk1LCA0MSwgMTgsIDgyLCAzMywgMzQsIDU2LCA1NCwgOTUsIDQxLCAxOCwgOCwgMzgsIDUsIDE5LCA3LCA4MiwgNTQsIDQ4LCAxOCwgMzEsIDM4LCA1LCAxOSwgOCwgMTQsIDQsIDM4LCA1LCAxOSwgNywgNDAsIDU0LCA4MywgNCwgMzgsIDUsIDE5LCA3LCA2OSwgMTksIDksIDczLCA0LCA1NCwgNTQsIDc5LCAxMCwgOTksIDMsIDE4LCAyNywgMTgsIDEwLCAzOCwgMTEsIDgwLCA4NSwgMzgsIDUsIDE5LCAxMiwgNzEsIDM4LCAxMywgNTQsIDU0LCA2MywgMzksIDcsIDkxLCAxMywgOSwgMSwgMTksIC0yMzgyLCAxOSwgLTU0NzQsIDgwLCAxOSwgNzg3MiwgODAsIDIsIDYwLCAxMywgMzgsIDEzLCA3NywgNDMsIDAsIDEsIDM3LCA0MywgMSwgNDksIDY4LCAyLCAzOSwgOTcsIDcyLCAxMywgNDYsIDI4LCA3NCwgNDksIDkyLCAxMywgOSwgMSwgMTksIDI3OTMsIDE5LCAtNTU0NiwgODAsIDE5LCAyNzU1LCA4MCwgMiwgNTYsIDEzLCAzOCwgMTMsIDc3LCA0MywgMCwgMSwgMzcsIDQzLCAxLCA0OSwgNjgsIDIsIDMyLCA3MywgNzIsIDEzLCA5LCAxLCAxOSwgLTc3MSwgMTksIC00ODcsIDgwLCAxOSwgMTI3MCwgODAsIDIsIDE0LCAxMywgMzgsIDEzLCA3NywgNDMsIDAsIDEsIDM3LCA0MywgMSwgNDksIDY4LCAyLCA3NSwgMzQsIDcyLCAxMywgOSwgMSwgMTksIDE0NSwgMTksIC00MTAzLCA4MCwgMTksIDM5OTYsIDgwLCAyLCA1OSwgMTMsIDYyLCA2OCwgMywgMzIsIDQ5LCAxMywgNjIsIDY4LCAzLCA3NSwgMTksIC04NzgzLCAxOSwgLTcwNzAsIDgwLCAxOSwgMTU4NTUsIDgwLCA3MiwgMTMsIDYyLCA2OCwgMywgMjcsIDE5LCA2NzgwLCAxOSwgNTI3OCwgODAsIDE5LCAtMTIwNDQsIDgwLCA3MiwgMTMsIDYyLCA2OCwgMywgMzksIDE5LCAtMzgyMywgMTksIC05NDY5LCA4MCwgMTksIDEzMzE0LCA4MCwgNzIsIDEzLCA3OCwgNDMsIDAsIDY4LCA0LCA2MiwgNDksIDYsIDEzLCA4NiwgMTksIDc4OTYsIDE5LCAtNTU1MywgODAsIDE5LCAtMjM0MywgODAsIDY5LCA2LCAxMywgODIsIDI4LCAxOSwgNDk4LCA0OSwgODYsIDY4LCA1LCAxOSwgNzk5OSwgMTksIC01NjUxLCA4MCwgMTksIC0yMzMyLCA4MCwgNDksIDgwLCAyOSwgMTMsIDQ4LCA2OCwgNiwgNDgsIDM2LCAxOSwgLTU0MjQsIDE5LCAtMjUxMSwgODAsIDE5LCA3OTQzLCA4MCwgMzAsIDQ5LCA5NSwgNTMsIDE4LCA5NiwgOTEsIDU4LCAwLCA5NiwgMzYsIDcxLCA1NywgNzIsIDg2LCA5NCwgODQsIDQyLCAwLCA5NCwgMjgsIDc3LCAzNSwgNzksIDI2LCAyOCwgMTgsIDQwLCAwLCAyOCwgNDIsIDM0LCA3MywgNTAsIDE2LCA5MywgOTgsIDYyLCAxNCwgMjIsIDYxLCAwLCA0NCwgMjIsIDYxLCAxLCAyNywgLTgxNDcsIDI3LCAxMTIyLCAxNywgMjcsIDcwMjcsIDE3LCAyNywgNTkzMSwgMjcsIC04NDU2LCAxNywgMjcsIDI1NTcsIDE3LCAzNSwgODMsIDM0LCAyNCwgMTQsIDQ0LCAyMiwgNjEsIDEsIDI3LCAtNzI4OSwgMjcsIDg1ODYsIDE3LCAyNywgLTEyOTUsIDE3LCAyNywgNzEwMSwgMjcsIDkyODUsIDE3LCAyNywgLTE2MzU0LCAxNywgMzUsIDc1LCAyMywgMTQsIDk5LCA5MywgMjcsIC02MTI1LCAyNywgLTc4MTMsIDE3LCAyNywgMTM5NDYsIDE3LCA2MywgODIsIDE0LCA4NCwgOTMsIDk2LCA2MywgMzIsIDE0LCA4MSwgODYsIDMyLCA2MCwgNjEsIDIsIDI3LCA1NjY1LCAyNywgLTIwOTEsIDE3LCAyNywgLTM1NzQsIDE3LCAzMywgODEsIDMxLCAxNCwgNjAsIDYxLCAyLCAyNywgLTQ5NTEsIDI3LCAxNDE5LCAxNywgMjcsIDM1MzYsIDE3LCA1MywgODEsIDMxLCA4OCwgMzAsIDYwLCA2MSwgMiwgMjcsIDg4NTQsIDI3LCAyNjU3LCAxNywgMjcsIC0xMTUxMSwgMTcsIDUzLCA4MSwgMzEsIDE0LCA2MCwgNjEsIDIsIDI3LCA2NjkyLCAyNywgLTg3MTUsIDE3LCAyNywgMjAyNywgMTcsIDMzLCA4MSwgMzEsIDE0LCA1OCwgOTMsIDk2LCA2MywgNTYsIDQxLCAzNiwgNTgsIDUyLCAtNjQ5LCA1MiwgNjIxNCwgNTcsIDUyLCAtNTU2MywgNTcsIDgyLCA4MywgMTgsIDE1LCA1OCwgNTEsIDgyLCA1LCAwLCA1MiwgLTE0NDEsIDUyLCAyNjY3LCA1NywgNTIsIC0xMjI2LCA1NywgNTIsIDQ5NjUsIDUyLCAyOTI5LCA1NywgNTIsIC03NjM4LCA1NywgNjgsIDAsIDM5LCAzOSwgNjUsIDE4LCA3MiwgNTgsIDUxLCA4MiwgNTIsIC01NDU0LCA1MiwgNjA1OSwgNTcsIDUyLCAtNjA1LCA1NywgOTIsIDUyLCA3MTgyLCA1MiwgMjI1NSwgNTcsIDUyLCAtOTE4MSwgNTcsIDYzLCA2LCA1NSwgMjUsIDM4LCAzLCA1NSwgMywgMTUsIDE3LCAwLCA2MywgNiwgNzgsIDMyLCAxLCAxLCA5OCwgMjEsIDc4LCA1MDEsIDIzLCAxLCAyLCAyMSwgMSwgMywgMjMsIDkwLCAzLCA2NSwgMywgNTUsIDgwLCA0LCA0OSwgMzMsIDgwLCA1LCA0OSwgNzgsIDIsIDgwLCA2LCA0OSwgMzAsIDMsIDY1LCAyLCA1NSwgODAsIDcsIDQ5LCAzMywgODAsIDgsIDQ5LCAyOSwgMywgNzgsIC04NjcxLCA3OCwgNzg3OSwgMzIsIDc4LCA3OTQsIDMyLCAyOCwgNTIsIDksIDI4LCA1MiwgMTAsIDg4LCA3OCwgMjk4NSwgNzgsIDkzNzQsIDMyLCA3OCwgLTEyMzU1LCAzMiwgNjcsIDIzLCAzMiwgOTcsIDMsIDgwLCAxMSwgMTMsIDMsIDc4LCA3NzEwLCA3OCwgNTkxMiwgMzIsIDc4LCAtMTM2MjIsIDMyLCA4NCwgMywgNjIsIDYzLCA1MCwgNTksIDI4LCA1MiwgOSwgMjgsIDUyLCAxMCwgODgsIDc4LCAxMzg1LCA3OCwgNzA1LCAzMiwgNzgsIC0yMDg3LCAzMiwgNjcsIDIzLCA0MSwgMzIsIDEzLCAzLCA1MSwgNjEsIDc4LCAtNjAwMywgNzgsIDgyODQsIDMyLCA3OCwgLTIyODAsIDMyLCA4OSwgNzEsIDcyLCAyMywgNTAsIDg1LCAyOCwgNTIsIDksIDI4LCA1MiwgMTAsIDg4LCA3OCwgMzU4NSwgNzgsIC0zMjEwLCAzMiwgNzgsIC0zNzMsIDMyLCA2NywgMjMsIDQxLCAzMiwgMTMsIDMsIDE5LCAzLCA1MSwgNjEsIDcxLCA2NiwgLTY2LCA1MCwgMTYsIDc4LCAtMzQ1NSwgNzgsIC00NDIxLCAzMiwgNzgsIDc4ODUsIDMyLCA3MSwgNzIsIDI3LCA1MCwgMTgsIDUyLCAxMiwgNzgsIC0zNTgxLCA3OCwgLTQzMzMsIDMyLCA3OCwgNzkxNCwgMzIsIDc4LCAtODkxNiwgNzgsIDM5NSwgMzIsIDc4LCA4NTMwLCAzMiwgNTAsIDE2LCA4OSwgMTIsIDMyLCAxMywgMywgNjQsIDE3LCAxMywgNTIsIDE0LCA1MCwgMjMsIDExLCAzLCA3MywgMTcsIDEzLCA1MiwgMTUsIDMxLCAyMywgOTEsIDMsIDU1LCAzLCAxNSwgMTcsIDE2LCA2MywgNzYsIDIzLCAzNiwgMzRdCiAgICAgICAgICAgICAgICAsIG8gPSBUZy5leHBvcnRzOwogICAgICAgICAgICBrZyhlLCAiX19lc01vZHVsZSIsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiAhMAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIGUuZ2VuTG9jYWxUSyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBvLCBzID0gbiwgYyA9IGEsIGkgPSBbXSwgdSA9IDA7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNbdSsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBpLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW2kubGVuZ3RoIC0gMV0gKz0gbzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVtpLmxlbmd0aCAtIDJdW3JbY1t1KytdXV0gPSBpW2kubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbaS5sZW5ndGggLSAyXSA9IGlbaS5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbaS5sZW5ndGggLSAxXSA9IGlbaS5sZW5ndGggLSAxXVtyW2NbdSsrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGlbaS5sZW5ndGggLSAyXSA/IChpW2kubGVuZ3RoIC0gM10gPSBzLmNhbGwoaVtpLmxlbmd0aCAtIDNdLCBpW2kubGVuZ3RoIC0gMl0sIGlbaS5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGVuZ3RoIC09IDIpIDogKG8gPSBpW2kubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbaS5sZW5ndGggLSAzXSA9IG8oaVtpLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucHVzaChyW2NbdSsrXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGlbaS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1c2goeCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gaVtpLmxlbmd0aCAtIDFdID8gaVtpLmxlbmd0aCAtIDJdID0gcy5jYWxsKGlbaS5sZW5ndGggLSAyXSwgaVtpLmxlbmd0aCAtIDFdKSA6IChvID0gaVtpLmxlbmd0aCAtIDJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW2kubGVuZ3RoIC0gMl0gPSBvKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucHVzaChEKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKF8pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgOwogICAgICAgICAgICB2YXIgcyA9IG8oV3kpCiAgICAgICAgICAgICAgICAsIGMgPSBvKHJtKQogICAgICAgICAgICAgICAgLCBpID0gbyhubSkKICAgICAgICAgICAgICAgICwgdSA9IG8oTHcpCiAgICAgICAgICAgICAgICAsIGwgPSBvKHltKQogICAgICAgICAgICAgICAgLCBoID0gbyhFbSkKICAgICAgICAgICAgICAgICwgZiA9IEdfCiAgICAgICAgICAgICAgICAsIGcgPSBvKFlTLmV4cG9ydHMpCiAgICAgICAgICAgICAgICAsIHAgPSBvKFdTLmV4cG9ydHMpCiAgICAgICAgICAgICAgICAsIHYgPSBvKEpTLmV4cG9ydHMpCiAgICAgICAgICAgICAgICAsIGIgPSBvKEhTLmV4cG9ydHMpCiAgICAgICAgICAgICAgICAsIGQgPSBvKGxFKQogICAgICAgICAgICAgICAgLCBrID0gdzsKICAgICAgICAgICAgIWZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHIgPSB3LCBuID0gZSgpOyA7ICkKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoNDcwNDcyID09PSAtKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmRlZmF1bHQpKHIoNTAzKSkgLyAxICsgLSgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZWZhdWx0KShyKDQ5NCkpIC8gMiArIC0oMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZGVmYXVsdCkocig1MDApKSAvIDMgKyAtKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmRlZmF1bHQpKHIoNTA0KSkgLyA0ICsgLSgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZWZhdWx0KShyKDQ5NykpIC8gNSArICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZWZhdWx0KShyKDUwMikpIC8gNiArICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZWZhdWx0KShyKDQ5NikpIC8gNykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2gobi5zaGlmdCgpKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0oUyk7CiAgICAgICAgICAgIHZhciB5ID0gayg0OTUpCiAgICAgICAgICAgICAgICAsIG0gPSBbIjAxIiwgIjAyIiwgIjAzIiwgIjA0IiwgIjA1IiwgIjA2IiwgIjA3IiwgIjA4Il07CiAgICAgICAgICAgIGZ1bmN0aW9uIHcoZSwgdCkgewogICAgICAgICAgICAgICAgdmFyIHIgPSBTKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdyA9IGZ1bmN0aW9uKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHJbdCAtPSA0OTRdOwogICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHcuQ1lkQkRmKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHcuakJNZXRiID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgciwgbiA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSsvPSIsIGEgPSAiIiwgbyA9ICIiLCBzID0gMCwgdSA9IDA7IHIgPSBlLmNoYXJBdCh1KyspOyB+ciAmJiAodCA9IHMgJSA0ID8gNjQgKiB0ICsgciA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzKysgJSA0KSA/IGEgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgyNTUgJiB0ID4+ICgtMiAqIHMgJiA2KSkgOiAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5kZWZhdWx0KShuKS5jYWxsKG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDAsIGggPSBhLmxlbmd0aDsgbCA8IGg7IGwrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gKz0gIiUiICsgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuZGVmYXVsdCkoZiA9ICIwMCIgKyBhLmNoYXJDb2RlQXQobCkudG9TdHJpbmcoMTYpKS5jYWxsKGYsIC0yKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChvKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5DWWRCRGYgPSAhMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHQgKyByWzBdLnN1YnN0cmluZygwLCAyKQogICAgICAgICAgICAgICAgICAgICAgICAsIHMgPSBlW29dOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzID8gYSA9IHMgOiAoYSA9IHcuakJNZXRiKGEpLAogICAgICAgICAgICAgICAgICAgICAgICBlW29dID0gYSksCiAgICAgICAgICAgICAgICAgICAgICAgIGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICAgICAgdyhlLCB0KQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIF8oZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBrCiAgICAgICAgICAgICAgICAgICAgLCByID0gZC5kZWZhdWx0LnN0cihlKTsKICAgICAgICAgICAgICAgIHIgPj4+PSAwOwogICAgICAgICAgICAgICAgdmFyIG4gPSB0KDQ5OCkgKyByLnRvU3RyaW5nKDE2KTsKICAgICAgICAgICAgICAgIHJldHVybiBuLnN1YnN0cihuLmxlbmd0aCAtIDgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24geChlKSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBvLCBzLCBjLCBpLCBsLCBoLCBkLCB3LCBfID0gbiwgeCA9IGEsIFMgPSBbXSwgQSA9IDExNTsgOyApCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh4W0ErK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBTW1MubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKHYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNbUy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2goZyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBTW1MubGVuZ3RoIC0gMV0gPyBTW1MubGVuZ3RoIC0gMl0gPSBfLmNhbGwoU1tTLmxlbmd0aCAtIDJdLCBTW1MubGVuZ3RoIC0gMV0pIDogKHcgPSBTW1MubGVuZ3RoIC0gMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU1tTLmxlbmd0aCAtIDJdID0gdygpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2goaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChTW1MubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNbUy5sZW5ndGggLSAyXSA9IFNbUy5sZW5ndGggLSAyXVtyWzEzICsgeFtBKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBTW1MubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaCh4W0ErK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2goRSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBTW1MubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2goQyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU1tTLmxlbmd0aCAtIDFdID0gU1tTLmxlbmd0aCAtIDFdW3JbMTMgKyB4W0ErK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gU1tTLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2godSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBTW1MubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKFQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IFNbUy5sZW5ndGggLSAyXSA/IChTW1MubGVuZ3RoIC0gM10gPSBfLmNhbGwoU1tTLmxlbmd0aCAtIDNdLCBTW1MubGVuZ3RoIC0gMl0sIFNbUy5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5sZW5ndGggLT0gMikgOiAodyA9IFNbUy5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTW1MubGVuZ3RoIC0gM10gPSB3KFNbUy5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNbUy5sZW5ndGggLSA2XSA9IF8uY2FsbChTW1MubGVuZ3RoIC0gNl0sIFNbUy5sZW5ndGggLSA1XSwgU1tTLmxlbmd0aCAtIDRdLCBTW1MubGVuZ3RoIC0gM10sIFNbUy5sZW5ndGggLSAyXSwgU1tTLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLmxlbmd0aCAtPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2gobSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKHJbMTMgKyB4W0ErK11dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKGMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTW1MubGVuZ3RoIC0gMl1bclsxMyArIHhbQSsrXV1dID0gU1tTLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaCh2b2lkIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaCh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUy5wdXNoKGIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gU1tTLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gU1tTLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcgPSBTLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNbUy5sZW5ndGggLSAxXSArPSB3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gU1tTLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTW1MubGVuZ3RoIC0gNV0gPSBfLmNhbGwoU1tTLmxlbmd0aCAtIDVdLCBTW1MubGVuZ3RoIC0gNF0sIFNbUy5sZW5ndGggLSAzXSwgU1tTLmxlbmd0aCAtIDJdLCBTW1MubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMubGVuZ3RoIC09IDQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gUygpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gWyJtdGkyb3RHWW9kREt2M25KRDJ5IiwgIm5adVptZGkxQ3VMckRnanoiLCAibWRhV21kYVdtZGEiLCAibmNQUHNZeVptMVA4a1p5UCIsICJtSnk1blppM3ZNSHByMjFVIiwgIkJ3ZjQiLCAibXR5MW1aaTBxTWpMRWZidCIsICJtdEMxbmRhMXpMblV2d3JoIiwgIm1KdTFvdEsxbU05THZOcmZBVyIsICJuSm1XbmRtWURNallDTkh2IiwgIkVMaSt2dHZURUpxV3ZaSzVqSkhaelciXTsKICAgICAgICAgICAgICAgIHJldHVybiAoUyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEUoZSwgdCwgbywgcykgewogICAgICAgICAgICAgICAgZm9yICh2YXIgYywgaSwgdSwgaCwgZiwgZywgcCwgdiwgYiwgeSA9IG4sIG0gPSBhLCB3ID0gW10sIF8gPSAyNzM7IDsgKQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobVtfKytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaCh2b2lkIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdbdy5sZW5ndGggLSAzXSA9IG5ldyB3W3cubGVuZ3RoIC0gM10od1t3Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3Lmxlbmd0aCAtPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB3W3cubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKGspOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaChVaW50OEFycmF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHdbdy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKG1bXysrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaCh1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gd1t3Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gdy5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W3cubGVuZ3RoIC0gMV0gLT0gYjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goKGZ1bmN0aW9uKGUsIHQsIG8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYywgaSA9IG4sIHUgPSBhLCBsID0gW10sIGggPSA0ODg7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1W2grK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gobyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gbFtsLmxlbmd0aCAtIDJdID8gKGxbbC5sZW5ndGggLSAzXSA9IGkuY2FsbChsW2wubGVuZ3RoIC0gM10sIGxbbC5sZW5ndGggLSAyXSwgbFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDIpIDogKGMgPSBsW2wubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM10gPSBjKGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gMl0gPSBsW2wubGVuZ3RoIC0gMl1bclszNCArIHVbaCsrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM11bbFtsLmxlbmd0aCAtIDJdXSA9IGxbbC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAzXSA9IGxbbC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W3cubGVuZ3RoIC0gMV0gPSB3W3cubGVuZ3RoIC0gMV0ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goQXJyYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgd1t3Lmxlbmd0aCAtIDFdID0gd1t3Lmxlbmd0aCAtIDFdW3JbMjcgKyBtW18rK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKE8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2godik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gd1t3Lmxlbmd0aCAtIDJdID8gKHdbdy5sZW5ndGggLSAzXSA9IHkuY2FsbCh3W3cubGVuZ3RoIC0gM10sIHdbdy5sZW5ndGggLSAyXSwgd1t3Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3Lmxlbmd0aCAtPSAyKSA6IChiID0gd1t3Lmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdbdy5sZW5ndGggLSAzXSA9IGIod1t3Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3Lmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHdbdy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IHdbdy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHdbdy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKGcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2god1t3Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W3cubGVuZ3RoIC0gMl0gPSB3W3cubGVuZ3RoIC0gMl1bclsyNyArIG1bXysrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gdy5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W3cubGVuZ3RoIC0gMV0gPj4+PSBiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3W3cubGVuZ3RoIC0gNF0gPSB5LmNhbGwod1t3Lmxlbmd0aCAtIDRdLCB3W3cubGVuZ3RoIC0gM10sIHdbdy5sZW5ndGggLSAyXSwgd1t3Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3Lmxlbmd0aCAtPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goKGZ1bmN0aW9uKGUsIHQsIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYywgaSA9IG4sIHUgPSBhLCBsID0gW10sIGggPSA0OTg7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1W2grK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGxbbC5sZW5ndGggLSAyXSA/IChsW2wubGVuZ3RoIC0gM10gPSBpLmNhbGwobFtsLmxlbmd0aCAtIDNdLCBsW2wubGVuZ3RoIC0gMl0sIGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aCAtPSAyKSA6IChjID0gbFtsLmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDNdID0gYyhsW2wubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChsW2wubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDJdID0gbFtsLmxlbmd0aCAtIDJdW3JbMzUgKyB1W2grK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDNdW2xbbC5sZW5ndGggLSAyXV0gPSBsW2wubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM10gPSBsW2wubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aCAtPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaChmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5wdXNoKGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSB3LnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdbdy5sZW5ndGggLSAxXSArPSBiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcucHVzaChwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHdbdy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHdbdy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHcucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LnB1c2goKGZ1bmN0aW9uKHQsIG8sIHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYywgaSA9IG4sIHUgPSBhLCBsID0gW10sIGggPSA1MDg7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh1W2grK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM11bbFtsLmxlbmd0aCAtIDJdXSA9IGxbbC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAzXSA9IGxbbC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChsW2wubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDJdID0gbFtsLmxlbmd0aCAtIDJdW3JbMzYgKyB1W2grK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBsW2wubGVuZ3RoIC0gMl0gPyAobFtsLmxlbmd0aCAtIDNdID0gaS5jYWxsKGxbbC5sZW5ndGggLSAzXSwgbFtsLmxlbmd0aCAtIDJdLCBsW2wubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggLT0gMikgOiAoYyA9IGxbbC5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAzXSA9IGMobFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wb3AoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEEoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuICgwLAogICAgICAgICAgICAgICAgICAgIGguZGVmYXVsdCkoQXJyYXkucHJvdG90eXBlKS5jYWxsKGUsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0OwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmRlZmF1bHQpKHQgPSAiMDAiICsgKDI1NSAmIGUpLnRvU3RyaW5nKDE2KSkuY2FsbCh0LCAtMikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKS5qb2luKCIiKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIEMoZSkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBuZXcgVWludDhBcnJheShlLmxlbmd0aCk7CiAgICAgICAgICAgICAgICByZXR1cm4gKDAsCiAgICAgICAgICAgICAgICAgICAgbC5kZWZhdWx0KShBcnJheS5wcm90b3R5cGUpLmNhbGwodCwgKGZ1bmN0aW9uKHQsIHIsIG4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbltyXSA9IGUuY2hhckNvZGVBdChyKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgICAgIEEodCkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBPKGUpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIG8sIHMsIGMsIGksIHUsIGwgPSBuLCBoID0gYSwgZiA9IFtdLCBnID0gNTE4OyA7ICkKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGhbZysrXSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgdCwgbyA9IG4sIHMgPSBhLCBjID0gW10sIGkgPSA2NjQ7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChzW2krK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMucHVzaChjW2MubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1tjLmxlbmd0aCAtIDJdID0gY1tjLmxlbmd0aCAtIDJdW3JbNDAgKyBzW2krK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnB1c2goRGF0YVZpZXcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnB1c2goQXJyYXlCdWZmZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW2MubGVuZ3RoIC0gMV0gPSAhY1tjLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMucHVzaChzW2krK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGMucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW2MubGVuZ3RoIC0gMV0gKz0gdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5wdXNoKHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBjLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY1tjLmxlbmd0aCAtIDFdID0gY1tjLmxlbmd0aCAtIDFdID09PSB0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW2MubGVuZ3RoIC0gNV0gPSBvLmNhbGwoY1tjLmxlbmd0aCAtIDVdLCBjW2MubGVuZ3RoIC0gNF0sIGNbYy5sZW5ndGggLSAzXSwgY1tjLmxlbmd0aCAtIDJdLCBjW2MubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5sZW5ndGggLT0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5wdXNoKG5ldyBBcnJheShzW2krK10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYy5wdXNoKEludDE2QXJyYXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW2MubGVuZ3RoIC0gM10gPSBuZXcgY1tjLmxlbmd0aCAtIDNdKGNbYy5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjLmxlbmd0aCAtPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlID0gY1tjLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjW2MubGVuZ3RoIC0gMl0gPSBjW2MubGVuZ3RoIC0gMl1bY1tjLmxlbmd0aCAtIDFdXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMubGVuZ3RoLS0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGYucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZltmLmxlbmd0aCAtIDFdICs9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChNYXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGZbZi5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGZbZi5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKGhbZysrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZbZi5sZW5ndGggLSA1XSA9IGwuY2FsbChmW2YubGVuZ3RoIC0gNV0sIGZbZi5sZW5ndGggLSA0XSwgZltmLmxlbmd0aCAtIDNdLCBmW2YubGVuZ3RoIC0gMl0sIGZbZi5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5sZW5ndGggLT0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGZbZi5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IGZbZi5sZW5ndGggLSAyXSA/IChmW2YubGVuZ3RoIC0gM10gPSBsLmNhbGwoZltmLmxlbmd0aCAtIDNdLCBmW2YubGVuZ3RoIC0gMl0sIGZbZi5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5sZW5ndGggLT0gMikgOiAodSA9IGZbZi5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmW2YubGVuZ3RoIC0gM10gPSB1KGZbZi5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZbZi5sZW5ndGggLSA0XSA9IGwuY2FsbChmW2YubGVuZ3RoIC0gNF0sIGZbZi5sZW5ndGggLSAzXSwgZltmLmxlbmd0aCAtIDJdLCBmW2YubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYubGVuZ3RoIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZi5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChVaW50OEFycmF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLnB1c2goZltmLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmW2YubGVuZ3RoIC0gMl0gPSBmW2YubGVuZ3RoIC0gMl1bclszNyArIGhbZysrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gZltmLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmW2YubGVuZ3RoIC0gM10gPSBuZXcgZltmLmxlbmd0aCAtIDNdKGZbZi5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5sZW5ndGggLT0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGYucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZltmLmxlbmd0aCAtIDFdICU9IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGZbZi5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGYucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZltmLmxlbmd0aCAtIDFdIC89IHU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChEYXRhVmlldyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucG9wKCkgPyArK2cgOiBnICs9IGhbZ107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgKz0gaFtnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wdXNoKHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucHVzaChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBmW2YubGVuZ3RoIC0gMV0gPyBmW2YubGVuZ3RoIC0gMl0gPSBsLmNhbGwoZltmLmxlbmd0aCAtIDJdLCBmW2YubGVuZ3RoIC0gMV0pIDogKHUgPSBmW2YubGVuZ3RoIC0gMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZltmLmxlbmd0aCAtIDJdID0gdSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLnB1c2goQXJyYXlCdWZmZXIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIFQoZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIEEoTyhlKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBEKCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgZSwgdCwgbywgcywgYywgaSwgdSwgbCwgaCwgZywgcCA9IG4sIGQgPSBhLCB5ID0gW10sIG0gPSA3Mjk7IDsgKQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZFttKytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAyXVtyWzQxICsgZFttKytdXV0gPSB5W3kubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB5W3kubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSA0XSA9IHAuY2FsbCh5W3kubGVuZ3RoIC0gNF0sIHlbeS5sZW5ndGggLSAzXSwgeVt5Lmxlbmd0aCAtIDJdLCB5W3kubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkubGVuZ3RoIC09IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB5W3kubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChmKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDFdID0geVt5Lmxlbmd0aCAtIDFdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDFdID0geVt5Lmxlbmd0aCAtIDFdW3JbNDEgKyBkW20rK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2godSsrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHlbeS5sZW5ndGggLSAyXSA/ICh5W3kubGVuZ3RoIC0gM10gPSBwLmNhbGwoeVt5Lmxlbmd0aCAtIDNdLCB5W3kubGVuZ3RoIC0gMl0sIHlbeS5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGggLT0gMikgOiAoZyA9IHlbeS5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5W3kubGVuZ3RoIC0gM10gPSBnKHlbeS5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKE1hdGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2gobCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSB5LnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAxXSArPSBnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2goMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5LnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHlbeS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDJdID0geVt5Lmxlbmd0aCAtIDJdW3lbeS5sZW5ndGggLSAxXV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDNdW3lbeS5sZW5ndGggLSAyXV0gPSB5W3kubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGggLT0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2godSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh5W3kubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAyXSA9IHlbeS5sZW5ndGggLSAyXVtyWzQxICsgZFttKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKG8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gKz0gZFttXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKG5ldyBBcnJheShkW20rK10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wb3AoKSA/IG0gKz0gZFttXSA6ICsrbTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IHkucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDFdICo9IGc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSB5LnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAxXSA9IHlbeS5sZW5ndGggLSAxXSA8IGc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAxXSA/ICgrK20sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLS15Lmxlbmd0aCkgOiBtICs9IGRbbV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2goZFttKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHJbNDEgKyBkW20rK11dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHlbeS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHlbeS5sZW5ndGggLSAxXSA/IHlbeS5sZW5ndGggLSAyXSA9IHAuY2FsbCh5W3kubGVuZ3RoIC0gMl0sIHlbeS5sZW5ndGggLSAxXSkgOiAoZyA9IHlbeS5sZW5ndGggLSAyXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5W3kubGVuZ3RoIC0gMl0gPSBnKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSB5LnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAxXSAtPSBnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2goZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KHVFKTsKICAgIHZhciBmRSA9IE9iamVjdC5mcmVlemUoewogICAgICAgIF9fcHJvdG9fXzogbnVsbCwKICAgICAgICBlbnZDb2xsZWN0OiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciB0ID0ge30KICAgICAgICAgICAgICAgICwgciA9IFsicHAiLCAic3VhIiwgInJhbmRvbSIsICJ2IiwgImV4dGVuZCJdOwogICAgICAgICAgICBmdW5jdGlvbiBuKG4sIGEpIHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgKDEgPT09IGUgJiYgTVMocikuY2FsbChyLCBuKSB8fCAwID09PSBlKSAmJiAodFtuXSA9IGEoKSkKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG4oIndjIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gL0Nocm9tZS8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5jaHJvbWUgPyAxIDogMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oIndkIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci53ZWJkcml2ZXIgPyAxIDogMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigibCIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubGFuZ3VhZ2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oImxzIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5sYW5ndWFnZXMuam9pbigiLCIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJtbCIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IubWltZVR5cGVzLmxlbmd0aAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigicGwiLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLnBsdWdpbnMubGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJhdiIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYXZpZ2F0b3IuYXBwVmVyc2lvbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigidWEiLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oInN1YSIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IFJlZ0V4cCgiTW96aWxsYS81LjAgXFwoKC4qPylcXCkiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCByID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICYmIHJbMV0gPyByWzFdIDogIiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oInBwIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCByID0gaEUoInB3ZHRfaWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gaEUoInBpbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSBoRSgicHRfcGluIik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICYmICh0LnAxID0gciksCiAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgKHQucDIgPSBuKSwKICAgICAgICAgICAgICAgICAgICAgICAgYSAmJiAodC5wMyA9IGEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigiZXh0ZW5kIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQud2QgPSB3aW5kb3cubmF2aWdhdG9yLndlYmRyaXZlciA/IDEgOiAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmwgPSBuYXZpZ2F0b3IubGFuZ3VhZ2VzICYmIDAgIT09IG5hdmlnYXRvci5sYW5ndWFnZXMubGVuZ3RoID8gMCA6IDEKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubHMgPSBuYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgiY2RjX2Fkb1Fwb2FzbmZhNzZwZmNaTG1jZmxfQXJyYXkiaW4gd2luZG93IHx8ICJjZGNfYWRvUXBvYXNuZmE3NnBmY1pMbWNmbF9Qcm9taXNlImluIHdpbmRvdyB8fCAiY2RjX2Fkb1Fwb2FzbmZhNzZwZmNaTG1jZmxfU3ltYm9sImluIHdpbmRvdykgJiYgKHIgfD0gMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIiRjaHJvbWVfYXN5bmNTY3JpcHRJbmZvImluIHdpbmRvdy5kb2N1bWVudCB8fCAiJGNkY19hc2RqZmxhc3V0b3BmaHZjWkxtY2ZsXyJpbiB3aW5kb3cuZG9jdW1lbnQpICYmIChyIHw9IDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgL0hlYWRsZXNzQ2hyb21lLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSAmJiAociB8PSA0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9QaGFudG9tSlMvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpICYmIChyIHw9IDgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdpbmRvdy5jYWxsUGhhbnRvbSB8fCB3aW5kb3cuX3BoYW50b20pICYmIChyIHw9IDE2KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LndrID0gcgogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5idTEgPSByeAogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4sIGEsIG8sIHMsIGMgPSAwLCBpID0gLTEgIT09IHJtKG4gPSB3aW5kb3cubG9jYXRpb24uaG9zdCkuY2FsbChuLCAic3ouamQuY29tIikgfHwgLTEgIT09IHJtKGEgPSB3aW5kb3cubG9jYXRpb24uaG9zdCkuY2FsbChhLCAicHB6aC5qZC5jb20iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgLTEgIT09IHJtKG8gPSBkb2N1bWVudC5ib2R5LmlubmVySFRNTCkuY2FsbChvLCAiZGlhbnRvdXNoaS5jb20iKSAmJiAoYyB8PSAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgLTEgIT09IHJtKHMgPSBkb2N1bWVudC5ib2R5LmlubmVySFRNTCkuY2FsbChzLCAieGlhb3dhbmdzaGVuLmNvbSIpICYmIChjIHw9IDIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuYnUyID0gYwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmJ1MiA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5idTMgPSBkb2N1bWVudC5oZWFkLmNoaWxkRWxlbWVudENvdW50CiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSwgbCwgaCA9IDAsIGYgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBudWxsICE9IHByb2Nlc3MucmVsZWFzZSAmJiAibm9kZSIgPT09IHByb2Nlc3MucmVsZWFzZS5uYW1lLCBnID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIHByb2Nlc3MgJiYgbnVsbCAhPSBwcm9jZXNzLnZlcnNpb25zICYmIG51bGwgIT0gcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLCBwID0gInVuZGVmaW5lZCIgIT0gdHlwZW9mIERlbm8gJiYgdm9pZCAwICE9PSBEZW5vLnZlcnNpb24gJiYgdm9pZCAwICE9PSBEZW5vLnZlcnNpb24uZGVubywgdiA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBCdW4sIGIgPSB2b2lkIDAgIT09IGpnICYmIC0xID09PSAobnVsbCA9PT0gKHUgPSBPZyhqZywgIndpbmRvdyIpKSB8fCB2b2lkIDAgPT09IHUgfHwgbnVsbCA9PT0gKHUgPSB1LmdldCkgfHwgdm9pZCAwID09PSB1ID8gdm9pZCAwIDogcm0obCA9IHUudG9TdHJpbmcoKSkuY2FsbChsLCAiW25hdGl2ZSBjb2RlXSIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmIHx8IGcpICYmIChoIHw9IDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcCAmJiAoaCB8PSAyKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgJiYgKGggfD0gNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiICYmIChoIHw9IDgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuYnU0ID0gaAogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmJ1NCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBrID0gTl8oIm1haW4uc2lnbiNfX2RldGVjdGluZyIsIHt9KS5xdWVyeVNlbGVjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgL3B1cHBldGVlci8udGVzdChrKSAmJiAoZCB8PSAxKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9waGFudG9tanMvLnRlc3QoaykgJiYgKGQgfD0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IG5ldyBFcnJvcigidGVzdCBlcnIiKS5zdGFjay50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgL25vZGU6aW50ZXJuYWxcL3Byb29jZXMvLnRlc3QoeSkgJiYgKGQgfD0gNCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5idTUgPSBkCiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuYnU1ID0gMAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmJ1NiA9IGRvY3VtZW50LmJvZHkuY2hpbGRFbGVtZW50Q291bnQKICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gTl8oIm1haW4uc2lnbiNfX2RldGVjdGluZyIsIHt9KS5xdWVyeVNlbGVjdG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IG5ldyBSZWdFeHAoIi4qP2Nocm9tZS1leHRlbnNpb246XFwvXFwvKC4qPylcXC8uKj8iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIF8gPSBtLm1hdGNoKHcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8gJiYgX1sxXSAmJiAodC5idTcgPSBfWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigicHAxIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBoRSgicHdkdF9pZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBoRSgicGluIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IGhFKCJwdF9waW4iKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ICYmICFyICYmICFuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNvb2tpZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJ3IiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5zY3JlZW4ud2lkdGgKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oImgiLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LnNjcmVlbi5oZWlnaHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oIm93IiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5vdXRlcldpZHRoCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJvaCIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cub3V0ZXJIZWlnaHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oInVybCIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJvZyIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5vcmlnaW4KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oInBmIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IucGxhdGZvcm0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oInByIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJyZSIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5yZWZlcnJlcgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigicmFuZG9tIiwgKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpfKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDEyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGljdFR5cGU6ICJtYXgiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRGljdDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgICAgICAgbigicmVmZXJlciIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IFJlZ0V4cCgiW14/XSoiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCByID0gZG9jdW1lbnQucmVmZXJyZXIubWF0Y2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByICYmIHJbMF0gPyByWzBdIDogIiIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oInYiLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHgKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oImJ1MiIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gbmV3IEVycm9yKCJ0ZXN0IGVyciIpLnN0YWNrLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgciA9IHQuc3BsaXQoIlxuIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IHIubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbiA+IDEgPyByW24gLSAxXSA6IHQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oImNhbnZhcyIsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgciA9IHQuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZmlsbFN0eWxlID0gInJlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmZpbGxSZWN0KDMwLCAxMCwgMjAwLCAxMDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5zdHJva2VTdHlsZSA9ICIjMWEzYmMxIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIubGluZVdpZHRoID0gNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIubGluZUNhcCA9ICJyb3VuZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmFyYyg1MCwgNTAsIDIwLCAwLCBNYXRoLlBJLCAhMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnN0cm9rZSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5maWxsU3R5bGUgPSAiIzQyZTFhMiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmZvbnQgPSAiMTUuNHB4ICdBcmlhbCciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci50ZXh0QmFzZWxpbmUgPSAiYWxwaGFiZXRpYyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLmZpbGxUZXh0KCJQUiBmbGFja3MgcXVpeiBneW06IFRWIERKIGJveCB3aGVuPyDimKAiLCAxNSwgNjApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci5zaGFkb3dPZmZzZXRYID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuc2hhZG93T2Zmc2V0WSA9IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnNoYWRvd0NvbG9yID0gIndoaXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuZmlsbFN0eWxlID0gInJnYmEoMCwgMCwgMjAwLCAwLjUpIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuZm9udCA9ICI2MHB4ICdOb3QgYSByZWFsIGZvbnQnIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIuZmlsbFRleHQoIk5v6aqXIiwgNDAsIDgwKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEtTKCJlbnZDb2xsZWN0Ii5jb25jYXQodC50b0RhdGFVUkwoKSkpLnRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIG4oIndlYmdsRnAiLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgciA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmNsZWFyQ29sb3IoMCwgMCwgMCwgMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbmFibGUodC5ERVBUSF9URVNUKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmRlcHRoRnVuYyh0LkxFUVVBTCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jbGVhcih0LkNPTE9SX0JVRkZFUl9CSVQgfCB0LkRFUFRIX0JVRkZFUl9CSVQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIlsiICsgZVswXSArICIsICIgKyBlWzFdICsgIl0iCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gZS5nZXRDb250ZXh0KCJ3ZWJnbCIpIHx8IGUuZ2V0Q29udGV4dCgiZXhwZXJpbWVudGFsLXdlYmdsIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCB8fCAodCA9IG51bGwpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQKICAgICAgICAgICAgICAgICAgICAgICAgfSgpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSB0LmNyZWF0ZUJ1ZmZlcigpOwogICAgICAgICAgICAgICAgICAgICAgICB0LmJpbmRCdWZmZXIodC5BUlJBWV9CVUZGRVIsIGEpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IG5ldyBGbG9hdDMyQXJyYXkoWy0uMiwgLS45LCAwLCAuNCwgLS4yNiwgMCwgMCwgLjczMjEzNDQ0NCwgMF0pOwogICAgICAgICAgICAgICAgICAgICAgICB0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsIG8sIHQuU1RBVElDX0RSQVcpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5pdGVtU2l6ZSA9IDMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLm51bUl0ZW1zID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSB0LmNyZWF0ZVByb2dyYW0oKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjID0gdC5jcmVhdGVTaGFkZXIodC5WRVJURVhfU0hBREVSKTsKICAgICAgICAgICAgICAgICAgICAgICAgdC5zaGFkZXJTb3VyY2UoYywgImF0dHJpYnV0ZSB2ZWMyIGF0dHJWZXJ0ZXg7dmFyeWluZyB2ZWMyIHZhcnlpblRleENvb3JkaW5hdGU7dW5pZm9ybSB2ZWMyIHVuaWZvcm1PZmZzZXQ7dm9pZCBtYWluKCl7dmFyeWluVGV4Q29vcmRpbmF0ZT1hdHRyVmVydGV4K3VuaWZvcm1PZmZzZXQ7Z2xfUG9zaXRpb249dmVjNChhdHRyVmVydGV4LDAsMSk7fSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jb21waWxlU2hhZGVyKGMpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHQuY3JlYXRlU2hhZGVyKHQuRlJBR01FTlRfU0hBREVSKTsKICAgICAgICAgICAgICAgICAgICAgICAgdC5zaGFkZXJTb3VyY2UoaSwgInByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O3ZhcnlpbmcgdmVjMiB2YXJ5aW5UZXhDb29yZGluYXRlO3ZvaWQgbWFpbigpIHtnbF9GcmFnQ29sb3I9dmVjNCh2YXJ5aW5UZXhDb29yZGluYXRlLDAsMSk7fSIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5jb21waWxlU2hhZGVyKGkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5hdHRhY2hTaGFkZXIocywgYyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmF0dGFjaFNoYWRlcihzLCBpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubGlua1Byb2dyYW0ocyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnVzZVByb2dyYW0ocyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnZlcnRleFBvc0F0dHJpYiA9IHQuZ2V0QXR0cmliTG9jYXRpb24ocywgImF0dHJWZXJ0ZXgiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMub2Zmc2V0VW5pZm9ybSA9IHQuZ2V0VW5pZm9ybUxvY2F0aW9uKHMsICJ1bmlmb3JtT2Zmc2V0IiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHMudmVydGV4UG9zQXJyYXkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHMudmVydGV4UG9zQXR0cmliLCBhLml0ZW1TaXplLCB0LkZMT0FULCAhMSwgMCwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnVuaWZvcm0yZihzLm9mZnNldFVuaWZvcm0sIDEsIDEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5kcmF3QXJyYXlzKHQuVFJJQU5HTEVfU1RSSVAsIDAsIGEubnVtSXRlbXMpLAogICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHQuY2FudmFzICYmIG4ucHVzaCh0LmNhbnZhcy50b0RhdGFVUkwoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goImV4dGVuc2lvbnM6IiArIHQuZ2V0U3VwcG9ydGVkRXh0ZW5zaW9ucygpLmpvaW4oIjsiKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goImV4dGVuc2lvbnM6IiArIHQuZ2V0U3VwcG9ydGVkRXh0ZW5zaW9ucygpLmpvaW4oIjsiKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goIncxIiArIHIodC5nZXRQYXJhbWV0ZXIodC5BTElBU0VEX0xJTkVfV0lEVEhfUkFOR0UpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goIncyIiArIHIodC5nZXRQYXJhbWV0ZXIodC5BTElBU0VEX1BPSU5UX1NJWkVfUkFOR0UpKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goInczIiArIHQuZ2V0UGFyYW1ldGVyKHQuQUxQSEFfQklUUykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3NCIgKyAodC5nZXRDb250ZXh0QXR0cmlidXRlcygpLmFudGlhbGlhcyA/ICJ5ZXMiIDogIm5vIikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3NSIgKyB0LmdldFBhcmFtZXRlcih0LkJMVUVfQklUUykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3NiIgKyB0LmdldFBhcmFtZXRlcih0LkRFUFRIX0JJVFMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCgidzciICsgdC5nZXRQYXJhbWV0ZXIodC5HUkVFTl9CSVRTKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goInc4IiArIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCwgciA9IGUuZ2V0RXh0ZW5zaW9uKCJFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMiKSB8fCBlLmdldEV4dGVuc2lvbigiV0VCS0lUX0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYyIpIHx8IGUuZ2V0RXh0ZW5zaW9uKCJNT1pfRVhUX3RleHR1cmVfZmlsdGVyX2FuaXNvdHJvcGljIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIgPyAoMCA9PT0gKHQgPSBlLmdldFBhcmFtZXRlcihyLk1BWF9URVhUVVJFX01BWF9BTklTT1RST1BZX0VYVCkpICYmICh0ID0gMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQpIDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0KSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goInc5IiArIHQuZ2V0UGFyYW1ldGVyKHQuTUFYX0NPTUJJTkVEX1RFWFRVUkVfSU1BR0VfVU5JVFMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCgidzEwIiArIHQuZ2V0UGFyYW1ldGVyKHQuTUFYX0NVQkVfTUFQX1RFWFRVUkVfU0laRSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MTEiICsgdC5nZXRQYXJhbWV0ZXIodC5NQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goIncxMiIgKyB0LmdldFBhcmFtZXRlcih0Lk1BWF9SRU5ERVJCVUZGRVJfU0laRSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MTMiICsgdC5nZXRQYXJhbWV0ZXIodC5NQVhfVEVYVFVSRV9JTUFHRV9VTklUUykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MTQiICsgdC5nZXRQYXJhbWV0ZXIodC5NQVhfVEVYVFVSRV9TSVpFKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goIncxNSIgKyB0LmdldFBhcmFtZXRlcih0Lk1BWF9WQVJZSU5HX1ZFQ1RPUlMpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCgidzE2IiArIHQuZ2V0UGFyYW1ldGVyKHQuTUFYX1ZFUlRFWF9BVFRSSUJTKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goIncxNyIgKyB0LmdldFBhcmFtZXRlcih0Lk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MTgiICsgdC5nZXRQYXJhbWV0ZXIodC5NQVhfVkVSVEVYX1VOSUZPUk1fVkVDVE9SUykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MTkiICsgcih0LmdldFBhcmFtZXRlcih0Lk1BWF9WSUVXUE9SVF9ESU1TKSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MjAiICsgdC5nZXRQYXJhbWV0ZXIodC5SRURfQklUUykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MjEiICsgdC5nZXRQYXJhbWV0ZXIodC5SRU5ERVJFUikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MjIiICsgdC5nZXRQYXJhbWV0ZXIodC5TSEFESU5HX0xBTkdVQUdFX1ZFUlNJT04pKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaCgidzIzIiArIHQuZ2V0UGFyYW1ldGVyKHQuU1RFTkNJTF9CSVRTKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goIncyNCIgKyB0LmdldFBhcmFtZXRlcih0LlZFTkRPUikpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKCJ3MjUiICsgdC5nZXRQYXJhbWV0ZXIodC5WRVJTSU9OKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHQuZ2V0RXh0ZW5zaW9uKCJXRUJHTF9kZWJ1Z19yZW5kZXJlcl9pbmZvIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ICYmIChuLnB1c2goInd1djoiICsgdC5nZXRQYXJhbWV0ZXIodS5VTk1BU0tFRF9WRU5ET1JfV0VCR0wpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goInd1cjoiICsgdC5nZXRQYXJhbWV0ZXIodS5VTk1BU0tFRF9SRU5ERVJFUl9XRUJHTCkpKQogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gS1MoImVudkNvbGxlY3QiLmNvbmNhdChuLmpvaW4oIsKnIikpKS50b1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKSksCiAgICAgICAgICAgICAgICBuKCJjY24iLCAoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApKSwKICAgICAgICAgICAgICAgIHQKICAgICAgICB9CiAgICB9KQogICAgICAgICwgZ0UgPSByKGZFKTsKICAgIHJldHVybiBmdW5jdGlvbihlKSB7CiAgICAgICAgZnVuY3Rpb24gdChlKSB7CiAgICAgICAgICAgIGZvciAodmFyIHQgPSAiIiwgciA9IDA7IHIgPCBlLmxlbmd0aDsgKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGUuY2hhckNvZGVBdChyKyspOwogICAgICAgICAgICAgICAgdCArPSBuID4gNjMgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKDQzIF4gbikgOiAzNSA9PSBuID8gZS5jaGFyQXQocisrKSA6IFN0cmluZy5mcm9tQ2hhckNvZGUobikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdAogICAgICAgIH0KICAgICAgICB2YXIgciA9IFsiIiwgdCgiT05NSl5HXyIpLCB0KCJYX1lCRUxCTVIiKSwgdCgiW0pZWE4iKSwgdCgiX0RpSlhONjQiKSwgdCgidHRbSllYTiNUREBORSIpLCB0KCJGSl9IQyIpLCB0KCJ1cDEyM3YocFMrdnAxMjN2KSsiKSwgdCgiWFtHQl8iKSwgdCgidE9OTUpeR19qR0xEWUJfQ0YiKSwgdCgiSEpHRyIpLCAibG9nIiwgdCgidE9OSV5MIiksICIiLCB0KCJnZGhqZ3RqZ2xkeWIjVGNmdHt5bm1icyIpLCAiKyIsICJ4IiwgdCgidHRKR0xEWUJfQ0YiKSwgdCgiT05NSl5HXyIpLCB0KCJISkdHIiksIHQoIk9OTUpeR18iKSwgdCgiSEpHRyIpLCB0KCJBREJFIiksICImIiwgdCgiX0R4X1lCRUwiKSwgImxvZyIsIHQoInRPTkleTCIpLCAia2V5IiwgIjoiLCB0KCJdSkdeTiIpLCB0KCJPTk1KXkdfIiksIHQoIkhKR0ciKSwgdCgiQURCRSIpLCAiJiIsICI6IiwgIiIsIHQoIl9EeF9ZQkVMIiksICJsb2ciLCB0KCJ0T05JXkwiKSwgImtleSIsICJrZXkiLCAiOiIsIHQoIl1KR15OIiksICIiLCB0KCJPTk1KXkdfIiksIHQoIk1EWUZKXyIpLCAiNDciLCB0KCJ0QlhlRFlGSkciKSwgdCgidHRMTkVgTlIiKSwgdCgidF9EQE5FIiksIHQoInRNQkVMTllbWUJFXyIpLCB0KCJ0SltbYk8iKSwgdCgiSkdMRFgiKSwgdCgiX0R4X1lCRUwiKSwgdCgiTE5FZ0RISkcjVGAiKSwgdCgidE9OTUpeR18jVERATkUiKSwgdCgidHRMTkVvTk1KXkdfYE5SIiksIHQoInR0TE5FeEJMRSIpLCB0KCJ0dExORXhCTEVvTk1KXkdfIiksIHQoIkhKR0ciKSwgdCgiQURCRSIpLCAiLCIsIHQoIm5lfWJ5ZGVmbmUjVCIpLCB0KCJ0dExORXhCTEV7SllKRlgiKSwgImxvZyIsIHQoInRPTkleTCIpLCAia2V5IiwgdCgiWEJMRXhfWSIpLCB0KCJ0WF9AIiksIHQoInRYX04iKSwgdCgiQzVYXyIpLCB0KCJ0REV4QkxFIiksIHQoIkhET04iKSwgdCgiRk5YWEpMTiIpLCB0KCJuWVloRE9OWCIpLCB0KCJsbmVueWojVG50eGJsZWojVH55bnRtamJnbm8iKSwgdCgiI1RkYG5ldG5meyNUciIpLCAia2V5IiwgdCgiTkVdaERHR05IXyIpLCB0KCJ0TUJFTE5ZW1lCRV8iKSwgImZwIiwgdCgiT05NSl5HXyIpLCAibG9nIiwgdCgidE9OSV5MIiksIHQoIk5FSFlSW18iKSwgdCgiW0pZWE4iKSwgIjAxIiwgIjAyIiwgIjAzIiwgIjA0IiwgIjA1IiwgIjA2IiwgIjA3IiwgIjA4IiwgdCgiQURCRSIpLCAiIiwgIml2IiwgdCgiTkVIRE9OIiksIHQoIkhCW0NOWV9OU18iKSwgdCgiT05NSl5HXyIpLCB0KCIjd1lKWyIpLCB0KCJFTlNfIiksIHQoIltZTl0iKSwgMCwgNSwgMTAsIDEzLCAiZW5kIiwgdCgiT05NSl5HXyIpLCB0KCJ0dEhDTkhAe0pZSkZYIiksIHQoIkpJWV5bXyIpLCB0KCJZTl9eWUUiKSwgdCgidHRZTlpeTlhfb05bWCIpLCB0KCJ0dEhER0dOSF8iKSwgdCgidHRGSkBOeEJMRSIpLCAibG9nIiwgdCgidE9OSV5MIiksICJtcyIsIHQoIkhKX0hDIiksICJ0MCIsIHQoInRERXhCTEUiKSwgdCgibllZaERPTlgiKSwgdCgifmVjamVvZ25vdG55eWR5IiksIHQoIkhET04iKSwgdCgiRk5YWEpMTiIpLCB0KCJYX0RbIildCiAgICAgICAgICAgICwgbiA9IEZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsCiAgICAgICAgICAgICwgbyA9IFs1LCAxNywgNzksIDg4LCAxMiwgNzksIDY3LCAwLCA4NywgNzksIDQxLCA3NiwgNTUsIDQyMSwgNjYsIDEwLCA3OSwgNjcsIDAsIDU2LCA1NCwgMjEsIDU0LCA5NiwgNTQsIDMsIDU0LCA4LCA1NCwgNzcsIDc5LCAyOSwgNzQsIDEsIDgyLCAyLCA0LCA3NCwgMSwgODIsIDMsIDUxLCA3OSwgMjIsIDc0LCA0LCA5MSwgNSwgODIsIDUsIDU2LCA1NSwgLTgwMywgNTUsIC03NzExLCA1NCwgNTUsIDg1MzAsIDU0LCA1NSwgNTI2LCA1NSwgODkxNSwgNTQsIDU1LCAtOTQxMywgNTQsIDg5LCA2NiwgNjYsIDY2LCAzNiwgNzksIDg1LCA4MiwgNiwgMjYsIDcsIDY2LCA4MSwgNzksIDM3LCA5NywgNDMsIDM3LCA1NSwgLTUxNiwgNTUsIC02ODI3LCA1NCwgNTUsIDczNDMsIDU0LCAyNywgNzEsIDc5LCAxNiwgODIsIDgsIDY3LCAwLCA2NiwgOTIsIDc5LCA3MCwgOSwgMTQsIDc5LCA2NywgMCwgNDIsIDc5LCA1MSwgNzksIDU4LCA3NCwgMSwgOTEsIDIzLCA2NiwgODIsIDEwLCAyMywgNDUsIDM4LCA3OSwgNTEsIDc5LCAyMiwgNzQsIDExLCA5MSwgNzAsIDEyLCA0MSwgNzYsIDU1LCA0MzUsIDY2LCA4NiwgNTQsIDQxLCA3NiwgNTUsIDQ1MSwgNjYsIDU0LCA4NSwgNTQsIDQxLCA3NiwgNTUsIDQyMiwgNjYsIDU0LCA5OCwgNTQsIDM4LCA3OSwgOTgsIDczLCAzMiwgNzksIDY5LCA0MSwgNTcsIDM3LCAyMiwgNDcsIDc0LCA2NCwgMTQsIDAsIDE2LCA3LCAxLCAzOSwgMzcsIDM5LCAyNSwgNjksIDMzLCAyOSwgODcsIDc0LCA0NywgMTMsIDkzLCAzMywgMiwgMiwgNiwgMywgMjIsIDE0LCAwLCA2MSwgMzksIDg2LCA4MCwgNCwgMjksIDk2LCAyMywgNTMsIDM5LCA5NSwgNjksIDMsIDIzLCA4NiwgODAsIDQsIDI5LCA2MSwgMjMsIDUzLCA5NSwgNjksIDMsIDEyLCA4NiwgODAsIDQsIDI5LCA5NiwgMjMsIDUzLCA5NSwgNjksIDMsIDEsIDMsIDM4LCAxOSwgNjksIDY0LCA3LCA1LCAxMCwgNjMsIDIsIDE5LCAxNCwgMiwgMTcsIDcxLCAxNCwgMywgMTcsIDI2LCAyMiwgODAsIDYsIDc5LCAzNywgNDUsIDksIDkxMTUsIDksIC0zNTkwLCAzOSwgOSwgLTU1MjUsIDM5LCA3NiwgNTYsIDMsIDM3LCA2MCwgNjksIDczLCA3MywgNjIsIDIyLCA2NCwgMjIsIDU2LCAyLCAwLCA1OCwgMjYsIDI0LCA2MywgMSwgMjYsIDQ1LCAyMywgNjMsIDIsIDQ5LCAzLCAyNCwgOTUsIDIyLCA2NCwgMjIsIDgsIDIsIDAsIDU4LCA4NSwgMTAsIDc3LCA4NSwgNzcsIDI0LCA2MywgNCwgMTcsIDIsIDAsIDI0LCA0MywgMjIsIDY0LCAyMiwgNDQsIDIsIDUsIDU4LCA0MiwgNiwgMTEsIDcyLCA1LCA0NDQsIDI0LCAxMCwgNzcsIDExLCA3MiwgNSwgNDA3LCAyNCwgNzcsIDYsIDc3LCAyMywgMjIsIDYsIDU5LCA1NSwgMjgsIDUyLCAwLCAzMSwgMSwgODcsIDI4LCA1MiwgMiwgODcsIDEzLCA4NCwgODYsIDg0LCA4MSwgMzcsIDg0LCA2NywgODQsIDk0LCA5OCwgMCwgNSwgNjcsIDg0LCAyNSwgOTgsIDAsIDUsIDgwLCA4OSwgMjQsIDEsIDgwLCA1MiwgNTEsIDI4LCA4OSwgMjQsIDEsIDg2LCA4NywgNTEsIDI0LCAyLCA5LCAzLCA4OSwgNzMsIDg0LCA2LCA3LCA2NywgMTcsIDE0LCA4MywgMzk5LCA4OSwgNTcsIDQ2LCA5LCA0LCA1NywgODMsIDIsIDE3LCAxNCwgODMsIDM5OSwgODksIDU3LCA4MywgMywgOSwgMywgNTcsIDgzLCA0LCAxNywgMTQsIDgzLCA0NjYsIDg5LCA1NywgODMsIDUsIDksIDQsIDU3LCA4MywgNiwgMTcsIDE0LCA4MywgNDY2LCA4OSwgNTcsIDU4LCA4NCwgMywgMTMsIDYwLCA5LCAzNiwgMjQsIDIsIDksIDUsIDg5LCA3MywgODQsIDY3LCA4NCwgNDMsIDk4LCAwLCA1LCA4MiwgMywgNjgsIDgyLCA2OCwgODksIDI0LCA2LCA3NiwgOTgsIDAsIDg5LCAyNiwgODQsIDY3LCA4NCwgMjksIDk4LCA3LCA1LCA1NiwgOCwgMTcsIDE0LCA4MywgNDUzLCA4OSwgMywgNjgsIDE3LCAxNCwgODMsIDQwNywgODksIDY4LCA3NCwgNjgsIDUxLCA4NCwgNzQsIDIxLCA0MSwgOTksIDI3LCAwLCAyOCwgMzgsIDEyLCA0NjYsIDg0LCA0NywgOTgsIDEwLCA5OSwgMjcsIDAsIDI4LCAzOCwgMTIsIDM5OSwgODQsIDQ3LCA2OSwgNzcsIDYwLCAxMiwgMCwgNjcsIDEsIDUzLCA2MCwgMTIsIDIsIDUzLCA2MiwgNzYsIDY1LCA5MCwgNTcsIDMyLCAwLCA1NiwgNTcsIDg4LCA1NywgNTAsIDIxLCAxLCA5NSwgNDIsIDczLCA1NywgODgsIDU3LCAyMywgMjEsIDIsIDk1LCAzMCwgNDUsIDUsIDM3LCA0MTUsIDUxLCA4NiwgODQsIDU3LCA5LCAzMiwgMywgNiwgNzksIDU3LCA3NSwgNCwgMTUsIDI0LCAzMywgNjYsIDUsIDc1LCA2LCA3NSwgNywgOCwgNzUsIDgsIDc1LCA5LCA1OSwgNjYsIDEwLCA0MiwgOTIsIDMsIDMyLCAwLCA1NiwgMjUsIDI2LCAzMywgODgsIDU3LCAzLCAyMSwgMTEsIDk1LCA3NSwgNywgNTEsIDY5LCAxMiwgNTcsIDMzLCA2NiwgMTMsIDc1LCAxMiwgNzUsIDcsIDgsIDc1LCA4LCA0MSwgNTYsIDU3LCA0OCwgNCwgNTcsIDExLCAxNSwgMTMzLCAzMywgNjYsIDE0LCAxMSwgOTQsIDg2LCA0MCwgNTcsIDMzLCA2NiwgMTUsIDExLCA5NCwgODYsIDE4LCA1NywgODgsIDU3LCA2MiwgMjEsIDEsIDk1LCA5NCwgNTEsIDY2LCAxNiwgOTQsIDQ5LCA4NiwgNjYsIDE3LCAzMiwgMTgsIDUxLCA4MywgNTcsIDY0LCAyMSwgMTksIDQ0LCA1NywgMzMsIDY2LCAyMCwgMTQsIDMwLCA5LCA0NiwgMzEsIDU5LCA2MCwgNTcsIDg4LCA1NywgNzgsIDIxLCAyMSwgOTUsIDc1LCAyMiwgNDUsIDUsIDM3LCA0MzcsIDUxLCA4OCwgNTcsIDcxLCAyMSwgMSwgOTUsIDQ4LCAxMSwgMzksIDIzLCAxNCwgMzksIDI0LCA5NiwgMzksIDI1LCA0NywgMzksIDI2LCA2MywgMzksIDI3LCA1LCAzNywgMTczOSwgMzcsIC02MTE5LCA2LCAzNywgNDM4MiwgNiwgMzQsIDYsIDg2LCA1NywgNDgsIDk2LCAzOSwgMjUsIDQ3LCAzOSwgMjYsIDYzLCAzOSwgMjcsIDQsIDU3LCAzMywgNjYsIDI4LCA0OCwgODgsIDM5LCAyOSwgNDUsIDUsIDM3LCAzODgsIDUxLCAzOSwgMzAsIDUxLCA1NywgODAsIDY3LCAyNSwgNTIsIDc1LCA2LCA5MiwgMywgNzUsIDEyLCAxNSwgMjIsIDMzLCA2NiwgMjgsIDQ4LCAzOCwgMjEsIDMxLCAyMSwgMzIsIDM5LCAyOSwgNDUsIDUsIDM3LCA0MTIsIDUxLCAzOSwgMzAsIDUxLCAyNSwgMjAsIDMzLCA2NiwgMjgsIDQ4LCAzOCwgMjEsIDMxLCAyMSwgMzMsIDM5LCAyOSwgNDUsIDUsIDM3LCA0NDMsIDUxLCAzOSwgMzAsIDUxLCA1NywgODAsIDY3LCAxMywgNjIsIDkxLCAwLCAxMSwgOTQsIDU3LCA2OCwgOTcsIDk1LCA5NywgOTAsIDIxLCAwLCA3MiwgNSwgLTIwNDUsIDUsIC00ODQ2LCA0LCA1LCA2ODkyLCA0LCA4LCAxNCwgOTcsIDM4LCAxNywgMSwgODYsIDIsIDk3LCAzOCwgNzUsIDgwLCA1LCAzOTUsIDgsIDgxLCA3NSwgODAsIDUsIDQ0OCwgOCwgMzgsIDc1LCA4MCwgNSwgMzk1LCA4LCA4MSwgNzUsIDgwLCA1LCA0NDgsIDgsIDgxLCA1LCA3MTg4LCA1LCAxNTI1LCA0LCA1LCAtODcxMywgNCwgOTMsIDEyLCAxMiwgNSwgNjkwMSwgNSwgODQyOSwgNCwgNSwgLTE1MzI5LCA0LCAxNiwgNzksIDE0LCAzOCwgNzUsIDgwLCA1LCAzOTUsIDgsIDgxLCA3NSwgODAsIDUsIDQ0OCwgOCwgODEsIDM3LCA5NywgOTUsIDk3LCAxMCwgMjEsIDMsIDcyLCAzOCwgODAsIDUsIDI3NjksIDUsIDI1ODMsIDQsIDUsIC01MzUwLCA0LCAzMiwgNjYsIDk3LCA5NSwgOTcsIDMwLCAyMSwgNCwgNzIsIDE3LCA1LCA3NSwgODAsIDUsIDQ0NiwgOCwgODMsIDQsIDcsIDk3LCA5OSwgMjEsIDMsIDg5LCA2LCA4MywgNTIsIDIxLCAzLCA4OSwgNywgNzUsIDgwLCA1LCA0MTEsIDgsIDgsIDc3LCA1MiwgMjEsIDMsIDg5LCA3LCA1NSwgOCwgOTUsIDE4LCA4LCAyNiwgNDYsIDE4LCA5LCAyNiwgNSwgMiwgMTgsIDEwLCAyNiwgNSwgMywgMTgsIDExLCAyNiwgNSwgNCwgMTgsIDEyLCAyNiwgNSwgNSwgMTgsIDEzLCAyNiwgNSwgNiwgMTgsIDE0LCAyNiwgNSwgNywgMTgsIDE1LCAyNiwgODksIDE2LCAxOCwgMTcsIDgsIDgsIDkxLCAxOCwgMzIsIDcwLCA5NywgNTMsIDIxLCAzLCA4OSwgMTksIDI5LCAyMSwgMjAsIDgsIDQ3LCA4NCwgODUsIDg3LCA4NCwgODcsIDQwLCA4NywgNzAsIDg3LCA0OSwgODcsIDI2LCAxMCwgMCwgNDMsIDEsIDEzLCA3MiwgNzYsIDUzLCAxLCA3NCwgNTMsIDIsIDc0LCAxNCwgMzYsIDE0LCAxNiwgMTAsIDM2LCAzNiwgNjksIDk1LCAzMCwgNTMsIDE3OCwgNDIsIDQyLCAzLCAwLCAyNCwgMSwgNDksIDE3MCwgNSwgMiwgMTIsIDMsIDU4LCA0LCAxMjIsIDUsIDE2NSwgNiwgMTY1LCA3MCwgMzksIDcsIDQyLCAzNCwgMjQsIDEsIDcsIDgsIDcsIDY1LCAzLCA3LCAxNSwgMzUsIDI1LCA3LCA4NSwgMjMsIDgsIDUwLCA3MiwgOSwgNywgNzMsIDQ3LCA3NSwgNjcsIDYxLCA5LCA0MiwgNTIsIDUsIDI0LCAwLCA3LCA1MywgMTIxLCA0MiwgMjMsIDksIDQsIDEwLCA1MCwgOTUsIDE4LCA4NSwgMjMsIDExLCAzNSwgNywgODUsIDIzLCAxMiwgMzUsIDU1LCA3LCA4NSwgMjMsIDEzLCA3MywgNjYsIDk1LCAyMiwgNywgNDIsIDIzLCA5LCA0LCAxMCwgOCwgNywgNDUsIDMsIDE0LCAxNSwgNjMsIDE1LCAyNywgNDcsIDUyLCA0NDEsIDcyLCA4LCA3LCA2NSwgMywgNywgMTUsIDM1LCA3OCwgMTMsIDQ0LCA0LCAxNiwgNDQsIDk1LCA3LCA4LCA3LCAzMywgMywgNywgMTUsIDIxLCA1MCwgNTQsIDg2LCA5NSwgMTgsIDQyLCA1MiwgMTAsIDI0LCAxLCA3LCA0MiwgNDIsIDIzLCAxNywgMzQsIDcyLCAyNCwgMTgsIDcsIDQyLCAyMywgOSwgNCwgMTAsIDg1LCAyMywgMTksIDIxLCA3NywgMywgMjAsIDMsIDIxLCAyOSwgMjIsIDI3LCA0NywgNTIsIDQ2OCwgNzIsIDI5LCAyMywgNzIsIDcsIDUwLCA5NSwgMTgsIDQyLCAyMywgMjQsIDM1LCAxOCwgMSwgMzYsIC0xNzksIDVdCiAgICAgICAgICAgICwgcyA9IGEuZXhwb3J0cwogICAgICAgICAgICAsIGMgPSB1ZwogICAgICAgICAgICAsIGkgPSBrZwogICAgICAgICAgICAsIHUgPSBPZwogICAgICAgICAgICAsIGwgPSBUZy5leHBvcnRzOwogICAgICAgIGkoZSwgIl9fZXNNb2R1bGUiLCB7CiAgICAgICAgICAgIHZhbHVlOiAhMAogICAgICAgIH0pLAogICAgICAgICAgICBlLmRlZmF1bHQgPSB2b2lkIDA7CiAgICAgICAgdmFyIGggPSBsKGR5KQogICAgICAgICAgICAsIGYgPSBsKGt5LmV4cG9ydHMpCiAgICAgICAgICAgICwgZyA9IGwoeXkuZXhwb3J0cykKICAgICAgICAgICAgLCBwID0gbChteS5leHBvcnRzKQogICAgICAgICAgICAsIHYgPSBsKFd5KQogICAgICAgICAgICAsIGIgPSBsKHJtKQogICAgICAgICAgICAsIGQgPSBsKG5tKQogICAgICAgICAgICAsIGsgPSBsKGttKQogICAgICAgICAgICAsIHkgPSBsKHltKQogICAgICAgICAgICAsIG0gPSBsKEVtKQogICAgICAgICAgICAsIHcgPSBsKEJtKQogICAgICAgICAgICAsIF8gPSBsKHFtKQogICAgICAgICAgICAsIHggPSBsKFptKQogICAgICAgICAgICAsIFMgPSBsKFJ3KQogICAgICAgICAgICAsIEUgPSBsKEx3KQogICAgICAgICAgICAsIEEgPSBsKF9fKQogICAgICAgICAgICAsIEMgPSBsKEVfKQogICAgICAgICAgICAsIE8gPSBveAogICAgICAgICAgICAsIFQgPSBzeAogICAgICAgICAgICAsIEQgPSBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGlmICghdCAmJiBlICYmIGUuX19lc01vZHVsZSkKICAgICAgICAgICAgICAgIHJldHVybiBlOwogICAgICAgICAgICBpZiAobnVsbCA9PT0gZSB8fCAib2JqZWN0IiAhPT0gcyhlKSAmJiAiZnVuY3Rpb24iICE9IHR5cGVvZiBlKQogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB2YXIgciA9IEsodCk7CiAgICAgICAgICAgIGlmIChyICYmIHIuaGFzKGUpKQogICAgICAgICAgICAgICAgcmV0dXJuIHIuZ2V0KGUpOwogICAgICAgICAgICB2YXIgbiA9IHt9CiAgICAgICAgICAgICAgICAsIGEgPSBpICYmIHU7CiAgICAgICAgICAgIGZvciAodmFyIG8gaW4gZSkKICAgICAgICAgICAgICAgIGlmICgiZGVmYXVsdCIgIT09IG8gJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIG8pKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhID8gdShlLCBvKSA6IG51bGw7CiAgICAgICAgICAgICAgICAgICAgYyAmJiAoYy5nZXQgfHwgYy5zZXQpID8gaShuLCBvLCBjKSA6IG5bb10gPSBlW29dCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIG4uZGVmYXVsdCA9IGUsCiAgICAgICAgICAgIHIgJiYgci5zZXQoZSwgbik7CiAgICAgICAgICAgIHJldHVybiBuCiAgICAgICAgfShneCkKICAgICAgICAgICAgLCBCID0gTlMKICAgICAgICAgICAgLCBqID0gelMKICAgICAgICAgICAgLCBNID0gR1MKICAgICAgICAgICAgLCBSID0gbChIUy5leHBvcnRzKQogICAgICAgICAgICAsIE4gPSBsKFlTLmV4cG9ydHMpCiAgICAgICAgICAgICwgUCA9IGwoSlMuZXhwb3J0cykKICAgICAgICAgICAgLCBJID0gbChXUy5leHBvcnRzKQogICAgICAgICAgICAsIEwgPSBsKCRTLmV4cG9ydHMpCiAgICAgICAgICAgICwgeiA9IGwoWFMuZXhwb3J0cykKICAgICAgICAgICAgLCBHID0gbChlRS5leHBvcnRzKQogICAgICAgICAgICAsIEggPSBsKHRFLmV4cG9ydHMpCiAgICAgICAgICAgICwgRiA9IGwobkUuZXhwb3J0cykKICAgICAgICAgICAgLCBVID0gbChhRS5leHBvcnRzKQogICAgICAgICAgICAsIFkgPSBvRQogICAgICAgICAgICAsIEogPSB1RQogICAgICAgICAgICAsIFcgPSBnRQogICAgICAgICAgICAsIFggPSBHXzsKICAgICAgICBmdW5jdGlvbiBLKGUpIHsKICAgICAgICAgICAgaWYgKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGMpCiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgdmFyIHQgPSBuZXcgYwogICAgICAgICAgICAgICAgLCByID0gbmV3IGM7CiAgICAgICAgICAgIHJldHVybiAoSyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IHIgOiB0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkoZSkKICAgICAgICB9CiAgICAgICAgdmFyIHEgPSBaOwogICAgICAgIGZ1bmN0aW9uIFooZSwgdCkgewogICAgICAgICAgICB2YXIgciA9IFEoKTsKICAgICAgICAgICAgcmV0dXJuIFogPSBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgICAgICAgICB2YXIgYSA9IHJbdCAtPSAzODhdOwogICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gWi5GdmpQVXkpIHsKICAgICAgICAgICAgICAgICAgICBaLlhNZHR5RyA9IGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCwgciwgbiA9ICJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMDEyMzQ1Njc4OSsvPSIsIGEgPSAiIiwgbyA9ICIiLCBzID0gMCwgYyA9IDA7IHIgPSBlLmNoYXJBdChjKyspOyB+ciAmJiAodCA9IHMgJSA0ID8gNjQgKiB0ICsgciA6IHIsCiAgICAgICAgICAgICAgICAgICAgICAgIHMrKyAlIDQpID8gYSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSAmIHQgPj4gKC0yICogcyAmIDYpKSA6IDApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5kZWZhdWx0KShuKS5jYWxsKG4sIHIpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgdSA9IGEubGVuZ3RoOyBpIDwgdTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gKz0gIiUiICsgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5kZWZhdWx0KShsID0gIjAwIiArIGEuY2hhckNvZGVBdChpKS50b1N0cmluZygxNikpLmNhbGwobCwgLTIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChvKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLAogICAgICAgICAgICAgICAgICAgICAgICBlID0gYXJndW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICBaLkZ2alBVeSA9ICEwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbyA9IHQgKyByWzBdLnN1YnN0cmluZygwLCAyKQogICAgICAgICAgICAgICAgICAgICwgcyA9IGVbb107CiAgICAgICAgICAgICAgICByZXR1cm4gcyA/IGEgPSBzIDogKGEgPSBaLlhNZHR5RyhhKSwKICAgICAgICAgICAgICAgICAgICBlW29dID0gYSksCiAgICAgICAgICAgICAgICAgICAgYQogICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAsCiAgICAgICAgICAgICAgICBaKGUsIHQpCiAgICAgICAgfQogICAgICAgICFmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgIGZvciAodmFyIHIgPSBaLCBuID0gZSgpOyA7ICkKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKDY4NDAzNCA9PT0gLSgwLAogICAgICAgICAgICAgICAgICAgICAgICB2LmRlZmF1bHQpKHIoNDAzKSkgLyAxICogKC0oMCwKICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWZhdWx0KShyKDQ2MykpIC8gMikgKyAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWZhdWx0KShyKDQ2MSkpIC8gMyAqICgoMCwKICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWZhdWx0KShyKDQ3MCkpIC8gNCkgKyAtKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHYuZGVmYXVsdCkocig0MTYpKSAvIDUgKiAoLSgwLAogICAgICAgICAgICAgICAgICAgICAgICB2LmRlZmF1bHQpKHIoNDY5KSkgLyA2KSArIC0oMCwKICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWZhdWx0KShyKDQxMykpIC8gNyAqICgoMCwKICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWZhdWx0KShyKDQ2NykpIC8gOCkgKyAtKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHYuZGVmYXVsdCkocigzODkpKSAvIDkgKyAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgdi5kZWZhdWx0KShyKDM5NykpIC8gMTAgKyAtKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHYuZGVmYXVsdCkocig0NTkpKSAvIDExICogKCgwLAogICAgICAgICAgICAgICAgICAgICAgICB2LmRlZmF1bHQpKHIoMzk2KSkgLyAxMikpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIG4ucHVzaChuLnNoaWZ0KCkpCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKG4uc2hpZnQoKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICB9KFEpOwogICAgICAgIHZhciBWID0gZnVuY3Rpb24oZSwgdCwgYSwgcywgYywgaSwgdSwgbCwgSywgViwgUSwgJCwgZWUsIHRlLCByZSkgewogICAgICAgICAgICBmdW5jdGlvbiBuZSgpIHsKICAgICAgICAgICAgICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgICAgICAgICAgICgwLAogICAgICAgICAgICAgICAgICAgIGcuZGVmYXVsdCkodGhpcywgbmUpOwogICAgICAgICAgICAgICAgdmFyIHQgPSBaOwogICAgICAgICAgICAgICAgdGhpcy5fc3RvcmFnZXRva2VuS2V5ID0gVC5DT09LSUUuRFlOQU1JQ19UT0tFTiwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdG9yYWdlQWxnbktleSA9IFQuQ09PS0lFLkRZTkFNSUNfQUxHT1JJVEhNLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2VGcEtleSA9IFQuQ09PS0lFLlZLLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX3Rva2VuID0gIiIsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFRva2VuID0gIiIsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNOb3JtYWwgPSAhMSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBJZCA9ICIiLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlZmF1bHRBbGdvcml0aG0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX2tleV8xOiB6LmRlZmF1bHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX2tleV8yOiBMLmRlZmF1bHQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsX2tleV8zOiBHLmRlZmF1bHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxnb3MgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIE1ENTogei5kZWZhdWx0LAogICAgICAgICAgICAgICAgICAgICAgICBTSEEyNTY6IEwuZGVmYXVsdCwKICAgICAgICAgICAgICAgICAgICAgICAgU0hBNTEyOiBILmRlZmF1bHQsCiAgICAgICAgICAgICAgICAgICAgICAgIEhtYWNTSEEyNTY6IEcuZGVmYXVsdCwKICAgICAgICAgICAgICAgICAgICAgICAgSG1hY1NIQTUxMjogRi5kZWZhdWx0LAogICAgICAgICAgICAgICAgICAgICAgICBIbWFjTUQ1OiBVLmRlZmF1bHQKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZlcnNpb24gPSB0KDQwOCksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluZ2VycHJpbnQgPSAiIiwKICAgICAgICAgICAgICAgICAgICBlID0gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGsuZGVmYXVsdCkoe30sIG5lLnNldHRpbmdzLCBlKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9faW5pQ29uZmlnKGUpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGFlLCBvZSwgc2U7CiAgICAgICAgICAgIHJldHVybiAoMCwKICAgICAgICAgICAgICAgIHAuZGVmYXVsdCkobmUsIFt7CiAgICAgICAgICAgICAgICBrZXk6IGUsCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0ID0gcQogICAgICAgICAgICAgICAgICAgICAgICAsIHIgPSBlLmFwcElkCiAgICAgICAgICAgICAgICAgICAgICAgICwgbiA9IGUuZGVidWcKICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gZS5vblNpZ24KICAgICAgICAgICAgICAgICAgICAgICAgLCBvID0gZS5vblJlcXVlc3RUb2tlbgogICAgICAgICAgICAgICAgICAgICAgICAsIHMgPSBlLm9uUmVxdWVzdFRva2VuUmVtb3RlbHk7CiAgICAgICAgICAgICAgICAgICAgISgoMCwKICAgICAgICAgICAgICAgICAgICAgICAgWC5pc1N0cmluZykoZS5hcHBJZCkgJiYgZS5hcHBJZCkgJiYgY29uc29sZS5lcnJvcih0KDQwNikpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBJZCA9IHIgfHwgIiIsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXBwSWQgJiYgKHRoaXMuX3N0b3JhZ2V0b2tlbktleSA9IHRoaXMuX3N0b3JhZ2V0b2tlbktleSArICJfIiArIHRoaXMuX2FwcElkICsgIl8iICsgdGhpcy5fdmVyc2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RvcmFnZUFsZ25LZXkgPSB0aGlzLl9zdG9yYWdlQWxnbktleSArICJfIiArIHRoaXMuX2FwcElkICsgIl8iICsgdGhpcy5fdmVyc2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RvcmFnZUZwS2V5ID0gdGhpcy5fc3RvcmFnZUZwS2V5ICsgIl8iICsgdGhpcy5fYXBwSWQgKyAiXyIgKyB0aGlzLl92ZXJzaW9uKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVidWcgPSBCb29sZWFuKG4pLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblNpZ24gPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFguaXNGdW5jdGlvbikoYSkgPyBhIDogWC5ub29wLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblJlcXVlc3RUb2tlbiA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWC5pc0Z1bmN0aW9uKShvKSA/IG8gOiBYLm5vb3AsCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFRva2VuUmVtb3RlbHkgPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFguaXNGdW5jdGlvbikocykgPyBzIDogWC5ub29wLAogICAgICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgubG9nKSh0aGlzLl9kZWJ1ZywgdCg0NTcpICsgdGhpcy5fYXBwSWQpLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblJlcXVlc3RUb2tlbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdCg0MTcpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vblJlcXVlc3RUb2tlblJlbW90ZWx5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IDIwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGtleTogdCwKICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihlLCB0LCBhLCBzKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYywgaSwgdSwgbCwgaCwgZiwgZywgcCwgdiwgZCwgaywgbSwgdyA9IG4sIF8gPSBvLCB4ID0gW10sIFMgPSAwOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfW1MrK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKFIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2gobCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB4W3gubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSB4W3gubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB4W3gubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaChwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHhbeC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2goWCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaCh2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKG5ldyBSZWdFeHAocltfW1MrK11dKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhbeC5sZW5ndGggLSAyXSA9IHhbeC5sZW5ndGggLSAyXVt4W3gubGVuZ3RoIC0gMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2goUCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHhbeC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKGcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4W3gubGVuZ3RoIC0gNF0gPSB3LmNhbGwoeFt4Lmxlbmd0aCAtIDRdLCB4W3gubGVuZ3RoIC0gM10sIHhbeC5sZW5ndGggLSAyXSwgeFt4Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5sZW5ndGggLT0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0geFt4Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2goKGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhLCBzLCBpLCBsLCBmID0gbiwgZyA9IG8sIHAgPSBbXSwgdiA9IDE2MjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU6IGZvciAoOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGdbdisrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICs9IGdbdl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDFdID0gcFtwLmxlbmd0aCAtIDFdW3JbMTMgKyBnW3YrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goZ1t2KytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChrKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHJbMTMgKyBnW3YrK11dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKFQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gM11bcFtwLmxlbmd0aCAtIDJdXSA9IHBbcC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aCAtPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gcFtwLmxlbmd0aCAtIDJdID8gKHBbcC5sZW5ndGggLSAzXSA9IGYuY2FsbChwW3AubGVuZ3RoIC0gM10sIHBbcC5sZW5ndGggLSAyXSwgcFtwLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aCAtPSAyKSA6IChpID0gcFtwLmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAzXSA9IGkocFtwLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gcFtwLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gcFtwLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gcC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMV0gKz0gaTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGlzTmFOKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDRdID0gZi5jYWxsKHBbcC5sZW5ndGggLSA0XSwgcFtwLmxlbmd0aCAtIDNdLCBwW3AubGVuZ3RoIC0gMl0sIHBbcC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5sZW5ndGggLT0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDFdID0gIXBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDVdID0gZi5jYWxsKHBbcC5sZW5ndGggLSA1XSwgcFtwLmxlbmd0aCAtIDRdLCBwW3AubGVuZ3RoIC0gM10sIHBbcC5sZW5ndGggLSAyXSwgcFtwLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aCAtPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMV0gPyAoKyt2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tcC5sZW5ndGgpIDogdiArPSBnW3ZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSBwW3AubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaCh1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKG5ldyBBcnJheShnW3YrK10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucG9wKCkgPyArK3YgOiB2ICs9IGdbdl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBwLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAxXSA9IHBbcC5sZW5ndGggLSAxXSA+PSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChwW3AubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAyXSA9IHBbcC5sZW5ndGggLSAyXVtyWzEzICsgZ1t2KytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDJdID0gcFtwLmxlbmd0aCAtIDJdW3BbcC5sZW5ndGggLSAxXV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDkzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gcC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSAwOyBsIDwgZ1t2ICsgMV07ICsrbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gclsxMyArIGdbdiArIDIgKiBsICsgMl1dKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgKz0gZ1t2ICsgMiAqIGwgKyAzXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgKz0gZ1t2XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHgucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhbeC5sZW5ndGggLSAxXSArPSBtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2goX1tTKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2goeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0geFt4Lmxlbmd0aCAtIDJdID8gKHhbeC5sZW5ndGggLSAzXSA9IHcuY2FsbCh4W3gubGVuZ3RoIC0gM10sIHhbeC5sZW5ndGggLSAyXSwgeFt4Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5sZW5ndGggLT0gMikgOiAobSA9IHhbeC5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeFt4Lmxlbmd0aCAtIDNdID0gbSh4W3gubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKHJbX1tTKytdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaCh0aGlzW3JbX1tTKytdXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0geFt4Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeFt4Lmxlbmd0aCAtIDFdID0geFt4Lmxlbmd0aCAtIDFdW3JbX1tTKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IHhbeC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IHhbeC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKHhbeC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhbeC5sZW5ndGggLSAyXSA9IHhbeC5sZW5ndGggLSAyXVtyW19bUysrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2goZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgucHVzaChoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHhbeC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKHEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4W3gubGVuZ3RoIC0gNV0gPSB3LmNhbGwoeFt4Lmxlbmd0aCAtIDVdLCB4W3gubGVuZ3RoIC0gNF0sIHhbeC5sZW5ndGggLSAzXSwgeFt4Lmxlbmd0aCAtIDJdLCB4W3gubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lmxlbmd0aCAtPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2godm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHhbeC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5wdXNoKGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnBvcCgpID8gKytTIDogUyArPSBfW1NdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LnB1c2godSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBrZXk6IGEsCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSwgdCwgcikgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gcQogICAgICAgICAgICAgICAgICAgICAgICAsIGEgPSB0aGlzLl9kZWZhdWx0QWxnb3JpdGhtW2VdOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSBuKDQyMCkgPyBhKHQsIHIpLnRvU3RyaW5nKE4uZGVmYXVsdCkgOiBhKHQpLnRvU3RyaW5nKE4uZGVmYXVsdCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAga2V5OiBzLAogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGUsIHQsIHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/ICgwLAogICAgICAgICAgICAgICAgICAgICAgICBkLmRlZmF1bHQpKGUpLmNhbGwoZSwgdCwgcikgOiAiIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBrZXk6IGMsCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSwgdCkgewogICAgICAgICAgICAgICAgICAgIHZhciByID0gcTsKICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiB0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Rva2VuID0gZSB8fCAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX19nZW5LZXkgPSB0ICYmIG5ldyBGdW5jdGlvbihyKDQwMikgKyB0KSgpIHx8IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gISghdGhpcy5fdG9rZW4gfHwgIXRoaXMuX19nZW5LZXkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faXNOb3JtYWwgPSBuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gITEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAga2V5OiBpLAogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGUsIHQsIHIsIG4sIGEpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyIiICsgciwgIiIgKyB0aGlzLl9maW5nZXJwcmludCwgIiIgKyB0aGlzLl9hcHBJZCwgIiIgKyAodGhpcy5faXNOb3JtYWwgPyB0aGlzLl90b2tlbiA6IHRoaXMuX2RlZmF1bHRUb2tlbiksICIiICsgZSwgIiIgKyB0aGlzLl92ZXJzaW9uLCAiIiArIHQsICIiICsgbiwgIiIgKyBhXS5qb2luKCI7IikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAga2V5OiB1LAogICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGUsIHQpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBhLCBzLCBjLCBpLCB1ID0gbiwgbCA9IG8sIGggPSBbXSwgZiA9IDI3MjsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobFtmKytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaFtoLmxlbmd0aCAtIDFdID0gaFtoLmxlbmd0aCAtIDFdW3JbMjAgKyBsW2YrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2gobFtmKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wdXNoKHopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2gocyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wdXNoKE4pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoW2gubGVuZ3RoIC0gNF0gPSB1LmNhbGwoaFtoLmxlbmd0aCAtIDRdLCBoW2gubGVuZ3RoIC0gM10sIGhbaC5sZW5ndGggLSAyXSwgaFtoLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5sZW5ndGggLT0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBoW2gubGVuZ3RoIC0gMl0gPyAoaFtoLmxlbmd0aCAtIDNdID0gdS5jYWxsKGhbaC5sZW5ndGggLSAzXSwgaFtoLmxlbmd0aCAtIDJdLCBoW2gubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLmxlbmd0aCAtPSAyKSA6IChpID0gaFtoLmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoW2gubGVuZ3RoIC0gM10gPSBpKGhbaC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2godCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaCh0aGlzW3JbMjAgKyBsW2YrK11dXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBoW2gubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChYKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wdXNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBuID0gbywgYSA9IFtdLCBzID0gMzQzOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5bcysrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2goZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaChyWzI3ICsgbltzKytdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbYS5sZW5ndGggLSAxXSA9IGFbYS5sZW5ndGggLSAxXVtyWzI3ICsgbltzKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBhLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFbYS5sZW5ndGggLSAxXSArPSB0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChyWzIwICsgbFtmKytdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wdXNoKG0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2godm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGgucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBoW2gubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChoW2gubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoW2gubGVuZ3RoIC0gMl0gPSBoW2gubGVuZ3RoIC0gMl1bclsyMCArIGxbZisrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaC5wdXNoKHEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gaC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaFtoLmxlbmd0aCAtIDFdICs9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGhbaC5sZW5ndGggLSAxXQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGtleTogbCwKICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgcywgYywgaSwgdSwgbCwgaCA9IG4sIGYgPSBvLCBnID0gW10sIHAgPSAzNTU7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZbcCsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2godm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2gobmV3IEFycmF5KGZbcCsrXSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChyWzMwICsgZltwKytdXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSAxXSA9ICFnW2cubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZy5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKGdbZy5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSAyXSA9IGdbZy5sZW5ndGggLSAyXVtyWzMwICsgZltwKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaCh3KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IGdbZy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGdbZy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKFgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBnW2cubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSA0XSA9IGguY2FsbChnW2cubGVuZ3RoIC0gNF0sIGdbZy5sZW5ndGggLSAzXSwgZ1tnLmxlbmd0aCAtIDJdLCBnW2cubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLmxlbmd0aCAtPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goKGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQsIGEgPSBuLCBjID0gbywgaSA9IFtdLCB1ID0gNTAyOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNbdSsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKGNbdSsrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlbaS5sZW5ndGggLSAxXSA9IGlbaS5sZW5ndGggLSAxXVtyWzM5ICsgY1t1KytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucHVzaChzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wdXNoKG51bGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gaS5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW2kubGVuZ3RoIC0gMV0gPSBpW2kubGVuZ3RoIC0gMV0gPT09IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBpW2kubGVuZ3RoIC0gMl0gPyAoaVtpLmxlbmd0aCAtIDNdID0gYS5jYWxsKGlbaS5sZW5ndGggLSAzXSwgaVtpLmxlbmd0aCAtIDJdLCBpW2kubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGVuZ3RoIC09IDIpIDogKHQgPSBpW2kubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaVtpLmxlbmd0aCAtIDNdID0gdChpW2kubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpW2kubGVuZ3RoIC0gMV0gPyB1ICs9IGNbdV0gOiAoKyt1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0taS5sZW5ndGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1c2goZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHRoaXNbclszMCArIGZbcCsrXV1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1tnLmxlbmd0aCAtIDNdW2dbZy5sZW5ndGggLSAyXV0gPSBnW2cubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcubGVuZ3RoIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBnW2cubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucG9wKCkgPyArK3AgOiBwICs9IGZbcF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGcucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSAxXSArPSBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZ1tnLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2godSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChOKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2gocSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKGZbcCsrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0LCBuID0gbywgYSA9IFtdLCBzID0gNTI0OyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5bcysrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVthLmxlbmd0aCAtIDFdID0gYVthLmxlbmd0aCAtIDFdW3JbNDAgKyBuW3MrK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IGEucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYVthLmxlbmd0aCAtIDFdICs9IHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLnB1c2gocls0MCArIG5bcysrXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBnW2cubGVuZ3RoIC0gMl0gPyAoZ1tnLmxlbmd0aCAtIDNdID0gaC5jYWxsKGdbZy5sZW5ndGggLSAzXSwgZ1tnLmxlbmd0aCAtIDJdLCBnW2cubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLmxlbmd0aCAtPSAyKSA6IChsID0gZ1tnLmxlbmd0aCAtIDNdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2cubGVuZ3RoIC0gM10gPSBsKGdbZy5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2gobSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSAxXSA9IGdbZy5sZW5ndGggLSAxXVtyWzMwICsgZltwKytdXV0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBrZXk6IEssCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzCiAgICAgICAgICAgICAgICAgICAgICAgICwgdCA9IHE7CiAgICAgICAgICAgICAgICAgICAgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIFgubG9nKSh0aGlzLl9kZWJ1ZywgdCg0NTQpKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluZ2VycHJpbnQgPSBELmdldFN5bmModGhpcy5fc3RvcmFnZUZwS2V5KSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmluZ2VycHJpbnQgPyAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgubG9nKSh0aGlzLl9kZWJ1ZywgdCg0MzEpICsgdGhpcy5fZmluZ2VycHJpbnQpIDogKEQucmVtb3ZlU3luYyh0aGlzLl9zdG9yYWdlQWxnbktleSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBELnJlbW92ZVN5bmModGhpcy5fc3RvcmFnZXRva2VuS2V5KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpbmdlcnByaW50ID0gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWS5nZW5lcmF0ZVZpc2l0S2V5KSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgRC5zZXRTeW5jKHRoaXMuX3N0b3JhZ2VGcEtleSwgdGhpcy5fZmluZ2VycHJpbnQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmU6IDMxNTM2ZTMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWC5sb2cpKHRoaXMuX2RlYnVnLCB0KDQ1NSkgKyB0aGlzLl9maW5nZXJwcmludCkpOwogICAgICAgICAgICAgICAgICAgIHZhciByID0gUC5kZWZhdWx0LnN0cmluZ2lmeShSLmRlZmF1bHQucGFyc2UoRC5nZXRTeW5jKHRoaXMuX3N0b3JhZ2V0b2tlbktleSkgfHwgIiIpKQogICAgICAgICAgICAgICAgICAgICAgICAsIG4gPSBQLmRlZmF1bHQuc3RyaW5naWZ5KFIuZGVmYXVsdC5wYXJzZShELmdldFN5bmModGhpcy5fc3RvcmFnZUFsZ25LZXkpIHx8ICIiKSkKICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gdGhpcy5fX3BhcnNlQWxnb3JpdGhtKHIsIG4pOwogICAgICAgICAgICAgICAgICAgICgwLAogICAgICAgICAgICAgICAgICAgICAgICBYLmxvZykodGhpcy5fZGVidWcsIHQoNDQ3KSArIGEgKyB0KDM5NCkgKyByICsgdCg0NDApICsgbiksCiAgICAgICAgICAgICAgICAgICAgICAgIGEgPyAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgubG9nKSh0aGlzLl9kZWJ1ZywgdCg0MDApKSA6ICgoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uZGVmYXVsdCkoKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmRlZmF1bHQpKGguZGVmYXVsdC5tYXJrKChmdW5jdGlvbiB0KCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodC5wcmV2ID0gdC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuX19yZXF1ZXN0QWxnb3JpdGhtT25jZSgpLmNhdGNoKChmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gWjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYLmxvZykoZS5fZGVidWcsIHIoNDE5KSArIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LnN0b3AoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkpKSwgMCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYLmxvZykodGhpcy5fZGVidWcsIHQoNDYwKSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGtleTogViwKICAgICAgICAgICAgICAgIHZhbHVlOiAoc2UgPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgZi5kZWZhdWx0KShoLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCByLCBuLCBhID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUucHJldiA9IGUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPSBxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgudXNlVmFyKSh0KDQzMiksIHt9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSB0KDQyNSkgKyB0aGlzLl9maW5nZXJwcmludCArICJfIiArIHRoaXMuX2FwcElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWC5sb2cpKHRoaXMuX2RlYnVnLCB0KDQxMCkgKyBuICsgdCg0NjQpICsgISFyW25dKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFyW25dKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5hYnJ1cHQoInJldHVybiIsIHJbbl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuYWJydXB0KCJyZXR1cm4iLCAocltuXSA9IG5ldyB4LmRlZmF1bHQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYuZGVmYXVsdCkoaC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIGUobywgcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGguZGVmYXVsdC53cmFwKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUucHJldiA9IGUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjID0gdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ID0gMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5uZXh0ID0gNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5fX3JlcXVlc3RBbGdvcml0aG0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbygpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ID0gOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50MCA9IGUuY2F0Y2goMSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWC5sb2cpKGEuX2RlYnVnLCBjKDQyMykgKyBuICsgYygzOTApICsgZS50MCArIGMoNDI4KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByW25dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zdG9wKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLCBlLCBudWxsLCBbWzEsIDhdXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSgpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJbbl0pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc3RvcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgKSwgZSwgdGhpcykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICkpKSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGtleTogUSwKICAgICAgICAgICAgICAgIHZhbHVlOiAob2UgPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgZi5kZWZhdWx0KShoLmRlZmF1bHQubWFyaygoZnVuY3Rpb24gZSgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0LCByLCBuLCBhLCBvLCBzLCBjLCBpLCB1LCBsID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoLmRlZmF1bHQud3JhcCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGUucHJldiA9IGUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPSBxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWC5sb2cpKHRoaXMuX2RlYnVnLCB0KDM5MykpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXLmVudkNvbGxlY3QpKDApKS5haSA9IHRoaXMuX2FwcElkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5mcCA9IHRoaXMuX2ZpbmdlcnByaW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMuZGVmYXVsdCkociwgbnVsbCwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYLmxvZykodGhpcy5fZGVidWcsIHQoNDI0KSArIG4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IEkuZGVmYXVsdC5lbmNyeXB0KG4sIFAuZGVmYXVsdC5wYXJzZShbIndtIiwgdCg0NDUpLCAidy0iLCB0KDQ2MiksIHQoNDI5KSwgIm8oIl0uam9pbigiIikpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXY6IFAuZGVmYXVsdC5wYXJzZShbIjAxIiwgIjAyIiwgIjAzIiwgIjA0IiwgIjA1IiwgIjA2IiwgIjA3IiwgIjA4Il0uam9pbigiIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBSLmRlZmF1bHQuZW5jb2RlKGEuY2lwaGVydGV4dCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5fZmluZ2VycHJpbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gdGhpcy5fYXBwSWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5fdmVyc2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0aGlzLl9kZWJ1ZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubmV4dCA9IDksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPLnJlcXVlc3RBbGdvcml0aG0pKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5nZXJwcmludDogcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBJZDogYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudjogbywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1ZzogdQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGUuYWxnbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBuID0gZS50b2tlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBhID0gZS5mcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBvID0gZS50cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBzID0gdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLCBjID0gYSA9PT0gbC5fZmluZ2VycHJpbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgaSA9IGMgPyBELmdldFN5bmMobC5fc3RvcmFnZUZwS2V5LCAxKSA6ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIHUgPSBpICYmIGEgPT09IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IGwuX19wYXJzZVRva2VuKG4sIDEzLCAxNSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGYgPSA2MCAqICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYuZGVmYXVsdCkoaCwgMTYpICogNjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIGcgPSBvICYmIE1hdGguYWJzKCgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUuZGVmYXVsdCkoKSAtIG8pID4gM2U1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRC5zZXRTeW5jKGwuX3N0b3JhZ2V0b2tlbktleSwgUi5kZWZhdWx0LnN0cmluZ2lmeShQLmRlZmF1bHQucGFyc2UobikpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlOiBmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBnID8gMSA6IDApLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEQuc2V0U3luYyhsLl9zdG9yYWdlQWxnbktleSwgUi5kZWZhdWx0LnN0cmluZ2lmeShQLmRlZmF1bHQucGFyc2UocikpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZTogZgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGcgPyAxIDogMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgubG9nKShsLl9kZWJ1Zywgcyg0MDQpICsgYyArIHMoNDE4KSArIHUgKyBzKDQzMCkgKyBuICsgcyg0MzkpICsgaSArIHMoNDE0KSArIGEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFgubG9nKSh0aGlzLl9kZWJ1ZywgdCgzOTgpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnN0b3AoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICksIGUsIHRoaXMpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICApKSksCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBrZXk6ICQsCiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0LCByLCBuLCBhLCBvID0gcSwgcyA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLl9hcHBJZCAmJiAocyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogTS5FcnJDb2Rlcy5BUFBJRF9BQlNFTlQsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJhcHBJZCBpcyByZXF1aXJlZCIKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAhKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIEIuaXNQbGFpbk9iamVjdCkoZSkgJiYgKHMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IE0uRXJyQ29kZXMuVU5TSUdOQUJMRV9QQVJBTVMsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG8oNDQ5KQogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICgwLAogICAgICAgICAgICAgICAgICAgICAgICBCLmlzRW1wdHkpKGUpICYmIChzID0gewogICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBNLkVyckNvZGVzLlVOU0lHTkFCTEVfUEFSQU1TLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvKDQwOSkKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgWC5jb250YWluc1Jlc2VydmVkUGFyYW1OYW1lKShlKSAmJiAocyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogTS5FcnJDb2Rlcy5VTlNJR05BQkxFX1BBUkFNUywKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbyg0NTApCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgIHMgPyAodGhpcy5fb25TaWduKHMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCkgOiAwID09PSAoYSA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdy5kZWZhdWx0KSh0ID0gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLmRlZmF1bHQpKHIgPSAoMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEEuZGVmYXVsdCkobiA9ICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgQy5kZWZhdWx0KShlKSkuY2FsbChuKSkuY2FsbChyLCAoZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGVbdF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkpKS5jYWxsKHQsIChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBYLmlzU2FmZVBhcmFtVmFsdWUpKGUudmFsdWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICkpKS5sZW5ndGggPyAodGhpcy5fb25TaWduKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IE0uRXJyQ29kZXMuVU5TSUdOQUJMRV9QQVJBTVMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBvKDQ3MSkKICAgICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsKSA6IGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAga2V5OiBlZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihlLCB0KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgcywgYywgaSwgdSwgbCwgaCwgZiwgZywgcCwgdiwgYiwgZCA9IG4sIGsgPSBvLCB5ID0gW10sIHcgPSA1MzY7IDsgKQogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtbdysrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChKKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0geS5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDFdICs9IGI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wb3AoKSA/ICsrdyA6IHcgKz0ga1t3XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IHlbeS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDFdID0geVt5Lmxlbmd0aCAtIDFdW3JbNDMgKyBrW3crK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGopOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ICs9IGtbd107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChjKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2gocls0MyArIGtbdysrXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2godGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSA1XSA9IGQuY2FsbCh5W3kubGVuZ3RoIC0gNV0sIHlbeS5sZW5ndGggLSA0XSwgeVt5Lmxlbmd0aCAtIDNdLCB5W3kubGVuZ3RoIC0gMl0sIHlbeS5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkubGVuZ3RoIC09IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChrW3crK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2goTSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAyXVtyWzQzICsga1t3KytdXV0gPSB5W3kubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSB5W3kubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSA2XSA9IGQuY2FsbCh5W3kubGVuZ3RoIC0gNl0sIHlbeS5sZW5ndGggLSA1XSwgeVt5Lmxlbmd0aCAtIDRdLCB5W3kubGVuZ3RoIC0gM10sIHlbeS5sZW5ndGggLSAyXSwgeVt5Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGggLT0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSB5W3kubGVuZ3RoIC0gMV0gPyB5W3kubGVuZ3RoIC0gMl0gPSBkLmNhbGwoeVt5Lmxlbmd0aCAtIDJdLCB5W3kubGVuZ3RoIC0gMV0pIDogKGIgPSB5W3kubGVuZ3RoIC0gMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAyXSA9IGIoKSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSB5W3kubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2gocCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCgoZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IG8sIG4gPSBbXSwgYSA9IDgxNjsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0W2ErK10pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnBvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuW24ubGVuZ3RoIC0gMV0gPSBuW24ubGVuZ3RoIC0gMV1bcls3NyArIHRbYSsrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKEUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9IHlbeS5sZW5ndGggLSAyXSA/ICh5W3kubGVuZ3RoIC0gM10gPSBkLmNhbGwoeVt5Lmxlbmd0aCAtIDNdLCB5W3kubGVuZ3RoIC0gMl0sIHlbeS5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkubGVuZ3RoIC09IDIpIDogKGIgPSB5W3kubGVuZ3RoIC0gM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSAzXSA9IGIoeVt5Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGggLT0gMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB5W3kubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlbeS5sZW5ndGggLSA3XSA9IGQuY2FsbCh5W3kubGVuZ3RoIC0gN10sIHlbeS5sZW5ndGggLSA2XSwgeVt5Lmxlbmd0aCAtIDVdLCB5W3kubGVuZ3RoIC0gNF0sIHlbeS5sZW5ndGggLSAzXSwgeVt5Lmxlbmd0aCAtIDJdLCB5W3kubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5Lmxlbmd0aCAtPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2gobSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKFQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2gocSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh5W3kubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5W3kubGVuZ3RoIC0gMl0gPSB5W3kubGVuZ3RoIC0gMl1bcls0MyArIGtbdysrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geS5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDJdW3JbNDMgKyBrW3crK11dXSA9IHlbeS5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeVt5Lmxlbmd0aCAtIDJdID0geVt5Lmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5Lmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2goUyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB5W3kubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaCh0aGlzW3JbNDMgKyBrW3crK11dXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkucHVzaChYKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHlbeS5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5W3kubGVuZ3RoIC0gNF0gPSBkLmNhbGwoeVt5Lmxlbmd0aCAtIDRdLCB5W3kubGVuZ3RoIC0gM10sIHlbeS5sZW5ndGggLSAyXSwgeVt5Lmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5sZW5ndGggLT0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0geVt5Lmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5W3kubGVuZ3RoIC0gMV0gPyB3ICs9IGtbd10gOiAoKyt3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtLXkubGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5LnB1c2godm9pZCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeS5wdXNoKGcpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAga2V5OiB0ZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlLCB0LCBhLCBzLCBjLCBpID0gbiwgdSA9IG8sIGwgPSBbXSwgaCA9IDgyMTsgOyApCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodVtoKytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGwucG9wKCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAxXSArPSBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh1W2grK10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSA0XSA9IGkuY2FsbChsW2wubGVuZ3RoIC0gNF0sIGxbbC5sZW5ndGggLSAzXSwgbFtsLmxlbmd0aCAtIDJdLCBsW2wubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aCAtPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT0gbFtsLmxlbmd0aCAtIDJdID8gKGxbbC5sZW5ndGggLSAzXSA9IGkuY2FsbChsW2wubGVuZ3RoIC0gM10sIGxbbC5sZW5ndGggLSAyXSwgbFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggLT0gMikgOiAoYyA9IGxbbC5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDNdID0gYyhsW2wubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aCAtPSAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKFMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnBvcCgpID8gKytoIDogaCArPSB1W2hdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbFtsLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gMV0gPSAtbFtsLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2godGhpc1tyWzc4ICsgdVtoKytdXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gocls3OCArIHVbaCsrXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gMV0gPSBsW2wubGVuZ3RoIC0gMV1bcls3OCArIHVbaCsrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM11bbFtsLmxlbmd0aCAtIDJdXSA9IGxbbC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sZW5ndGggLT0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goWCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSA1XSA9IGkuY2FsbChsW2wubGVuZ3RoIC0gNV0sIGxbbC5sZW5ndGggLSA0XSwgbFtsLmxlbmd0aCAtIDNdLCBsW2wubGVuZ3RoIC0gMl0sIGxbbC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAzXVtsW2wubGVuZ3RoIC0gMl1dID0gbFtsLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gM10gPSBsW2wubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwubGVuZ3RoIC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKFApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goUik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChuZXcgQXJyYXkodVtoKytdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IGxbbC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGxbbC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGxbbC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHZvaWQgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCArPSB1W2hdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gobnVsbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDgxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxbbC5sZW5ndGggLSAyXSA9IGxbbC5sZW5ndGggLSAyXVtsW2wubGVuZ3RoIC0gMV1dLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDJdW3JbNzggKyB1W2grK11dXSA9IGxbbC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDJdID0gbFtsLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2gobFtsLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDJdID0gbFtsLmxlbmd0aCAtIDJdW3JbNzggKyB1W2grK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKFcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsW2wubGVuZ3RoIC0gMl1bcls3OCArIHVbaCsrXV1dID0gbFtsLmxlbmd0aCAtIDFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFtsLmxlbmd0aCAtIDFdID0gbFtsLmxlbmd0aCAtIDFdID09PSBjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucHVzaChJKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGtleTogcmUsCiAgICAgICAgICAgICAgICB2YWx1ZTogKGFlID0gKDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGYuZGVmYXVsdCkoaC5kZWZhdWx0Lm1hcmsoKGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSwgcywgYywgaSwgdSwgbCA9IG4sIGYgPSBvLCBnID0gW10sIHAgPSAxMDMwOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZbcCsrXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1tnLmxlbmd0aCAtIDFdID0gZ1tnLmxlbmd0aCAtIDFdW3JbOTkgKyBmW3ArK11dXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsLCBoLCBmID0gbiwgZyA9IG8sIHAgPSBbXSwgdiA9IDEwNjQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGU6IGZvciAoOyA7ICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZ1t2KytdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goITApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAxXSA9IHBbcC5sZW5ndGggLSAxXVtyWzEwMSArIGdbdisrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChyWzEwMSArIGdbdisrXV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBwW3AubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBwLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDFdIC09IGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaCh2b2lkIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5wb3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goe30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gcFtwLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2gocFtwLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAyXSA9IHBbcC5sZW5ndGggLSAyXVtyWzEwMSArIGdbdisrXV1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMl1bclsxMDEgKyBnW3YrK11dXSA9IHBbcC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAyXSA9IHBbcC5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAubGVuZ3RoLS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBwW3AubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDJdW3JbMTAxICsgZ1t2KytdXV0gPSBwW3AubGVuZ3RoIC0gMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aC0tOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goayk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaCgxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBwW3AubGVuZ3RoIC0gMV0gPyBwW3AubGVuZ3RoIC0gMl0gPSBmLmNhbGwocFtwLmxlbmd0aCAtIDJdLCBwW3AubGVuZ3RoIC0gMV0pIDogKGwgPSBwW3AubGVuZ3RoIC0gMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gMl0gPSBsKCkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5sZW5ndGgtLTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wb3AoKSA/IHYgKz0gZ1t2XSA6ICsrdjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHBbcC5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gcC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAxXSArPSBsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goWCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChudWxsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsID0gcC5wb3AoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IDA7IGggPCBnW3YgKyAxXTsgKytoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgPT09IHJbMTAxICsgZ1t2ICsgMiAqIGggKyAyXV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICs9IGdbdiArIDIgKiBoICsgM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUgZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICs9IGdbdl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaCh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKGdbdisrXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgKz0gZ1t2XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1NDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gcFtwLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnBvcCgpID8gKyt2IDogdiArPSBnW3ZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDYzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2godGhpc1tyWzEwMSArIGdbdisrXV1dKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKEUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAxXSA9ICFwW3AubGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBwW3AubGVuZ3RoIC0gMl0gPyAocFtwLmxlbmd0aCAtIDNdID0gZi5jYWxsKHBbcC5sZW5ndGggLSAzXSwgcFtwLmxlbmd0aCAtIDJdLCBwW3AubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5sZW5ndGggLT0gMikgOiAobCA9IHBbcC5sZW5ndGggLSAzXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSAzXSA9IGwocFtwLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAubGVuZ3RoIC09IDIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDczOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBwLnBvcCgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcFtwLmxlbmd0aCAtIDFdID0gcFtwLmxlbmd0aCAtIDFdID09IGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAucHVzaChNKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3ODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnB1c2godGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBbcC5sZW5ndGggLSA1XSA9IGYuY2FsbChwW3AubGVuZ3RoIC0gNV0sIHBbcC5sZW5ndGggLSA0XSwgcFtwLmxlbmd0aCAtIDNdLCBwW3AubGVuZ3RoIC0gMl0sIHBbcC5sZW5ndGggLSAxXSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmxlbmd0aCAtPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwW3AubGVuZ3RoIC0gNF0gPSBmLmNhbGwocFtwLmxlbmd0aCAtIDRdLCBwW3AubGVuZ3RoIC0gM10sIHBbcC5sZW5ndGggLSAyXSwgcFtwLmxlbmd0aCAtIDFdKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAubGVuZ3RoIC09IDMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goZltwKytdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnW2cubGVuZ3RoIC0gM11bZ1tnLmxlbmd0aCAtIDJdXSA9IGdbZy5sZW5ndGggLSAxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLmxlbmd0aCAtPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goYyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChnW2cubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdbZy5sZW5ndGggLSAyXSA9IGdbZy5sZW5ndGggLSAyXVtyWzk5ICsgZltwKytdXV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaCh1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDUzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKG5ldyBBcnJheShmW3ArK10pKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ1tnLmxlbmd0aCAtIDZdID0gbC5jYWxsKGdbZy5sZW5ndGggLSA2XSwgZ1tnLmxlbmd0aCAtIDVdLCBnW2cubGVuZ3RoIC0gNF0sIGdbZy5sZW5ndGggLSAzXSwgZ1tnLmxlbmd0aCAtIDJdLCBnW2cubGVuZ3RoIC0gMV0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcubGVuZ3RoIC09IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3MDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDcyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3NjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucHVzaCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wdXNoKHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnB1c2goYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4NzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5NToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnLnBvcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgKSkpLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWUuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH1dKSwKICAgICAgICAgICAgICAgIG5lCiAgICAgICAgfShxKDQ1NiksIHEoNDU4KSwgcSg0MjYpLCBxKDQ0MiksIHEoMzkxKSwgcSgzOTIpLCBxKDQyNyksIHEoNDY1KSwgcSg0MzYpLCBxKDQ1MiksIHEoNDAxKSwgcSg0MzgpLCBxKDQzNCksIHEoNDA1KSwgcSg0MzMpKTsKICAgICAgICBmdW5jdGlvbiBRKCkgewogICAgICAgICAgICB2YXIgZSA9IFsieDE5WXp4ZjF6eG4wcmd2V0NZYll6eGYxenhuMGloclZBMnZVaWd6SEF3WEx6Y1dHenhqWUIzaTZpYSIsICJCZzlKeXdYRkEydjV4Wm0iLCAidHhhT21LbVgiLCAibGdUTEV0MCIsICJDTXZYRHd2WkRjYjBCMlRMQkliTXl3TFN6d3FHQTJ2NW9HIiwgIngxOVl6eGYxenhuMHF3WE5CM2pQRGdIVGlndlVES25WQmdYTHkzcTkiLCAiejJ2MHZnOVJ6dzVGIiwgIngxOUhCZ0RWQ01MMEFnMCIsICJ4MTlOenc1dEF3RFUiLCAibGNiWXp4cllFc2JVenhIMGloclBCd3VVIiwgIkJkZk1CYSIsICJpaHJWQTJ2VW9HIiwgIngxOVl6eGYxenhuMHJndldDWWIxQzJ1R3kyZkpBZ3VHek5hU2lneldvRyIsICJCd2ZQQkk1WkF3RFVpMTlGQ012WER3dlpEZXJMQ2htIiwgIkMyTE5CRyIsICJ4MTlUeXdUTHUyTE5CRyIsICJ4MTlOenc1ZXp3ekhEd1gwczJ2NWlnTFVDaHYwcHEiLCAieDE5WXp4ZjF6eG4wcmd2V0NXIiwgIngxOVR5d1RMdTJMTkJJV0dDTXZaRHdYMG9HIiwgIngxOUpBZ3ZKQTFiSENNZlRDVyIsICJsY2JaRGc5WXl3RExyTmE2IiwgImxjYkhCZ0RWb0ciLCAiQzJMTkJJYkxCZ2ZXQzJ2S2loclBCd3VIIiwgIngxOVd5eGpaenZyVkEydlUiLCAiRGc5Unp3NEdBeG1HencxV0RoSyIsICJ4MTlOenc1dEF3RFVsY2JXeXhqSEJ4bnREaGk2IiwgIm1jZmEiLCAieDE5SkIyWFN6d24waWd2VURLblZCZ1hMeTNxOSIsICJ4MTlZenhmMXp4bjByZ3ZXQ1lXR3gxOVd5eGpaenVmU3oyOVlBeHJPQnNiWXp4bjFCaHE2IiwgInlOdVkiLCAiQ2dmWXl3MVppZ0xaaWc1VkRjYkhpaGJTeXdMVWlnOUlBTXZKRGEiLCAiQ2dmWXl3MVppZ25WQk5ySEF3NVppaGpMQzJ2WURNdktpaGJIQ01mVGlnNUhCd3VVIiwgImxndjRDaGpMQzNtOSIsICJ4MTlZenhmMXp4bjBxd1hOQjNqUERnSFR0MjVKenEiLCAieDE5Tnp3NXRBd0RVcmd2TXl4dlNEY1dHQ2dmWXl3MVp1M3JZb0ciLCAieDE5WXp4ZjF6eG4wcmd2V0NZYlpEZ2ZZRGM0IiwgIngxOVl6eGYxenhuMHJndldDWWIxQzJ1R0JNdjNpZ3pXbGNiTUNkTyIsICJ4MTlQQk1MZEIyNU1Bd0MiLCAieTNqTHl4ckxpZ0xVQzNySEJNbkxpaERQRGdHR3l4Yldzd3E5IiwgIngxOU56dzVlend6SER3WDBzMnY1IiwgIm10S1ltZHkybk1MeHVoam92YSIsICJ4MTlZenhmMXp4bjByZ3ZXQ1liTEJNcVUiLCAibUpEeEJ1MVRBdksiLCAiQ1luUyIsICJtWkdZc0tYUXZ2ZmMiLCAibGNiRkJnOUh6Z3ZLeDJuSHkySExDWk8iLCAieDE5Tnp3NXRBd0RVcmd2TXl4dlNEYSIsICJ6TnZVeTNyUEIyNWp6YSIsICJtdHlXbnRDMkV4YmVzZWZrIiwgIkR3NVJCTTkzQkliTENOalZDRyIsICJuWkh0d3h2MUVmQyIsICJtWkNXbVppMEJ1SE11Z3Z6IiwgIkNnZll5dzFaaWdMWmlndlRDaHI1aWdmTURndllpZ3Y0eTJYMXpnTFV6WWFJRHc1Wnl3ekxpSWJXeXhqSEJ4bSIsICJDM3ZKeTJ2WkNXIiwgIm1aaTJuZHFXb2hyMHowdldBRyIsICJsY2JMcHEiLCAieDE5V3l4alp6dWZTejI5WUF4ck9CcSIsICJ4MTlOenc1dEF3RFV1Z2ZZeXcxWiIsICJ4MTlZenhmMXp4bjBxd1hOQjNqUERnSFRpaG4weXhqMGxHIiwgImxjYjBCMlRMQkpPIiwgInp4SDB6dzVLIiwgIm1Kcm12MnJld3ZlIiwgIm1KZTVtSkc0bWd6d3kzSFV1cSIsICJ4MTlZenhmMXp4bjBxd1hOQjNqUERnSFRpZ3ZVemM0IiwgInl4YldBd3EiLCAieDE5WXp4ZjF6eG4wcmd2V0NZYk1DTTlUaWduSHkySExsY2JMQk1xVSIsICJ4MTlZenhmMXp4bjBxd1hOQjNqUERnSFQiLCAiQ012MER4alVpYSIsICJtWmExbWUxbHNLUE9CRyIsICJ4MTlZenhmMXp4bjBxd1hOQjNqUERnSFRpaGpMQ3h2TEMzcUdDM3ZKeTJ2WkNZZVNpZ25PenduUmlnMUxCdzlZRXNiTUNkTyIsICJ4MTlKQjJYU3p3bjAiLCAiQzJ2MERnTFV6M21VeXhiV3N3cUdCeHZaRGNiSXpzYkhpZzVWQkkxTEJ4YjBFc2JaRGhqUEJNQyIsICJsY2JaQXdEVXp3cnREaGk2IiwgIm5jNDMiLCAiQ2dmWXl3MVppZ0xaaWd2VENocjUiLCAieDE5WXp4ZjF6eG4wcXdYTkIzalBEZ0hUdDI1SnpzYlJ6eEs2IiwgIngwMDJ3dDlLRE16b25kYnd0dXpCd2EiLCAiejJ2VXp4akhEZ3VHQTJ2NWlnekhBd1hMemEiLCAibUpHM0N3WFhFdnpuIiwgImxjYk1DZE8iLCAiRXhMNUV1MW56Z3JPQWcxVEMzbnR1MW0iLCAibUppMG50dTFyZ25wd05uVyIsICJEeG5MaWc1VkNNMUhCZnJWQTJ2VSIsICJsY2JKQWd2SkFZYlpEZzlZeXdETGlneldvRyJdOwogICAgICAgICAgICByZXR1cm4gKFEgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApKCkKICAgICAgICB9CiAgICAgICAgVi5zZXR0aW5ncyA9IHsKICAgICAgICAgICAgZGVidWc6ICExCiAgICAgICAgfSwKICAgICAgICAgICAgd2luZG93LlBhcmFtc1NpZ24gPSBWOwogICAgICAgIHZhciAkID0gVjsKICAgICAgICBlLmRlZmF1bHQgPSAkCiAgICB9KG4pLAogICAgICAgIHQobikKfSgpOwp2YXIgb25lX2Z1bmM7CnZhciBuZWVkX2Z1bmM7CmZ1bmN0aW9uIF83ODI0OSh0LCBuLCBlKSB7CiAgICB2YXIgaTsKICAgIHQuZXhwb3J0cyA9IChpID0gaSB8fCBmdW5jdGlvbih0LCBuKSB7CiAgICAgICAgdmFyIGk7CiAgICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93LmNyeXB0byAmJiAoaSA9IHdpbmRvdy5jcnlwdG8pLAogICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBzZWxmICYmIHNlbGYuY3J5cHRvICYmIChpID0gc2VsZi5jcnlwdG8pLAogICAgICAgICJ1bmRlZmluZWQiICE9IHR5cGVvZiBnbG9iYWxUaGlzICYmIGdsb2JhbFRoaXMuY3J5cHRvICYmIChpID0gZ2xvYmFsVGhpcy5jcnlwdG8pLAogICAgICAgICFpICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93Lm1zQ3J5cHRvICYmIChpID0gd2luZG93Lm1zQ3J5cHRvKSwKICAgICAgICAhaSAmJiB2b2lkIDAgIT09IGUuZyAmJiBlLmcuY3J5cHRvICYmIChpID0gZS5nLmNyeXB0byksCiAgICAgICAgICAgICFpKQogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaSA9IGUoNDI0ODApCiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgdmFyIHIgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgaWYgKGkpIHsKICAgICAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBpLmdldFJhbmRvbVZhbHVlcykKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQzMkFycmF5KDEpKVswXQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHt9CiAgICAgICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgaS5yYW5kb21CeXRlcykKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5yYW5kb21CeXRlcyg0KS5yZWFkSW50MzJMRSgpCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge30KICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5hdGl2ZSBjcnlwdG8gbW9kdWxlIGNvdWxkIG5vdCBiZSB1c2VkIHRvIGdldCBzZWN1cmUgcmFuZG9tIG51bWJlci4iKQogICAgICAgIH0KICAgICAgICAgICAgLCBzID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgZnVuY3Rpb24gdCgpIHt9CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICB2YXIgZTsKICAgICAgICAgICAgICAgIHJldHVybiB0LnByb3RvdHlwZSA9IG4sCiAgICAgICAgICAgICAgICAgICAgZSA9IG5ldyB0LAogICAgICAgICAgICAgICAgICAgIHQucHJvdG90eXBlID0gbnVsbCwKICAgICAgICAgICAgICAgICAgICBlCiAgICAgICAgICAgIH0KICAgICAgICB9KCkKICAgICAgICAgICAgLCBvID0ge30KICAgICAgICAgICAgLCB1ID0gby5saWIgPSB7fQogICAgICAgICAgICAsIGYgPSB1LkJhc2UgPSB7CiAgICAgICAgICAgIGV4dGVuZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSBzKHRoaXMpOwogICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgbi5taXhJbih0KSwKICAgICAgICAgICAgICAgIG4uaGFzT3duUHJvcGVydHkoImluaXQiKSAmJiB0aGlzLmluaXQgIT09IG4uaW5pdCB8fCAobi5pbml0ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG4uJHN1cGVyLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgbi5pbml0LnByb3RvdHlwZSA9IG4sCiAgICAgICAgICAgICAgICAgICAgbi4kc3VwZXIgPSB0aGlzLAogICAgICAgICAgICAgICAgICAgIG4KICAgICAgICAgICAgfSwKICAgICAgICAgICAgY3JlYXRlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5leHRlbmQoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0LmluaXQuYXBwbHkodCwgYXJndW1lbnRzKSwKICAgICAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge30sCiAgICAgICAgICAgIG1peEluOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIHQpCiAgICAgICAgICAgICAgICAgICAgdC5oYXNPd25Qcm9wZXJ0eShuKSAmJiAodGhpc1tuXSA9IHRbbl0pOwogICAgICAgICAgICAgICAgdC5oYXNPd25Qcm9wZXJ0eSgidG9TdHJpbmciKSAmJiAodGhpcy50b1N0cmluZyA9IHQudG9TdHJpbmcpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNsb25lOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluaXQucHJvdG90eXBlLmV4dGVuZCh0aGlzKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICAgICAsIGggPSB1LldvcmRBcnJheSA9IGYuZXh0ZW5kKHsKICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgdCA9IHRoaXMud29yZHMgPSB0IHx8IFtdLAogICAgICAgICAgICAgICAgICAgIHRoaXMuc2lnQnl0ZXMgPSBudWxsICE9IG4gPyBuIDogNCAqIHQubGVuZ3RoCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gKHQgfHwgbCkuc3RyaW5naWZ5KHRoaXMpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbmNhdDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLndvcmRzCiAgICAgICAgICAgICAgICAgICAgLCBlID0gdC53b3JkcwogICAgICAgICAgICAgICAgICAgICwgaSA9IHRoaXMuc2lnQnl0ZXMKICAgICAgICAgICAgICAgICAgICAsIHIgPSB0LnNpZ0J5dGVzOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xhbXAoKSwKICAgICAgICAgICAgICAgIGkgJSA0KQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgcjsgcysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZVtzID4+PiAyXSA+Pj4gMjQgLSBzICUgNCAqIDggJiAyNTU7CiAgICAgICAgICAgICAgICAgICAgICAgIG5baSArIHMgPj4+IDJdIHw9IG8gPDwgMjQgLSAoaSArIHMpICUgNCAqIDgKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCByOyB1ICs9IDQpCiAgICAgICAgICAgICAgICAgICAgICAgIG5baSArIHUgPj4+IDJdID0gZVt1ID4+PiAyXTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNpZ0J5dGVzICs9IHIsCiAgICAgICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGFtcDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMud29yZHMKICAgICAgICAgICAgICAgICAgICAsIGUgPSB0aGlzLnNpZ0J5dGVzOwogICAgICAgICAgICAgICAgbltlID4+PiAyXSAmPSA0Mjk0OTY3Mjk1IDw8IDMyIC0gZSAlIDQgKiA4LAogICAgICAgICAgICAgICAgICAgIG4ubGVuZ3RoID0gdC5jZWlsKGUgLyA0KQogICAgICAgICAgICB9LAogICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdCA9IGYuY2xvbmUuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgIHJldHVybiB0LndvcmRzID0gdGhpcy53b3Jkcy5zbGljZSgwKSwKICAgICAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJhbmRvbTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IFtdLCBlID0gMDsgZSA8IHQ7IGUgKz0gNCkKICAgICAgICAgICAgICAgICAgICBuLnB1c2gocigpKTsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaC5pbml0KG4sdCkKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgICAgICwgYyA9IG8uZW5jID0ge30KICAgICAgICAgICAgLCBsID0gYy5IZXggPSB7CiAgICAgICAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQud29yZHMsIGUgPSB0LnNpZ0J5dGVzLCBpID0gW10sIHIgPSAwOyByIDwgZTsgcisrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuW3IgPj4+IDJdID4+PiAyNCAtIHIgJSA0ICogOCAmIDI1NTsKICAgICAgICAgICAgICAgICAgICBpLnB1c2goKHMgPj4+IDQpLnRvU3RyaW5nKDE2KSksCiAgICAgICAgICAgICAgICAgICAgICAgIGkucHVzaCgoMTUgJiBzKS50b1N0cmluZygxNikpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaS5qb2luKCIiKQogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoLCBlID0gW10sIGkgPSAwOyBpIDwgbjsgaSArPSAyKQogICAgICAgICAgICAgICAgICAgIGVbaSA+Pj4gM10gfD0gcGFyc2VJbnQodC5zdWJzdHIoaSwgMiksIDE2KSA8PCAyNCAtIGkgJSA4ICogNDsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaC5pbml0KGUsbiAvIDIpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgICAgICwgYSA9IGMuTGF0aW4xID0gewogICAgICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSB0LndvcmRzLCBlID0gdC5zaWdCeXRlcywgaSA9IFtdLCByID0gMDsgciA8IGU7IHIrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBzID0gbltyID4+PiAyXSA+Pj4gMjQgLSByICUgNCAqIDggJiAyNTU7CiAgICAgICAgICAgICAgICAgICAgaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaS5qb2luKCIiKQogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXJzZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoLCBlID0gW10sIGkgPSAwOyBpIDwgbjsgaSsrKQogICAgICAgICAgICAgICAgICAgIGVbaSA+Pj4gMl0gfD0gKDI1NSAmIHQuY2hhckNvZGVBdChpKSkgPDwgMjQgLSBpICUgNCAqIDg7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGguaW5pdChlLG4pCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgICAgICwgZCA9IGMuVXRmOCA9IHsKICAgICAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKGEuc3RyaW5naWZ5KHQpKSkKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk1hbGZvcm1lZCBVVEYtOCBkYXRhIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFyc2U6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBhLnBhcnNlKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudCh0KSkpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgICAgICwgcCA9IHUuQnVmZmVyZWRCbG9ja0FsZ29yaXRobSA9IGYuZXh0ZW5kKHsKICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5fZGF0YSA9IG5ldyBoLmluaXQsCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbkRhdGFCeXRlcyA9IDAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2FwcGVuZDogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mIHQgJiYgKHQgPSBkLnBhcnNlKHQpKSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhLmNvbmNhdCh0KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9uRGF0YUJ5dGVzICs9IHQuc2lnQnl0ZXMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgX3Byb2Nlc3M6IGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgIHZhciBlLCBpID0gdGhpcy5fZGF0YSwgciA9IGkud29yZHMsIHMgPSBpLnNpZ0J5dGVzLCBvID0gdGhpcy5ibG9ja1NpemUsIHUgPSBzIC8gKDQgKiBvKSwgZiA9ICh1ID0gbiA/IHQuY2VpbCh1KSA6IHQubWF4KCgwIHwgdSkgLSB0aGlzLl9taW5CdWZmZXJTaXplLCAwKSkgKiBvLCBjID0gdC5taW4oNCAqIGYsIHMpOwogICAgICAgICAgICAgICAgaWYgKGYpIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGY7IGwgKz0gbykKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9Qcm9jZXNzQmxvY2sociwgbCk7CiAgICAgICAgICAgICAgICAgICAgZSA9IHIuc3BsaWNlKDAsIGYpLAogICAgICAgICAgICAgICAgICAgICAgICBpLnNpZ0J5dGVzIC09IGMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBuZXcgaC5pbml0KGUsYykKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHQgPSBmLmNsb25lLmNhbGwodGhpcyk7CiAgICAgICAgICAgICAgICByZXR1cm4gdC5fZGF0YSA9IHRoaXMuX2RhdGEuY2xvbmUoKSwKICAgICAgICAgICAgICAgICAgICB0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9taW5CdWZmZXJTaXplOiAwCiAgICAgICAgfSkKICAgICAgICAgICAgLCBnID0gKHUuSGFzaGVyID0gcC5leHRlbmQoewogICAgICAgICAgICBjZmc6IGYuZXh0ZW5kKCksCiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHRoaXMuY2ZnID0gdGhpcy5jZmcuZXh0ZW5kKHQpLAogICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKQogICAgICAgICAgICB9LAogICAgICAgICAgICByZXNldDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBwLnJlc2V0LmNhbGwodGhpcyksCiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZG9SZXNldCgpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGVuZCh0KSwKICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcm9jZXNzKCksCiAgICAgICAgICAgICAgICAgICAgdGhpcwogICAgICAgICAgICB9LAogICAgICAgICAgICBmaW5hbGl6ZTogZnVuY3Rpb24odCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdGhpcy5fYXBwZW5kKHQpLAogICAgICAgICAgICAgICAgICAgIHRoaXMuX2RvRmluYWxpemUoKQogICAgICAgICAgICB9LAogICAgICAgICAgICBibG9ja1NpemU6IDE2LAogICAgICAgICAgICBfY3JlYXRlSGVscGVyOiBmdW5jdGlvbih0KSB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndDogJyx0KQogICAgICAgICAgICAgICAgbmVlZF9mdW5jID0gdDsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0LmluaXQoZSkuZmluYWxpemUobikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgX2NyZWF0ZUhtYWNIZWxwZXI6IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihuLCBlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnLkhNQUMuaW5pdCh0LGUpLmZpbmFsaXplKG4pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KSwKICAgICAgICAgICAgby5hbGdvID0ge30pOwogICAgICAgIG9uZV9mdW5jID0gbzsKICAgICAgICByZXR1cm4gbwogICAgfShNYXRoKSwKICAgICAgICBpKQp9CmZ1bmN0aW9uIF81MjE1Myh0LCBuLCBlKSB7CiAgICB2YXIgaTsKICAgIHQuZXhwb3J0cyA9IChpID0gb25lX2Z1bmMsCiAgICAgICAgZnVuY3Rpb24odCkgewogICAgICAgICAgICB2YXIgbiA9IGkKICAgICAgICAgICAgICAgICwgZSA9IG4ubGliCiAgICAgICAgICAgICAgICAsIHIgPSBlLldvcmRBcnJheQogICAgICAgICAgICAgICAgLCBzID0gZS5IYXNoZXIKICAgICAgICAgICAgICAgICwgbyA9IG4uYWxnbwogICAgICAgICAgICAgICAgLCB1ID0gW10KICAgICAgICAgICAgICAgICwgZiA9IFtdOwogICAgICAgICAgICAhZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBuKG4pIHsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gdC5zcXJ0KG4pLCBpID0gMjsgaSA8PSBlOyBpKyspCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG4gJSBpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gITAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGUodCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiA0Mjk0OTY3Mjk2ICogKHQgLSAoMCB8IHQpKSB8IDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAyLCByID0gMDsgciA8IDY0OyApCiAgICAgICAgICAgICAgICAgICAgbihpKSAmJiAociA8IDggJiYgKHVbcl0gPSBlKHQucG93KGksIC41KSkpLAogICAgICAgICAgICAgICAgICAgICAgICBmW3JdID0gZSh0LnBvdyhpLCAxIC8gMykpLAogICAgICAgICAgICAgICAgICAgICAgICByKyspLAogICAgICAgICAgICAgICAgICAgICAgICBpKysKICAgICAgICAgICAgfSgpOwogICAgICAgICAgICB2YXIgaCA9IFtdCiAgICAgICAgICAgICAgICAsIGMgPSBvLlNIQTI1NiA9IHMuZXh0ZW5kKHsKICAgICAgICAgICAgICAgIF9kb1Jlc2V0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYXNoID0gbmV3IHIuaW5pdCh1LnNsaWNlKDApKQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9kb1Byb2Nlc3NCbG9jazogZnVuY3Rpb24odCwgbikgewogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGUgPSB0aGlzLl9oYXNoLndvcmRzLCBpID0gZVswXSwgciA9IGVbMV0sIHMgPSBlWzJdLCBvID0gZVszXSwgdSA9IGVbNF0sIGMgPSBlWzVdLCBsID0gZVs2XSwgYSA9IGVbN10sIGQgPSAwOyBkIDwgNjQ7IGQrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDE2KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaFtkXSA9IDAgfCB0W24gKyBkXTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGhbZCAtIDE1XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgZyA9IChwIDw8IDI1IHwgcCA+Pj4gNykgXiAocCA8PCAxNCB8IHAgPj4+IDE4KSBeIHAgPj4+IDMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsIG0gPSBoW2QgLSAyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgeSA9IChtIDw8IDE1IHwgbSA+Pj4gMTcpIF4gKG0gPDwgMTMgfCBtID4+PiAxOSkgXiBtID4+PiAxMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhbZF0gPSBnICsgaFtkIC0gN10gKyB5ICsgaFtkIC0gMTZdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBpICYgciBeIGkgJiBzIF4gciAmIHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgdyA9IChpIDw8IDMwIHwgaSA+Pj4gMikgXiAoaSA8PCAxOSB8IGkgPj4+IDEzKSBeIChpIDw8IDEwIHwgaSA+Pj4gMjIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsICQgPSBhICsgKCh1IDw8IDI2IHwgdSA+Pj4gNikgXiAodSA8PCAyMSB8IHUgPj4+IDExKSBeICh1IDw8IDcgfCB1ID4+PiAyNSkpICsgKHUgJiBjIF4gfnUgJiBsKSArIGZbZF0gKyBoW2RdOwogICAgICAgICAgICAgICAgICAgICAgICBhID0gbCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gbyArICQgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9ICQgKyAodyArIHYpIHwgMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlWzBdID0gZVswXSArIGkgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzFdID0gZVsxXSArIHIgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzJdID0gZVsyXSArIHMgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzNdID0gZVszXSArIG8gfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzRdID0gZVs0XSArIHUgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzVdID0gZVs1XSArIGMgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzZdID0gZVs2XSArIGwgfCAwLAogICAgICAgICAgICAgICAgICAgICAgICBlWzddID0gZVs3XSArIGEgfCAwCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX2RvRmluYWxpemU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAsIGUgPSBuLndvcmRzCiAgICAgICAgICAgICAgICAgICAgICAgICwgaSA9IDggKiB0aGlzLl9uRGF0YUJ5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICwgciA9IDggKiBuLnNpZ0J5dGVzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBlW3IgPj4+IDVdIHw9IDEyOCA8PCAyNCAtIHIgJSAzMiwKICAgICAgICAgICAgICAgICAgICAgICAgZVsxNCArIChyICsgNjQgPj4+IDkgPDwgNCldID0gdC5mbG9vcihpIC8gNDI5NDk2NzI5NiksCiAgICAgICAgICAgICAgICAgICAgICAgIGVbMTUgKyAociArIDY0ID4+PiA5IDw8IDQpXSA9IGksCiAgICAgICAgICAgICAgICAgICAgICAgIG4uc2lnQnl0ZXMgPSA0ICogZS5sZW5ndGgsCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3MoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFzaAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNsb25lOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHMuY2xvbmUuY2FsbCh0aGlzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdC5faGFzaCA9IHRoaXMuX2hhc2guY2xvbmUoKSwKICAgICAgICAgICAgICAgICAgICAgICAgdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgbi5TSEEyNTYgPSBzLl9jcmVhdGVIZWxwZXIoYyksCiAgICAgICAgICAgICAgICBuLkhtYWNTSEEyNTYgPSBzLl9jcmVhdGVIbWFjSGVscGVyKGMpOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnczogJyxzLl9jcmVhdGVIZWxwZXIpCiAgICAgICAgfShNYXRoKSwKICAgICAgICBpLlNIQTI1NikKfQoKZnVuY3Rpb24gZ2V0X2JvZHkob2JqKXsKICAgIG4gPSBKU09OLnN0cmluZ2lmeShvYmopCiAgICBsZXQgYm9keSA9IG5ldyBuZWVkX2Z1bmMuaW5pdCgpLmZpbmFsaXplKG4pLnRvU3RyaW5nKCkKICAgIHJldHVybiBib2R5Owp9CgpuZWVkX2g1c3QgPSAiIjsKZnVuY3Rpb24gZ2V0X3Jlc19oNXN0KG9iail7CiAgICB4ID0gbmV3IHdpbmRvdy5QYXJhbXNTaWduKHsKICAgICAgICBhcHBJZDogIjU4NmFlIgogICAgfSkKICAgIGxldCBib2R5ID0gZ2V0X2JvZHkob2JqKQogICAgeC5zaWduKHsKICAgICAgICAiZnVuY3Rpb25JZCI6ICJ1bmlvblNlYXJjaCIsCiAgICAgICAgImFwcGlkIjogInVuaW9ucGMiLAogICAgICAgICJib2R5IjogYm9keQogICAgfSkudGhlbihyZXM9PntuZWVkX2g1c3QgPSByZXMuaDVzdH0pOwp9CgpfNzgyNDkoe30se30se30pCl81MjE1Myh7fSx7fSx7fSkKCmZ1bmN0aW9uIGdldF9yZXNfcmVzKG9iail7CiAgICBnZXRfcmVzX2g1c3Qob2JqKTsKICAgIHNldFRpbWVvdXQoKCk9PiB7Y29uc29sZS5sb2cobmVlZF9oNXN0KTt9LDUwKQp9Cjs7O29iaiA9IG9ial9zdHI7CmdldF9yZXNfcmVzKG9iaikKCgo=
"""
    js_code = base64.b64decode(js_code).decode('utf-8')
    return js_code

def get_static_list():
    static_list = [
    {
        "content": "22",
        "createTime": "2021-10-20 22:59:33",
        "detail": "",
        "end": 1735660799,
        "endTime": "2024-12-31 23:59:59",
        "exhibitionId": 85,
        "id": 3443,
        "mainTitle": "实时热销",
        "mainTitleColor": "#000000",
        "name": "",
        "operator": "shaohuoqin",
        "order": 1,
        "start": 1634659200,
        "startTime": "2021-10-20 00:00:00",
        "status": 1,
        "subtitle": "",
        "subtitleColor": "#000000",
        "targetUserTag": 0,
        "updateTime": "2023-01-05 15:44:09",
        "url": "",
        "urlList": []
    },
    {
        "content": "108",
        "createTime": "2021-10-20 23:00:15",
        "detail": "",
        "end": 1735660799,
        "endTime": "2024-12-31 23:59:59",
        "exhibitionId": 85,
        "id": 3444,
        "mainTitle": "秒杀专区",
        "mainTitleColor": "#000000",
        "name": "",
        "operator": "shaohuoqin",
        "order": 2,
        "start": 1634659200,
        "startTime": "2021-10-20 00:00:00",
        "status": 1,
        "subtitle": "",
        "subtitleColor": "#000000",
        "targetUserTag": 0,
        "updateTime": "2023-01-05 15:44:19",
        "url": "",
        "urlList": []
    },
    {
        "content": "153",
        "createTime": "2021-10-20 23:02:28",
        "detail": "",
        "end": 1735660799,
        "endTime": "2024-12-31 23:59:59",
        "exhibitionId": 85,
        "id": 3445,
        "mainTitle": "历史低价",
        "mainTitleColor": "#000000",
        "name": "",
        "operator": "shaohuoqin",
        "order": 3,
        "start": 1634659200,
        "startTime": "2021-10-20 00:00:00",
        "status": 1,
        "subtitle": "",
        "subtitleColor": "#000000",
        "targetUserTag": 0,
        "updateTime": "2023-01-05 15:44:28",
        "url": "",
        "urlList": []
    },
    {
        "content": "129",
        "createTime": "2021-10-20 23:03:58",
        "detail": "",
        "end": 1735660799,
        "endTime": "2024-12-31 23:59:59",
        "exhibitionId": 85,
        "id": 3446,
        "mainTitle": "定向高佣",
        "mainTitleColor": "#000000",
        "name": "",
        "operator": "shaohuoqin",
        "order": 4,
        "start": 1634659200,
        "startTime": "2021-10-20 00:00:00",
        "status": 1,
        "subtitle": "",
        "subtitleColor": "#000000",
        "targetUserTag": 0,
        "updateTime": "2023-01-05 15:44:41",
        "url": "",
        "urlList": []
    },
    {
        "content": "23",
        "createTime": "2021-10-20 23:06:03",
        "detail": "",
        "end": 1735660799,
        "endTime": "2024-12-31 23:59:59",
        "exhibitionId": 85,
        "id": 3447,
        "mainTitle": "粉丝爱买",
        "mainTitleColor": "#000000",
        "name": "",
        "operator": "shaohuoqin",
        "order": 5,
        "start": 1634659200,
        "startTime": "2021-10-20 00:00:00",
        "status": 1,
        "subtitle": "",
        "subtitleColor": "#000000",
        "targetUserTag": 0,
        "updateTime": "2023-01-05 15:44:57",
        "url": "",
        "urlList": []
    }
]
    return static_list

def get_h5st(search_data):
    obj_str = json.dumps(search_data, ensure_ascii=False, separators=(',', ':'))
    # with open('hnw.js', 'r', encoding='utf-8') as f:
    #     js_code = f.read()
    js_code = get_js_code()
    js_code = js_code.replace('obj_str', obj_str)
    with open('run.js', 'w', encoding='utf-8') as f:
        f.write(js_code)
    result = subprocess.run(['node', 'run.js'], capture_output=True, text=True)
    h5st = result.stdout
    return h5st

def get_params(search_data):
    times = int(time.time() * 1000)
    obj_str = json.dumps(search_data,ensure_ascii=False, separators=(',', ':'))
    h5st = get_h5st(search_data)
    params = {
        'functionId': 'unionSearch',
        'appid': 'unionpc',
        '_': times,
        'loginType': '3',
        'uuid': quote(uuid),
        'x-api-eid-token': x_api_eid_token,
        'h5st': quote(h5st.strip()),
        'body': quote(obj_str)
    }
    return params

def get_info_data(item):
    skuName = item.get('skuName')
    couponAfterPrice = item.get('couponAfterPrice')
    venderName = item.get('venderName')
    goodComments = item.get('goodComments')
    info_data = [skuName, couponAfterPrice, venderName, goodComments]
    return info_data

def get_page_data(page_num, content):
    search_data = {"funName": "querySearchInfoByEliteId", "param": {"pageNo": page_num, "pageSize": 60, "eliteId": content},
                   "clientPageId": "jingfen_pc"}
    for c in range(1, 13):
        try:
            params = get_params(search_data)
            api_url = 'https://api.m.jd.com/api'
            lst = []
            for k, v in params.items():
                lst.append(f'{k}={v}')
            pa_str = '&'.join(lst)
            api_url = f'{api_url}?{pa_str}'
            headers = so.headers
            resp = web_page.get(api_url)
            print('resp: ',resp)
            if resp:
                break
            else:
                print(f'第{c}次请求失败~!~')
        except Exception as e:
            print(f'第{c}次请求失败: ', e)
    json_data = json.loads(web_page.html).get('data')
    hasNext = json_data.get('hasNext')
    total = json_data.get('total')
    total_page = math.ceil(total / 50)
    result = json_data.get('result')
    print('hasNext: ', hasNext)
    print('total: ', total)
    print('result: ', len(result))
    for item in result:
        info_data =get_info_data(item)
        print(info_data)
        writer.write_data(info_data)
    return total, total_page, hasNext

if __name__ == '__main__':
    co = ChromiumOptions()
    so = SessionOptions()
    co.auto_port(True)
    web_page = WebPage(chromium_options=co,session_or_options=so)
    url = 'https://union.jd.com/proManager/index?pageNo=1'
    web_page.get(url)
    time.sleep(2)
    cok_dic = web_page.cookies(as_dict=True)
    x_api_eid_token = cok_dic.get('3AB9D23F7A4B3CSS')
    __jda = cok_dic.get('__jda')
    uuid = __jda.split('.')[1]
    web_page.change_mode()
    static_list = get_static_list()
    for static_dic in static_list:
        mainTitle = static_dic.get('mainTitle')
        content = static_dic.get('content')
        print(mainTitle, content)
        writer = WriteToCsv(f'jd_{mainTitle}-{content}.csv', ['商品名称', '券后价', '店铺名称', '好评数'])
        page_num = 1
        while True:
            print(f'正在获取第{page_num}页数据: ')
            total, total_page, hasNext = get_page_data(page_num, content)
            print(f'第{page_num}页数据获取完成~!')
            if not hasNext:
                break
            page_num += 1
            time.sleep(random.uniform(1, 2))
        writer.close_file()
        writer.change_csv_to_xlsx()
    web_page.close()